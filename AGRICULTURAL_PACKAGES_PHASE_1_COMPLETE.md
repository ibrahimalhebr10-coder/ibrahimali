# ุงููุฑุญูุฉ ุงูุฃููู: ุฅุฏุงุฑุฉ ุจุงูุงุช ูุญุตููู ุงูุฒุฑุงุนู - ููุชููุฉ

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุจูุงุก ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ **ุจุงูุงุช ูุญุตููู ุงูุฒุฑุงุนู** ูู ููุญุฉ ุงูุชุญูู ุงูุฅุฏุงุฑูุฉ.

---

## ุงููุฏู ุงููุญูู

```
โ ุจูุงุก ุจุงูุงุช ุงูุชูุงุน ุฒุฑุงุนู ูุงุถุญุฉ
โ ุบูุฑ ุงุณุชุซูุงุฑูุฉ
โ ุชุนูู ูุจุงุดุฑุฉ ูุน ุตูุญุฉ ุงููุฒุฑุนุฉ ุงูุฒุฑุงุนูุฉ
โ ุฅุฏุงุฑุฉ ูุงููุฉ ูู ููุญุฉ ุงูุชุญูู
```

---

## ูููุฐุฌ ุงูุจุงูุฉ ุงูุฒุฑุงุนูุฉ

### 1. ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ โ

```typescript
{
  package_name: string              // ุงุณู ุงูุจุงูุฉ
  price_per_tree: number            // ุณุนุฑ ุงูุจุงูุฉ (ููุดุฌุฑุฉ ุงููุงุญุฏุฉ)
  base_duration_years: number       // ูุฏุฉ ุงูุงูุชูุงุน ุงูุฃุณุงุณูุฉ (ุจุงูุณููุงุช)
  bonus_free_years: number          // ุณููุงุช ุฅุถุงููุฉ ูุฌุงููุฉ
  motivational_text: string         // ูุต ุชุญููุฒู (ุงุฎุชูุงุฑู)
  contract_id: string               // ุฑุจุท ูุน ุนูุฏ ุงููุฒุฑุนุฉ
}
```

#### ูุซุงู
```
ุงุณู ุงูุจุงูุฉ: "ุนูุฏ ุณูุฉ"
ุงูุณุนุฑ: 197 ุฑูุงู ููุดุฌุฑุฉ
ุงููุฏุฉ ุงูุฃุณุงุณูุฉ: 1 ุณูุฉ
ุณููุงุช ูุฌุงููุฉ: 3 ุณููุงุช
ุงููุต ุงูุชุญููุฒู: "ุฅุถุงูุฉ 3 ุณููุงุช ูุฌุงูุงู"
```

---

### 2. ูุถููู ุงูุจุงูุฉ ุงูุฒุฑุงุนูุฉ โ

#### ุฃ) ุชุนุฑูู ุงูุจุงูุฉ
```
ุดุฑุญ ุงูุงูุชูุงุน ุงูููุฒูู ูุงูุงุณุชุฎุฏุงู ุงูุดุฎุตู
ูุซุงู: "ุจุงูุฉ ูุญุตููู ุงูุฒุฑุงุนู ููุฏุฉ ุณูุฉ ูุงุญุฏุฉ ูุน ููุงูุฃุฉ 3 ุณููุงุช..."
```

#### ุจ) ูููุฒุงุช ุงูุจุงูุฉ
```
- ุงุณุชูุงู ุงููุญุตูู ุงูุณููู
- ุฅูุฏุงุก ููุฃุญุจุงุจ
- ุตุฏูุฉ ุฌุงุฑูุฉ
- ูุชุงุจุนุฉ ุงููุญุตูู ุนุจุฑ ุงูุชุทุจูู
- ุชูุงุฑูุฑ ุฏูุฑูุฉ
```

#### ุฌ) ุดุฑูุท ุงูุจุงูุฉ
```
- ุบูุฑ ุงุณุชุซูุงุฑู
- ูุง ุนูุงุฆุฏ ูุงููุฉ
- ุงูุงูุชุฒุงู ุจุฏูุน ุฑุณูู ุงูุตูุงูุฉ (ุจุนุฏ ุงูุณูุฉ ุงูุฃููู)
- ุงูุงูุชุฒุงู ุจุณูุงุณุงุช ุงูููุตุฉ
```

#### ุฏ) ูุงุฐุง ูุดูู ุงูุณุนุฑ
```
- ููููุฉ ุงูุฃุดุฌุงุฑ ุงููุฎุชุงุฑุฉ
- ุฑุนุงูุฉ ูุตูุงูุฉ ูุงููุฉ
- ุงุณุชูุงู ุงููุญุตูู ุงูุณููู
- ูุชุงุจุนุฉ ุนุจุฑ ุงูุชุทุจูู
```

#### ูู) ูุนูููุงุช ุฅุถุงููุฉ
```
- base_duration_info: ูุนูููุงุช ุนู ุงููุฏุฉ ุงูุฃุณุงุณูุฉ
- free_years_info: ููู ุชุนูู ุงูุณููุงุช ุงููุฌุงููุฉ
- management_info: ููููุฉ ุงูุฅุฏุงุฑุฉ ูู ุงูููุตุฉ
```

---

### 3. ุฅุนุฏุงุฏุงุช ุงูุนุฑุถ โ

```typescript
{
  is_active: boolean        // ุญุงูุฉ ุงูุจุงูุฉ (ููุนูุฉ / ูุฎููุฉ)
  sort_order: number        // ุชุฑุชูุจ ุงูุธููุฑ ุฏุงุฎู ุงูุณูุงูุฏุฑ
}
```

---

## ูููุฏ ูููุฉ - ุงูุจุงูุฉ ุงูุฒุฑุงุนูุฉ

```
โ ูุง ุนูุงุฆุฏ ูุงููุฉ
โ ูุง ูุฎููุงุช ุงุณุชุซูุงุฑูุฉ
โ ูุง ุนููุฏ ุจูุน ุฃู ุชุฌุงุฑุฉ
โ ูุง ูุนูุฏ ูุงููุฉ
โ ุงูุชูุงุน ุดุฎุตู ููุท (ููุฒูู)
```

---

## ุงูุจููุฉ ุงูุชูููุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู agricultural_packages

```sql
CREATE TABLE agricultural_packages (
  id uuid PRIMARY KEY,
  contract_id uuid REFERENCES farm_contracts(id),

  -- ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ
  package_name text NOT NULL,
  price_per_tree integer NOT NULL,
  base_duration_years integer NOT NULL DEFAULT 1,
  bonus_free_years integer NOT NULL DEFAULT 0,
  motivational_text text,

  -- ุงููุถููู
  description text NOT NULL,
  what_is_included jsonb DEFAULT '[]'::jsonb,
  features jsonb DEFAULT '[]'::jsonb,
  conditions jsonb DEFAULT '[]'::jsonb,

  -- ูุนูููุงุช ุฅุถุงููุฉ
  base_duration_info text,
  free_years_info text,
  management_info text,

  -- ุฅุนุฏุงุฏุงุช ุงูุนุฑุถ
  is_active boolean DEFAULT true,
  sort_order integer DEFAULT 0,

  created_at timestamptz DEFAULT now(),
  updated_at timestamptz DEFAULT now()
);
```

#### RLS Policies

```sql
โ ุนุฑุถ ุนุงู ููุจุงูุงุช ุงูููุนูุฉ ููุท
โ ุงููุฏูุฑูู ููุท ูููููู ุงูุฅุถุงูุฉ/ุงูุชุนุฏูู/ุงูุญุฐู
```

---

### 2. Service Layer

#### ููู: `agriculturalPackagesService.ts`

```typescript
// ุฏูุงู CRUD ูุงููุฉ
โ getAllPackages()          // ุฌูุจ ูู ุงูุจุงูุงุช (ููุฅุฏุงุฑุฉ)
โ getActivePackages()       // ุฌูุจ ุงูุจุงูุงุช ุงูููุนูุฉ (ูููุณุชุฎุฏููู)
โ getPackageById()          // ุฌูุจ ุจุงูุฉ ูุนููุฉ
โ getPackageByContractId()  // ุฌูุจ ุจุงูุฉ ุญุณุจ ุงูุนูุฏ
โ createPackage()           // ุฅุถุงูุฉ ุจุงูุฉ ุฌุฏูุฏุฉ
โ updatePackage()           // ุชุนุฏูู ุจุงูุฉ
โ deletePackage()           // ุญุฐู ุจุงูุฉ
โ togglePackageStatus()     // ุชูุนูู/ุฅุฎูุงุก ุจุงูุฉ
```

---

### 3. ููุญุฉ ุงูุชุญูู - ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ

#### ููู: `AgriculturalPackagesManager.tsx`

#### ุงูููุฒุงุช

```
โ ุนุฑุถ ุฌููุน ุงูุจุงูุงุช (cards ูููุฒุฉ)
โ ุฅุถุงูุฉ ุจุงูุฉ ุฌุฏูุฏุฉ (ูููุฐุฌ ูุงูู)
โ ุชุนุฏูู ุจุงูุฉ ููุฌูุฏุฉ
โ ุญุฐู ุจุงูุฉ (ูุน ุชุฃููุฏ)
โ ุชูุนูู/ุฅุฎูุงุก ุจุงูุฉ ุจุฒุฑ ูุงุญุฏ
โ ุนุฑุถ ูุนูููุงุช ุงูุจุงูุฉ (ูุฏุฉุ ุณุนุฑุ ูููุฒุงุช...)
โ ุฑุณุงุฆู ุฎุทุฃ ููุฌุงุญ
โ ุชุตููู responsive (ููุจุงูู + ุฏูุณูุชูุจ)
```

#### ูููุฐุฌ ุงูุฅุถุงูุฉ/ุงูุชุนุฏูู

ูุญุชูู ุนูู **3 ุฃูุณุงู ุฑุฆูุณูุฉ**:

##### 1. ุงููุนูููุงุช ุงูุฃุณุงุณูุฉ (ุฎูููุฉ ุฎุถุฑุงุก)
```
- ุงุณู ุงูุจุงูุฉ
- ุณุนุฑ ุงูุดุฌุฑุฉ ุงููุงุญุฏุฉ
- ูุฏุฉ ุงูุงูุชูุงุน ุงูุฃุณุงุณูุฉ
- ุณููุงุช ุฅุถุงููุฉ ูุฌุงููุฉ
- Contract ID
- ุงููุต ุงูุชุญููุฒู
```

##### 2. ูุถููู ุงูุจุงูุฉ ุงูุฒุฑุงุนูุฉ (ุฎูููุฉ ุฒุฑูุงุก)
```
- ุชุนุฑูู ุงูุจุงูุฉ (textarea)
- ูููุฒุงุช ุงูุจุงูุฉ (textarea - ุณุทุฑ ููู ููุฒุฉ)
- ุดุฑูุท ุงูุจุงูุฉ (textarea - ุณุทุฑ ููู ุดุฑุท)
- ูุงุฐุง ูุดูู ุงูุณุนุฑ (textarea)
- ูุนูููุงุช ุงููุฏุฉ ุงูุฃุณุงุณูุฉ
- ูุนูููุงุช ุงูุณููุงุช ุงููุฌุงููุฉ
- ูุนูููุงุช ุงูุฅุฏุงุฑุฉ
```

##### 3. ุฅุนุฏุงุฏุงุช ุงูุนุฑุถ (ุฎูููุฉ ุฑูุงุฏูุฉ)
```
- ุชุฑุชูุจ ุงูุธููุฑ (number)
- ุญุงูุฉ ุงูุจุงูุฉ (radio: ููุนูุฉ / ูุฎููุฉ)
```

##### 4. ูููุฏ ูููุฉ (ุฎูููุฉ ุญูุฑุงุก)
```
ุชูุจูู ูุงุถุญ ุจุงููููุฏ:
โ ูุง ุนูุงุฆุฏ ูุงููุฉ
โ ูุง ูุฎููุงุช
โ ูุง ุนููุฏ ุชุฌุงุฑูุฉ
โ ูุง ูุนูุฏ ูุงููุฉ
โ ุงูุชูุงุน ุดุฎุตู ููุท
```

---

### 4. ุฏูุฌ ูุน ุงููุณู ุงูุฒุฑุงุนู

#### ููู: `AgriculturalSection.tsx`

```typescript
// ุงูุชุจููุจุงุช
- ุฅุฏุงุฑุฉ ุงูุจุงูุงุช โ ุชู ุชูุนูููุง โ
- ูุชุงุจุนุฉ ุฃุดุฌุงุฑู โ ููุฏ ุงูุชุทููุฑ
- ุงูุญุตุงุฏ โ ููุฏ ุงูุชุทููุฑ
- ุงููุณุชุฎุฏููู โ ููุฏ ุงูุชุทููุฑ
- ุงูุฌุฏููุฉ โ ููุฏ ุงูุชุทููุฑ
```

**ุงููุตูู**: ูู ููุญุฉ ุงูุชุญูู โ ุฒุฑุงุนู โ ุฅุฏุงุฑุฉ ุงูุจุงูุงุช

---

## ูุงุฌูุฉ ุงููุณุชุฎุฏู - ุจุทุงูุงุช ุงูุจุงูุงุช

### ูู ุตูุญุฉ ุงููุงุฆูุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุนูุฏ ุณูุฉ                    [ููุนูุฉ] โ
โ  197 ุฑูุงู                           โ
โ  ููุดุฌุฑุฉ ุงููุงุญุฏุฉ                     โ
โ                                     โ
โ  ุงููุฏุฉ ุงูุฃุณุงุณูุฉ  โ  ุณููุงุช ูุฌุงููุฉ  โ
โ      1 ุณูุฉ       โ    +3 ุณููุงุช     โ
โ                                     โ
โ  ุฅุถุงูุฉ 3 ุณููุงุช ูุฌุงูุงู              โ
โ                                     โ
โ  ุจุงูุฉ ูุญุตููู ุงูุฒุฑุงุนู ููุฏุฉ ุณูุฉ...   โ
โ                                     โ
โ  ุงููููุฒุงุช: 5  โ ุงูุดุฑูุท: 4  โ ุชุฑุชูุจ: 1โ
โ                                     โ
โ  [ุชุนุฏูู]  [ุฅุฎูุงุก]  [๐๏ธ]            โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ุงูุงุฎุชุจุงุฑ ูุงูุชุฌุฑุจุฉ

### ุงููุตูู ูููุธุงู

1. **ุชุณุฌูู ุงูุฏุฎูู ููุฏูุฑ**
   ```
   Email: admin@dev.com
   Password: Admin@2026
   ```

2. **ุงูุฐูุงุจ ูููุณู ุงูุฒุฑุงุนู**
   ```
   ููุญุฉ ุงูุชุญูู โ ุฒุฑุงุนู โ ุฅุฏุงุฑุฉ ุงูุจุงูุงุช
   ```

3. **ุงูุชุฌุฑุจุฉ**
   ```
   โ ุนุฑุถ ุงูุจุงูุงุช ุงูููุฌูุฏุฉ
   โ ุฅุถุงูุฉ ุจุงูุฉ ุฌุฏูุฏุฉ
   โ ุชุนุฏูู ุจุงูุฉ
   โ ุชูุนูู/ุฅุฎูุงุก ุจุงูุฉ
   โ ุญุฐู ุจุงูุฉ
   ```

---

## ุงูุจุงูุงุช ุงููุซุจุชุฉ ูุณุจูุงู

### ุจุงูุฉ 1: ุนูุฏ ุณูุฉ

```yaml
ุงูุงุณู: ุนูุฏ ุณูุฉ
ุงูุณุนุฑ: 197 ุฑูุงู/ุดุฌุฑุฉ
ุงููุฏุฉ ุงูุฃุณุงุณูุฉ: 1 ุณูุฉ
ุณููุงุช ูุฌุงููุฉ: +3 ุณููุงุช
ุงููุต ุงูุชุญููุฒู: "ุฅุถุงูุฉ 3 ุณููุงุช ูุฌุงูุงู"
ุงูุญุงูุฉ: ููุนูุฉ
ุงูุชุฑุชูุจ: 1
```

### ุจุงูุฉ 2: ุนูุฏ 4 ุณููุงุช

```yaml
ุงูุงุณู: ุนูุฏ 4 ุณููุงุช
ุงูุณุนุฑ: 750 ุฑูุงู/ุดุฌุฑุฉ
ุงููุฏุฉ ุงูุฃุณุงุณูุฉ: 4 ุณููุงุช
ุณููุงุช ูุฌุงููุฉ: 0
ุงููุต ุงูุชุญููุฒู: "ุฎุทุฉ ุทูููุฉ ุงูุฃูุฏ ูุน ูุฒุงูุง ุฅุถุงููุฉ"
ุงูุญุงูุฉ: ููุนูุฉ
ุงูุชุฑุชูุจ: 2
```

---

## ุงูููุฒุงุช ุงูุฅุถุงููุฉ

### 1. ุงูุชุญูู ูู ุงูุจูุงูุงุช

```typescript
โ ุญููู ุฅูุฒุงููุฉ (required)
โ ุฃุฑูุงู ููุฌุจุฉ ููุณุนุฑ ูุงููุฏุฉ
โ ุชูุณูู ุงููุตูุต ุจุณุทุฑ ุฌุฏูุฏ
โ ุญูุธ ุงูููุงุฆู ูู arrays
```

### 2. ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู

```
โ ูููุฐุฌ ุณูู ุงูุงุณุชุฎุฏุงู
โ ุชุตููู ูุงุถุญ ุจุงูุฃููุงู
โ ุชูุจููุงุช ุงููููุฏ ูุงุถุญุฉ
โ ุฒุฑ ุฅูุบุงุก ููุนูุฏุฉ
โ ุฑุณุงุฆู ูุฌุงุญ/ูุดู
```

### 3. ุงูุฃูุงู

```
โ RLS policies ูุญููุฉ
โ ุงููุฏูุฑูู ููุท ูููููู ุงูุชุนุฏูู
โ ุงูุนุงูุฉ ุชุดุงูุฏ ุงูุจุงูุงุช ุงูููุนูุฉ ููุท
โ ุญูุงูุฉ ูู ุงูุญุฐู ุงูุนุฑุถู (confirmation)
```

---

## ุงูุชุทุจููุงุช ุงููุณุชูุจููุฉ

### ุฑุจุท ูุน ุตูุญุฉ ุงููุฒุฑุนุฉ ุงูุฒุฑุงุนูุฉ

```typescript
// ูู AgriculturalFarmPage.tsx
const packages = await agriculturalPackagesService.getActivePackages();

// ุนุฑุถ ุงูุจุงูุงุช ูู slider
packages.map(pkg => (
  <PackageCard
    name={pkg.package_name}
    price={pkg.price_per_tree}
    duration={pkg.base_duration_years}
    bonusYears={pkg.bonus_free_years}
    ...
  />
))
```

---

## ุงูุจูุงูุงุช ุงููุซุจุชุฉ

```sql
-- ุชุญุฏูุซ ุชููุงุฆู ููุจุงูุงุช ุงูููุฌูุฏุฉ
UPDATE agricultural_packages
SET
  base_duration_years = 1,
  bonus_free_years = 3
WHERE package_name = 'ุนูุฏ ุณูุฉ';

UPDATE agricultural_packages
SET
  base_duration_years = 4,
  bonus_free_years = 0
WHERE package_name = 'ุนูุฏ 4 ุณููุงุช';
```

---

## ุงููููุงุช ุงููุนููุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช

```
โ supabase/migrations/20260202070136_create_agricultural_packages_system.sql
โ supabase/migrations/add_duration_fields_to_agricultural_packages.sql
```

### Services

```
โ src/services/agriculturalPackagesService.ts
```

### Components

```
โ src/components/admin/AgriculturalPackagesManager.tsx
โ src/components/admin/AgriculturalSection.tsx
```

---

## ุญุงูุฉ ุงููุฑุญูุฉ

### ูุงุชุฌ ุงููุฑุญูุฉ ุงูุฃููู โ

```
โ ูุธุงู ุฅุฏุงุฑุฉ ุจุงูุงุช ุฒุฑุงุนูุฉ ูุงูู
โ ูููุฐุฌ ุฅุถุงูุฉ/ุชุนุฏูู ูุชูุงูู
โ ุนุฑุถ ุงุญุชุฑุงูู ููุจุงูุงุช
โ ุชูุนูู/ุฅุฎูุงุก ุจุฒุฑ ูุงุญุฏ
โ ุฃูุงู ูุญูู (RLS)
โ ุจุงูุงุช ููุนูุฉ ูุฌุงูุฒุฉ
โ ุฌุงูุฒ ููุฑุจุท ูุน ุตูุญุฉ ุงููุฒุฑุนุฉ
```

---

## ุงูุฎุทูุฉ ุงูุชุงููุฉ

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุจุงูุงุช ูุญุตููู ุงูุงุณุชุซูุงุฑู

```
โณ ุชุทููุฑ ุจุงูุงุช ุงุณุชุซูุงุฑูุฉ
โณ ุนูุงุฆุฏ ูุชููุนุฉ
โณ ูุฎููุงุช ูุงููุฉ
โณ ุนููุฏ ุงุณุชุซูุงุฑูุฉ
โณ ุฑุจุท ูุน ุตูุญุฉ ุงููุฒุฑุนุฉ ุงูุงุณุชุซูุงุฑูุฉ
```

---

## ุงูุฎูุงุตุฉ

### ูุจู ุงููุฑุญูุฉ โ

```
- ูุง ููุฌุฏ ูุธุงู ุฅุฏุงุฑุฉ ุจุงูุงุช
- ุงูุจุงูุงุช ุซุงุจุชุฉ ูู ุงูููุฏ
- ูุง ูููู ุงูุชุนุฏูู ุฃู ุงูุฅุถุงูุฉ
```

### ุจุนุฏ ุงููุฑุญูุฉ โ

```
โ ูุธุงู ุฅุฏุงุฑุฉ ุจุงูุงุช ุฒุฑุงุนูุฉ ูุงูู
โ ุฅุถุงูุฉ/ุชุนุฏูู/ุญุฐู ูู ููุญุฉ ุงูุชุญูู
โ ูููุฐุฌ ุดุงูู ูุน ุฌููุน ุงูุญููู
โ ุชูุนูู/ุฅุฎูุงุก ุฏููุงูููู
โ ุชุฑุชูุจ ูุงุจู ููุชุนุฏูู
โ ุฃูุงู ูุญูู
โ ุฌุงูุฒ ููุฑุจุท ูุน ุงููุงุฌูุฉ
```

---

**ุชุงุฑูุฎ ุงูุฅููุงู:** 2026-02-02
**ุงูุญุงูุฉ:** ููุชูู โ
**Build:** ูุงุฌุญ โ
**ุงูุฎุทูุฉ ุงูุชุงููุฉ:** ุงููุฑุญูุฉ ุงูุซุงููุฉ (ุจุงูุงุช ูุญุตููู ุงูุงุณุชุซูุงุฑู)
