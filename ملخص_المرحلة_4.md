# ๐ ููุฎุต ุณุฑูุน - ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ

## โ ูุง ุชู ุฅูุฌุงุฒู

### ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### 1. ุฌุฏูู ุงูุณุฌู
```sql
CREATE TABLE influencer_rewards_log (
  -- ุงูุญุฌุฒ
  trees_added integer,

  -- ูุจู
  trees_before integer,
  rewards_before integer,

  -- ุจุนุฏ
  trees_after integer,
  rewards_after integer,
  new_rewards_earned integer,

  -- ุงูุชูุฏู
  trees_in_current_batch integer,    -- 0-19
  trees_until_next_reward integer    -- 1-20
);
```

**ุงูุบุฑุถ:**
- ุชุณุฌูู ูู ุนูููุฉ ุจุงูุชูุตูู
- ุดูุงููุฉ 100%
- ูุงุจู ููุชุฏููู

---

#### 2. ุงูุฏุงูุฉ ุงููุญุฏุซุฉ

**ุงูุฅุถุงูุงุช:**
- ูุฑุงุกุฉ ุงูุญุงูุฉ ูุจู ุงูุชุญุฏูุซ
- ุญุณุงุจ ุงูุชูุฏู (X/20)
- ุงูุชุณุฌูู ูู ุงูุณุฌู
- ุฅุฑุฌุงุน ุชูุงุตูู ุดุงููุฉ

**ุงููุฎุฑุฌุงุช ุงูุฌุฏูุฏุฉ:**
```json
{
  "trees_before": 85,
  "trees_after": 115,
  "rewards_before": 4,
  "rewards_after": 5,
  "new_rewards_earned": 1,
  "trees_in_current_batch": 15,
  "trees_until_next_reward": 5,
  "progress_percentage": 75.0
}
```

---

#### 3. View ุงูุชูุงุตูู

```sql
CREATE VIEW influencer_rewards_details AS
SELECT
  -- ุงูุฅุญุตุงุฆูุงุช
  total_trees_booked,
  total_rewards_earned,

  -- ุงูุชูุฏู ุงููุญุณูุจ ุชููุงุฆูุงู
  (total_trees_booked % 20) AS trees_in_current_batch,
  (20 - (total_trees_booked % 20)) AS trees_until_next_reward,
  ROUND(((total_trees_booked % 20) / 20.0) * 100, 1) AS progress_percentage
FROM influencer_partners;
```

---

### ๐ป Frontend

#### ุนููุฏ ุงูุชูุฏู ูู ููุญุฉ ุงูุชุญูู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงูุชูุฏู                     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโค
โ 15/20  (5 ูุชุจููุฉ)         โ
โ โโโโโโโโโโโโโโโโโโโโ 75%   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูุนุฑุถ:**
- ุงูุฃุดุฌุงุฑ ุงูุญุงููุฉ / 20
- ูู ุดุฌุฑุฉ ูุชุจููุฉ
- ุดุฑูุท ุชูุฏู ุจุตุฑู ูููู

---

## ๐ ุณูุฑ ุงูุนูู

```
ุญุฌุฒ ุฌุฏูุฏ
    โ
ูุฑุงุกุฉ ุงูุญุงูุฉ ุงูุญุงููุฉ
    โ
ุญุณุงุจ ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ
    โ
ุญุณุงุจ ุงูุชูุฏู (X/20)
    โ
ุงูุชุณุฌูู ูู ุงูุณุฌู โ
    โ
ุงูุชุญุฏูุซ ูู ุฌุฏูู ุงููุคุซุฑูู
    โ
ุฅุฑุฌุงุน ุงูุชูุงุตูู ุงููุงููุฉ
```

---

## ๐ ุฃูุซูุฉ

### ูุซุงู 1: ูุง ููุงูุฃุฉ
```
ูุจู: 10 ุฃุดุฌุงุฑ โ 0 ููุงูุขุช
ุญุฌุฒ: 5 ุฃุดุฌุงุฑ
ุจุนุฏ: 15 ุดุฌุฑุฉ โ 0 ููุงูุขุช

ุงูุชูุฏู: 15/20 (75%)
ุงูุจุงูู: 5 ุฃุดุฌุงุฑ
```

### ูุซุงู 2: ููุงูุฃุฉ ูุงุญุฏุฉ
```
ูุจู: 15 ุดุฌุฑุฉ โ 0 ููุงูุขุช
ุญุฌุฒ: 10 ุฃุดุฌุงุฑ
ุจุนุฏ: 25 ุดุฌุฑุฉ โ 1 ููุงูุฃุฉ โ

ุงูุชูุฏู: 5/20 (25%)
ุงูุจุงูู: 15 ุดุฌุฑุฉ
```

### ูุซุงู 3: ุนุฏุฉ ููุงูุขุช
```
ูุจู: 85 ุดุฌุฑุฉ โ 4 ููุงูุขุช
ุญุฌุฒ: 50 ุดุฌุฑุฉ
ุจุนุฏ: 135 ุดุฌุฑุฉ โ 6 ููุงูุขุช โโ

ุงูุชูุฏู: 15/20 (75%)
ุงูุจุงูู: 5 ุฃุดุฌุงุฑ
```

---

## ๐ ุงูุชุญูู

### 1. ุงุณุชุนุฑุงุถ ุงูุณุฌู

```sql
SELECT
  created_at,
  trees_added,
  trees_before,
  trees_after,
  new_rewards_earned,
  trees_in_current_batch,
  trees_until_next_reward,
  notes
FROM influencer_rewards_log
ORDER BY created_at DESC
LIMIT 10;
```

### 2. ุงุณุชุฎุฏุงู View

```sql
SELECT * FROM influencer_rewards_details
WHERE referral_code = 'ุงุญูุฏ_ุงููุฒุงุฑุน';
```

### 3. ููุญุฉ ุงูุชุญูู

ุงูุชุญ: **ุงูุชุณููู โ ุดุฑูุงุก ุงููุณูุฑุฉ**

ุณุชุดุงูุฏ ุนููุฏ "ุงูุชูุฏู" ูุน ุดุฑูุท ุจุตุฑู.

---

## ๐ ุงูููุงุนุฏ

### โ ูุง ุชุฏุฎู ูุฏูู
- ููุท ูู ุฎูุงู ุงูุฏุงูุฉ
- RLS ูููุน ุงูุชุนุฏูู ุงููุจุงุดุฑ

### โ ูุง ุงุณุชุซูุงุกุงุช
- ูุงุนุฏุฉ ูุงุญุฏุฉ: ูู 20 = 1
- ููุฌููุน ุจุฏูู ุชูููุฒ

### โ ุงูุชุฌููุน ุงูุชููุงุฆู
```
12/20 โ ููุฑุญูู
20/20 โ ููุงูุฃุฉ!
25/20 โ ููุงูุฃุฉ + 5 ููุฑุญููุฉ
```

---

## ๐ฏ ุงูููุงุฆุฏ

| ุงูููุฒุฉ | ุงููุตู |
|--------|-------|
| **ุงูุดูุงููุฉ** | ูู ุนูููุฉ ููุซูุฉ ุจุงูุชูุตูู |
| **ุงูุนุฏุงูุฉ** | ูุงุนุฏุฉ ูุงุญุฏุฉ ููุฌููุน |
| **ุงูุจุณุงุทุฉ** | ูุง ุชุนููุฏุ ูุง ุงุณุชุซูุงุกุงุช |
| **ุงูุชููุงุฆูุฉ** | ูุง ุชุฏุฎู ูุฏูู ูุทููุงู |
| **ุงูุชุฌููุน** | ุฏุนู ุชููุงุฆู ููุชุฑุญูู |
| **ุงูุนุฑุถ** | ุชุตูุฑ ุจุตุฑู ูุงุถุญ |

---

## ๐ ุงููููุงุช

### Database:
- `create_influencer_rewards_log.sql`
- `update_reward_function_with_logging.sql`
- `create_influencer_rewards_details_view.sql`

### Frontend:
- `InfluencerPartnersManager.tsx` (ุนููุฏ ุงูุชูุฏู)

---

## โ ุงูุฎูุงุตุฉ

| ุงููุธููุฉ | ุงูุญุงูุฉ |
|---------|--------|
| ุณุฌู ุชูุตููู | โ |
| ุญุณุงุจ ุงูุชูุฏู | โ |
| ุนุฑุถ ุจุตุฑู | โ |
| ุดูุงููุฉ 100% | โ |
| ูุง ุชุฏุฎู ูุฏูู | โ |
| **ุฌุงูุฒ ููุฅูุชุงุฌ** | **โ** |

---

## ๐ ุงููุฑุงุญู ุงูุฃุฑุจุน

| # | ุงููุฑุญูุฉ | ุงูุญุงูุฉ |
|---|---------|--------|
| 1 | ุฅุฏุงุฑุฉ ุงููุคุซุฑูู | โ |
| 2 | ุชุฌุฑุจุฉ UX | โ |
| 3 | ุฑุจุท ุงูุญุฌุฒ | โ |
| 4 | ุงูุณุฌู ูุงูุชูุฏู | โ |
| **ุงููุธุงู ุงููุงูู** | **ุฌุงูุฒ** | **โ** |

---

**ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ ููุชููุฉ ุจูุฌุงุญ!**

ุงูุชุงุฑูุฎ: 5 ูุจุฑุงูุฑ 2026
