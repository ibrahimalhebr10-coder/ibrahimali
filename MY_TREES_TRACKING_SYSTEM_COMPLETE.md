# ูุธุงู ูุชุงุจุนุฉ ุฃุดุฌุงุฑู - ุงูุชูุงู ุงููุฑุญูุฉ ุงูุฃููู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุจูุงุก ูุธุงู ุดุงูู ููุชุงุจุนุฉ ุงูุฃุดุฌุงุฑ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉุ ูุชุถูู ูุณุงุฑูู ุฑุฆูุณููู:
1. **ูุชุงุจุนุฉ ุงูุนูููุงุช ุงูุฒุฑุงุนูุฉ** - ุชุณุฌูู ููุชุงุจุนุฉ ุงูุนูููุงุช ุนูู ุงูุฃุดุฌุงุฑ
2. **ุงุฎุชูุงุฑุงุช ุงููุญุตูู** - ุฅุฏุงุฑุฉ ุทูุจุงุช ุงููุฒุงุฑุนูู ูููุญุตูู

---

## ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูููุดุฃุฉ

#### 1. `tree_operations` - ุงูุนูููุงุช ุงูุฒุฑุงุนูุฉ
```sql
- id (uuid, primary key)
- farm_id (uuid) - ุงููุฒุฑุนุฉ
- investor_id (uuid) - ุงููุฒุงุฑุน/ุงููุณุชุซูุฑ
- reservation_id (uuid) - ุงูุญุฌุฒ ุงููุฑุชุจุท
- operation_type (text) - ููุน ุงูุนูููุฉ: irrigation, maintenance, pruning, harvest
- operation_date (date) - ุชุงุฑูุฎ ุงูุนูููุฉ
- trees_count (integer) - ุนุฏุฏ ุงูุฃุดุฌุงุฑ
- total_cost (decimal) - ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
- cost_per_tree (decimal) - ูุญุณูุจุฉ ุชููุงุฆูุงู
- notes (text) - ููุงุญุธุงุช
- status_report (text) - ุชูุฑูุฑ ุงูุญุงูุฉ
- created_by (uuid) - ุงููุณุคูู ุงูุฐู ุฃุถุงููุง
- created_at, updated_at
```

**ุฃููุงุน ุงูุนูููุงุช:**
- **Irrigation** (ุฑู) - ุงูููู ุงูุฃุฒุฑู
- **Maintenance** (ุตูุงูุฉ) - ุงูููู ุงูููุฑูุงูู
- **Pruning** (ุชูููู) - ุงูููู ุงูุฃุฎุถุฑ
- **Harvest** (ุญุตุงุฏ) - ุงูููู ุงูุฃุญูุฑ

#### 2. `tree_operation_media` - ูุณุงุฆุท ุงูุนูููุงุช
```sql
- id (uuid, primary key)
- operation_id (uuid) - ุงูุนูููุฉ ุงููุฑุชุจุทุฉ
- media_type (text) - photo ุฃู video
- media_url (text) - ุฑุงุจุท ุงูุตูุฑุฉ/ุงูููุฏูู
- caption (text) - ูุตู
- created_at
```

#### 3. `harvest_preferences` - ุงุฎุชูุงุฑุงุช ุงููุญุตูู
```sql
- id (uuid, primary key)
- investor_id (uuid) - ุงููุฒุงุฑุน
- farm_id (uuid) - ุงููุฒุฑุนุฉ
- reservation_id (uuid) - ุงูุญุฌุฒ ุงููุฑุชุจุท
- preference_type (text) - personal_use, gift, charity
- trees_count (integer) - ุนุฏุฏ ุงูุฃุดุฌุงุฑ
- recipient_name (text) - ุงุณู ุงููุณุชูู (ููุฅูุฏุงุก)
- recipient_phone (text) - ูุงุชู ุงููุณุชูู
- recipient_address (text) - ุงูุนููุงู
- charity_name (text) - ุงุณู ุงูุฌูุนูุฉ (ููุตุฏูุฉ)
- special_instructions (text) - ุชุนูููุงุช ุฎุงุตุฉ
- status (text) - pending, in_progress, completed, cancelled
- processing_notes (text) - ููุงุญุธุงุช ุงููุนุงูุฌุฉ
- created_at, updated_at
```

**ุฃููุงุน ุงูุชูุถููุงุช:**
- **Personal Use** (ุงุณุชูุงุฏุฉ ุดุฎุตูุฉ) - ุงูููู ุงูุฃุฒุฑู
- **Gift** (ุฅูุฏุงุก) - ุงูููู ุงููุฑุฏู
- **Charity** (ุตุฏูุฉ) - ุงูููู ุงูุฃุฎุถุฑ

**ุญุงูุงุช ุงููุนุงูุฌุฉ:**
- **Pending** (ููุฏ ุงูุงูุชุธุงุฑ) - ุฃุตูุฑ
- **In Progress** (ููุฏ ุงููุนุงูุฌุฉ) - ุฃุฒุฑู
- **Completed** (ููุชูู) - ุฃุฎุถุฑ
- **Cancelled** (ููุบู) - ุฃุญูุฑ

### ุงูุชุฎุฒูู (Storage)
- **Bucket:** `tree-operation-media`
- **Public Access:** ูุนู
- ูุฏุนู ุงูุตูุฑ ูุงูููุฏูููุงุช
- ุฑูุน ูุชุนุฏุฏ ูููููุงุช

### ุงูุฃูุงู (RLS Policies)

**ููุฅุฏุงุฑููู:**
- ูุฑุงุกุฉุ ูุชุงุจุฉุ ุชุญุฏูุซุ ุญุฐู ุฌููุน ุงูุนูููุงุช ูุงูุชูุถููุงุช

**ูููุณุชุซูุฑูู:**
- ูุฑุงุกุฉ ุงูุนูููุงุช ุงูุฎุงุตุฉ ุจูู ููุท
- ูุฑุงุกุฉ ูุฅูุดุงุก ูุชุนุฏูู ุชูุถููุงุชูู (ุงูุญุงูุฉ pending ููุท)

---

## ๐ง ุงูุฎุฏูุงุช (Services)

### 1. `treeOperationsService.ts`

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:**
```typescript
- createOperation(input) - ุฅูุดุงุก ุนูููุฉ ุฌุฏูุฏุฉ
- getOperationsByFarm(farmId) - ุฌูุจ ุนูููุงุช ูุฒุฑุนุฉ
- getOperationsByInvestor(investorId) - ุฌูุจ ุนูููุงุช ูุณุชุซูุฑ
- getOperationById(operationId) - ุฌูุจ ุนูููุฉ ูุงุญุฏุฉ
- updateOperation(operationId, updates) - ุชุญุฏูุซ ุนูููุฉ
- deleteOperation(operationId) - ุญุฐู ุนูููุฉ
- addMedia(input) - ุฅุถุงูุฉ ูุณุงุฆุท
- deleteMedia(mediaId) - ุญุฐู ูุณุงุฆุท
- uploadMediaFile(file, operationId) - ุฑูุน ููู
- getInvestorReservations(investorId) - ุฌูุจ ุญุฌูุฒุงุช ุงููุณุชุซูุฑ
```

### 2. `harvestPreferencesService.ts`

**ุงููุธุงุฆู ุงูุฑุฆูุณูุฉ:**
```typescript
- createPreference(input) - ุฅูุดุงุก ุชูุถูู ุฌุฏูุฏ
- getPreferencesByInvestor(investorId) - ุฌูุจ ุชูุถููุงุช ูุณุชุซูุฑ
- getPreferencesByFarm(farmId) - ุฌูุจ ุชูุถููุงุช ูุฒุฑุนุฉ
- getAllPreferences() - ุฌูุจ ุฌููุน ุงูุชูุถููุงุช
- getPreferencesByStatus(status) - ุฌูุจ ุญุณุจ ุงูุญุงูุฉ
- updatePreference(preferenceId, updates) - ุชุญุฏูุซ ุชูุถูู
- updatePreferenceStatus(preferenceId, status, notes) - ุชุญุฏูุซ ุงูุญุงูุฉ
- deletePreference(preferenceId) - ุญุฐู ุชูุถูู
```

---

## ๐จ ูุงุฌูุงุช ุงูุฅุฏุงุฑุฉ

### 1. `TreeOperationsManager.tsx` - ุฅุฏุงุฑุฉ ุงูุนูููุงุช ุงูุฒุฑุงุนูุฉ

**ุงููููุฒุงุช:**
- โ ุนุฑุถ ุฌููุน ุงูุนูููุงุช ูู ุจุทุงูุงุช ุฌุฐุงุจุฉ
- โ ููุชุฑุฉ ุญุณุจ ููุน ุงูุนูููุฉ (ุฑูุ ุตูุงูุฉุ ุชููููุ ุญุตุงุฏ)
- โ ุจุญุซ ุจุงูุงุณู ุฃู ุงููุฒุฑุนุฉ
- โ ูููุฐุฌ ุฅุถุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ ุดุงูู
- โ ุงุฎุชูุงุฑ ุงููุฒุฑุนุฉ ูุงููุฒุงุฑุน ูู ูุงุฆูุฉ ููุณุฏูุฉ
- โ ุฑูุน ุตูุฑ ูููุฏูููุงุช ูุชุนุฏุฏุฉ
- โ ุนุฑุถ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ ูุงูุชูููุฉ ููู ุดุฌุฑุฉ
- โ ุนุฑุถ ุงูููุงุญุธุงุช ูุชูุฑูุฑ ุงูุญุงูุฉ
- โ ุนุฑุถ ุงููุณุงุฆุท ุงููุฑููุฉ

**ุชุตููู ุงูุจุทุงูุฉ:**
- ุฃููููุฉ ููููุฉ ุญุณุจ ููุน ุงูุนูููุฉ
- ูุนูููุงุช ุงููุฒุงุฑุน ูุงููุฒุฑุนุฉ
- ุนุฏุฏ ุงูุฃุดุฌุงุฑ ูุงูุชูููุฉ
- ููุงุญุธุงุช ูู ุฎูููุฉ ุฑูุงุฏูุฉ
- ุชูุฑูุฑ ุงูุญุงูุฉ ูู ุฎูููุฉ ุฒุฑูุงุก
- ูุนุฑุถ ุตูุฑ ุตุบูุฑ ูููุณุงุฆุท

### 2. `HarvestPreferencesManager.tsx` - ุฅุฏุงุฑุฉ ุงุฎุชูุงุฑุงุช ุงููุญุตูู

**ุงููููุฒุงุช:**
- โ ุนุฑุถ ุฌููุน ุงูุงุฎุชูุงุฑุงุช ูู ุจุทุงูุงุช
- โ ููุชุฑุฉ ุญุณุจ ุงูููุน (ุงุณุชูุงุฏุฉ ุดุฎุตูุฉุ ุฅูุฏุงุกุ ุตุฏูุฉ)
- โ ููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ (ููุฏ ุงูุงูุชุธุงุฑุ ููุฏ ุงููุนุงูุฌุฉุ ููุชููุ ููุบู)
- โ ุจุญุซ ุจุงููุฒุงุฑุนุ ุงููุฒุฑุนุฉุ ุฃู ุงููุณุชูู
- โ ุชุญุฏูุซ ุญุงูุฉ ุงูุทูุจ ุจููุฑุฉ ูุงุญุฏุฉ
- โ ุฅุถุงูุฉ ููุงุญุธุงุช ูุนุงูุฌุฉ
- โ ุนุฑุถ ุชูุงุตูู ุงููุณุชูู (ููุฅูุฏุงุก)
- โ ุนุฑุถ ุชูุงุตูู ุงูุฌูุนูุฉ (ููุตุฏูุฉ)

**ุชุตููู ุงูุจุทุงูุฉ:**
- ุฃููููุฉ ููููุฉ ุญุณุจ ุงูููุน
- ุดุงุฑุฉ ุงูุญุงูุฉ ูุน ุฃููููุฉ
- ูุนูููุงุช ุงููุฒุงุฑุน ูุงููุฒุฑุนุฉ ูุนุฏุฏ ุงูุฃุดุฌุงุฑ
- ุฎูููุฉ ููููุฉ ูุชูุงุตูู ุงูุฅูุฏุงุก/ุงูุตุฏูุฉ
- ููุงุญุธุงุช ุงููุนุงูุฌุฉ

### 3. `MyTreesSection.tsx` - ุงููุณู ุงูุฑุฆูุณู

**ุงููููุฒุงุช:**
- โ ุชุจููุจุงุช ุจูู ุงูุนูููุงุช ูุงูุชูุถููุงุช
- โ ุชุตููู ููุญุฏ ูุฌุฐุงุจ
- โ ุฑุฃุณูุฉ ุฐูุจูุฉ ูููุฒุฉ
- โ ุชููู ุณูุณ ุจูู ุงูุชุจููุจุงุช

---

## ๐ฏ ุงูุชูุงูู ูุน ููุญุฉ ุงูุชุญูู

### ุฅุถุงูุฉ ุงููุณู ุฅูู `AdminDashboard.tsx`

```typescript
// ุชู ุฅุถุงูุฉ:
import MyTreesSection from './MyTreesSection';

// ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
{
  id: 'mytrees',
  label: 'ูุชุงุจุนุฉ ุฃุดุฌุงุฑู',
  icon: TreePine,
  color: 'emerald'
}

// ุงูุนุฑุถ
case 'mytrees':
  return <MyTreesSection />;
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ:

#### A. ุฅุถุงูุฉ ุนูููุฉ ุฒุฑุงุนูุฉ
1. ุงูุชูู ุฅูู "ูุชุงุจุนุฉ ุฃุดุฌุงุฑู" โ "ูุชุงุจุนุฉ ุงูุนูููุงุช ุงูุฒุฑุงุนูุฉ"
2. ุงููุฑ "ุฅุถุงูุฉ ุนูููุฉ ุฌุฏูุฏุฉ"
3. ุงููุฃ ุงูุจูุงูุงุช:
   - ุงุฎุชุฑ ุงููุฒุฑุนุฉ
   - ุงุฎุชุฑ ุงููุฒุงุฑุน
   - ููุน ุงูุนูููุฉ (ุฑูุ ุตูุงูุฉุ ุชููููุ ุญุตุงุฏ)
   - ุชุงุฑูุฎ ุงูุนูููุฉ
   - ุนุฏุฏ ุงูุฃุดุฌุงุฑ
   - ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
   - ููุงุญุธุงุช
   - ุชูุฑูุฑ ุงูุญุงูุฉ
   - ุงุฑูุน ุตูุฑ/ููุฏูููุงุช
4. ุงุญูุธ

**ุงููุชูุฌุฉ:**
- ูุชู ุญุณุงุจ ุงูุชูููุฉ ููู ุดุฌุฑุฉ ุชููุงุฆูุงู
- ูุชู ุชุฎุฒูู ุงููููุงุช ูู Storage
- ูููู ูููุฒุงุฑุน ุฑุคูุฉ ุงูุนูููุฉ ูู ุญุณุงุจู

#### B. ูุนุงูุฌุฉ ุงุฎุชูุงุฑ ูุญุตูู
1. ุงูุชูู ุฅูู "ูุชุงุจุนุฉ ุฃุดุฌุงุฑู" โ "ุงุฎุชูุงุฑุงุช ุงููุญุตูู"
2. ููุชุฑ ุญุณุจ ุงูููุน ุฃู ุงูุญุงูุฉ
3. ุงููุฑ ุนูู ุฃููููุฉ ุงูุนูู ููุชุญ ุงูุชูุงุตูู
4. ุงุฎุชุฑ ุงูุญุงูุฉ ุงูุฌุฏูุฏุฉ:
   - ููุฏ ุงููุนุงูุฌุฉ: ุจุฏุฃุช ุงููุนุงูุฌุฉ
   - ููุชูู: ุชู ุงูุชูููุฐ
   - ููุบู: ุชู ุงูุฅูุบุงุก
5. ุฃุถู ููุงุญุธุงุช ูุนุงูุฌุฉ
6. ุงุญูุธ

**ุงููุชูุฌุฉ:**
- ูุชู ุชุญุฏูุซ ุงูุญุงูุฉ ููุฑุงู
- ูููู ูููุฒุงุฑุน ุฑุคูุฉ ุงูุชุญุฏูุซ

---

## ๐ ุงูุฃูุงู

### ุงูููุงุนุฏ ุงููุทุจูุฉ:

1. **ุงูุฅุฏุงุฑููู:**
   - ูุตูู ูุงูู ูุฌููุน ุงูุนูููุงุช ูุงูุชูุถููุงุช
   - ูููููู ุงูุฅุถุงูุฉ ูุงูุชุนุฏูู ูุงูุญุฐู

2. **ุงููุณุชุซูุฑูู:**
   - ูุฑูู ููุท ุนูููุงุชูู ุงูุฎุงุตุฉ
   - ูููููู ุฅูุดุงุก ุชูุถููุงุช
   - ูููููู ุชุนุฏูู ุงูุชูุถููุงุช ุจุญุงูุฉ "ููุฏ ุงูุงูุชุธุงุฑ" ููุท

3. **ุงููุณุงุฆุท:**
   - ุงูุฅุฏุงุฑููู ููุท ูููููู ุงูุฑูุน ูุงูุญุฐู
   - ุงูุฌููุน ูููููู ุงููุดุงูุฏุฉ (public)

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ูููุงุช ุชู ุฅูุดุงุคูุง:
1. โ Migration: `create_my_trees_tracking_system.sql`
2. โ Service: `treeOperationsService.ts` (230+ ุฃุณุทุฑ)
3. โ Service: `harvestPreferencesService.ts` (180+ ุฃุณุทุฑ)
4. โ Component: `TreeOperationsManager.tsx` (540+ ุฃุณุทุฑ)
5. โ Component: `HarvestPreferencesManager.tsx` (420+ ุฃุณุทุฑ)
6. โ Component: `MyTreesSection.tsx` (60+ ุฃุณุทุฑ)
7. โ Updated: `AdminDashboard.tsx`

### ูุฌููุน:
- **7 ูููุงุช** ุชู ุฅูุดุงุคูุง/ุชุนุฏูููุง
- **3 ุฌุฏุงูู** ุฌุฏูุฏุฉ
- **1 bucket** ููุชุฎุฒูู
- **12 RLS policies**
- **2 triggers** ููู updated_at
- **1400+ ุฃุณุทุฑ** ููุฏ ุฌุฏูุฏ

---

## โจ ุงููููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุณูููุฉ ุงูุงุณุชุฎุฏุงู
- ูุงุฌูุงุช ูุธููุฉ ูุจุณูุทุฉ
- ุฃููุงู ูููุฒุฉ ููู ููุน
- ุจุญุซ ูููุชุฑุฉ ูููุฉ

### 2. ุงููุฑููุฉ
- ุฑูุน ูุณุงุฆุท ูุชุนุฏุฏุฉ
- ุญููู ุงุฎุชูุงุฑูุฉ ูุซูุฑุฉ
- ุชุญุฏูุซ ุงูุญุงูุฉ ุจุณูููุฉ

### 3. ุงูุดูุงููุฉ
- ุงููุฒุงุฑุน ูุฑู ูู ุงูุนูููุงุช
- ููุงุญุธุงุช ูุงุถุญุฉ
- ุชูุงุฑูุฑ ุญุงูุฉ ููุตูุฉ

### 4. ุงูุฃูุงู
- RLS ูุญูู
- ูุตู ุตูุงุญูุงุช ูุงุถุญ
- ุชุชุจุน ูู ุฃุถุงู ุงูุนูููุฉ

### 5. ุงูุชูุงูู
- ูุฑุจุท ุงููุฒุฑุนุฉ ุจุงููุฒุงุฑุน
- ูุฑุจุท ุจุงูุญุฌุฒ
- ูุญุณุจ ุงูุชูุงููู ุชููุงุฆูุงู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

### ุงููุฑุญูุฉ ุงูุซุงููุฉ - ุฌุงูุจ ุงููุณุชุซูุฑ:
1. ูุงุฌูุฉ ุงููุณุชุซูุฑ ูุฑุคูุฉ ุนูููุงุชู
2. ุฅุถุงูุฉ ุงุฎุชูุงุฑ ูุญุตูู ูู ุงููุณุชุซูุฑ
3. ุฅุดุนุงุฑุงุช ุนูุฏ ุฅุถุงูุฉ ุนูููุงุช ุฌุฏูุฏุฉ
4. ุชูููู ูุนุฑุถ ุงูุนูููุงุช
5. ุชูุงุฑูุฑ ุดูุฑูุฉ ูููุณุชุซูุฑ

### ุชุญุณููุงุช ุฅุถุงููุฉ:
- ุชุตุฏูุฑ ุชูุงุฑูุฑ Excel
- ุฑุณูู ุจูุงููุฉ ููุนูููุงุช
- ุฌุฏููุฉ ุนูููุงุช ูุณุชูุจููุฉ
- ุชูุจููุงุช ุชููุงุฆูุฉ
- ูุนุฑุถ ุตูุฑ ูุญุณูู

---

## ๐ ููุงุญุธุงุช ุชูููุฉ

### ุงูุฃุฏุงุก:
- Indexes ุนูู ุงูุญููู ุงูุฑุฆูุณูุฉ
- Lazy loading ููุตูุฑ
- Pagination ูู ุงููุณุชูุจู

### ุงูุชูุงูู:
- โ Desktop responsive
- โ Mobile friendly
- โ RTL support
- โ Dark mode ready

### ุงูุตูุงูุฉ:
- ููุฏ ูุธูู ูููุธู
- ุชุนูููุงุช ูุงุถุญุฉ
- ุฃุณูุงุก ุฏูุงู ูุตููุฉ
- ูุตู concerns

---

## ๐ ุงูุฎูุงุตุฉ

ุชู ุจูุงุก ูุธุงู ุดุงูู ููุชูุงูู ููุชุงุจุนุฉ ุงูุฃุดุฌุงุฑ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ุจูุฌุงุญ!

**ุงูุฅูุฌุงุฒุงุช:**
โ ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ
โ ุฎุฏูุงุช ูููุฉ
โ ูุงุฌูุงุช ุฌุฐุงุจุฉ
โ ุฃูุงู ูุญูู
โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ููุชุงุฒุฉ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู!** ๐ณ
