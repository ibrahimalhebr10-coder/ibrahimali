# ๐ ุชูุฑูุฑ ุชูููุฐ ููุทู ุงูุณููุงุช ุงููุฌุงููุฉ ูุงูุชุณุนูุฑ ุงูุซุงุจุช

**ุงูุชุงุฑูุฎ:** 2026-01-27
**ุงููุฑุญูุฉ:** ุชุซุจูุช ููุทู ุงูุชุณุนูุฑ ูุงูุณููุงุช ุงููุฌุงููุฉ
**ุงูุญุงูุฉ:** โ ููุชูู ุจูุฌุงุญ
**Build Status:** โ ูุฌุญ ูู 6.62 ุซุงููุฉ

---

## ๐ ุงูููุฎุต ุงูุชูููุฐู

ุชู ุชูููุฐ ุงูุชูุฌูู ุงูุชูููุฐู ุงูููุงุฆู ุจูุฌุงุญุ ูุงูุฐู ูุชุถูู:

1. โ **ููุทู ุงูุชุณุนูุฑ ุงูุซุงุจุช:** ุณุนุฑ ุงูุดุฌุฑุฉ ุซุงุจุช ูู ุงูุนูุฏ
2. โ **ุงูุณููุงุช ุงููุฌุงููุฉ:** ููุฒุฉ ุงุฎุชูุงุฑูุฉ ูุง ุชุฏุฎู ูู ุฃู ุญุณุงุจ
3. โ **ูููุฐุฌ ุงูุฅุฏุงุฑุฉ:** Toggle ููุณููุงุช ุงููุฌุงููุฉ ูุน ุชุนุทูู ุชููุงุฆู
4. โ **ุตูุญุฉ ุงููุฒุฑุนุฉ:** ูุตูุต ุชูุถูุญูุฉ ุญุณุจ ููุน ุงูุนูุฏ
5. โ **ุงูุญุณุงุจุงุช:** ุงูุชูููุฉ = ุณุนุฑ ุงูุดุฌุฑุฉ ร ุนุฏุฏ ุงูุฃุดุฌุงุฑ (ุฏุงุฆูุงู)

---

## ๐ฏ ุงููุงุนุฏุฉ ุงูุฃุณุงุณูุฉ ุงููุทุจูุฉ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุนูุฏ = ูุญุฏุฉ ุงูุชุณุนูุฑ                      โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโ                  โ
โ  โ ุณุนุฑ ุงูุดุฌุฑุฉ ุซุงุจุช ูู ุงูุนูุฏ               โ
โ  โ ุงูุณููุงุช ุงููุฌุงููุฉ ููุฒุฉ ุงุฎุชูุงุฑูุฉ          โ
โ  โ ุจุนุถ ุงูุนููุฏ ุจุฏูู ุณููุงุช ูุฌุงููุฉ            โ
โ  โ ุงูุญุณุงุจ = ุณุนุฑ ร ุนุฏุฏ (ุฏุงุฆูุงู)             โ
โ  โ ุงูุณููุงุช ูุง ุชุฏุฎู ูู ุฃู ุญุณุงุจ              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## 1๏ธโฃ ุชุญุฏูุซ ูููุฐุฌ ุฅุถุงูุฉ ุงููุฒุฑุนุฉ (Admin Panel)

### ุฃ) ุฅุถุงูุฉ ุญูู `has_bonus_years` ูู Interface

**ุงูููู:** `src/components/admin/CreateEditFarm.tsx`

```tsx
interface ContractData {
  id: string;
  contract_name: string;
  duration_years: number;
  investor_price: number;
  bonus_years: number;
  has_bonus_years: boolean;  // โ ุฌุฏูุฏ
  is_active: boolean;
  display_order: number;
}
```

**ุงูุบุฑุถ:**
- ุชุญุฏูุฏ ูุง ุฅุฐุง ูุงู ุงูุนูุฏ ูุญุชูู ุนูู ุณููุงุช ูุฌุงููุฉ ุฃู ูุง
- ุงูุชุญูู ูู ุชูููู/ุชุนุทูู ุญูู `bonus_years`

---

### ุจ) ุชุญุฏูุซ ุฏุงูุฉ `addContract()`

```tsx
function addContract() {
  setContracts([...contracts, {
    id: `contract-${Date.now()}-${Math.random()}`,
    contract_name: '',
    duration_years: 1,
    investor_price: 0,
    bonus_years: 0,
    has_bonus_years: false,  // โ ุงูุชุฑุงุถู ูุนุทู
    is_active: true,
    display_order: contracts.length
  }]);
}
```

**ุงูุณููู:**
- ุนูุฏ ุฅุถุงูุฉ ุนูุฏ ุฌุฏูุฏุ ุงูุณููุงุช ุงููุฌุงููุฉ ูุนุทูุฉ ุงูุชุฑุงุถูุงู โ
- ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ ูู `bonus_years` ูู 0

---

### ุฌ) ุชุญุฏูุซ ุฏุงูุฉ `loadFarm()`

```tsx
if (farm.contracts && Array.isArray(farm.contracts)) {
  const cleanedContracts = farm.contracts.map((contract: any) => ({
    ...contract,
    has_bonus_years: contract.has_bonus_years ?? (contract.bonus_years > 0)
  }));
  setContracts(cleanedContracts);
}
```

**ุงูููุทู:**
- ุฅุฐุง ูุงู `has_bonus_years` ููุฌูุฏุงู ูู DBุ ุงุณุชุฎุฏูู
- ุฅุฐุง ูู ููู ููุฌูุฏุงูุ ุชุญุฏูุฏู ุชููุงุฆูุงู ุจูุงุกู ุนูู `bonus_years > 0`
- ูุฐุง ูุถูู ุงูุชูุงูู ูุน ุงูุนููุฏ ุงููุฏููุฉ

---

### ุฏ) ูุงุฌูุฉ ุงููุณุชุฎุฏู - ูุณู ุงูุนููุฏ ุงูููุญุฏูุซ

#### ุงูุนูุงููู ุงูููุถุญุฉ:

```tsx
<label>ุงุณู ุงูุนูุฏ / ุงูุนุฑุถ *</label>
<input placeholder="ูุซุงู: ุนูุฏ 3 ุณููุงุช + 7 ูุฌุงูุงู" />

<label>ูุฏุฉ ุงูุนูุฏ ุงููุฏููุนุฉ (ุณููุงุช) *</label>
<input type="number" min="1" />

<label>ุณุนุฑ ุงูุดุฌุฑุฉ (ูููุฉ ุซุงุจุชุฉ) *</label>
<input placeholder="ูุซุงู: 300 ุฃู 490" />
```

**ุงูุชุญุณููุงุช:**
- โ ุชูุถูุญ "ูุฏุฉ ุงูุนูุฏ ุงููุฏููุนุฉ"
- โ ุงูุชุฃููุฏ ุนูู "ุณุนุฑ ุงูุดุฌุฑุฉ (ูููุฉ ุซุงุจุชุฉ)"
- โ ุฃูุซูุฉ ูุงุถุญุฉ ูู placeholders

---

#### Toggle ุงูุณููุงุช ุงููุฌุงููุฉ:

```tsx
<div className="p-3 rounded-xl" style={{
  background: contract.has_bonus_years 
    ? 'rgba(58, 161, 126, 0.1)' 
    : 'rgba(255, 255, 255, 0.02)',
  border: contract.has_bonus_years 
    ? '2px solid rgba(58, 161, 126, 0.3)' 
    : '1px solid rgba(255, 255, 255, 0.1)'
}}>
  <div className="flex items-center gap-3 mb-3">
    <input
      type="checkbox"
      id={`bonus-toggle-${index}`}
      checked={contract.has_bonus_years}
      onChange={(e) => {
        const isEnabled = e.target.checked;
        updateContract(index, 'has_bonus_years', isEnabled);
        if (!isEnabled) {
          updateContract(index, 'bonus_years', 0);
        }
      }}
      className="w-5 h-5 rounded cursor-pointer"
    />
    <label htmlFor={`bonus-toggle-${index}`}>
      ๐ ุชูุนูู ุณููุงุช ูุฌุงููุฉ ูููุฒุฉ ุนุฑุถ
      <span className="block text-xs">
        ุงูุณููุงุช ุงููุฌุงููุฉ ูุง ุชุฏุฎู ูู ุฃู ุญุณุงุจ ููู ููุฒุฉ ุชุณููููุฉ ููุท
      </span>
    </label>
  </div>

  <div>
    <label>ุนุฏุฏ ุงูุณููุงุช ุงููุฌุงููุฉ</label>
    <input
      type="number"
      value={contract.bonus_years}
      onChange={(e) => updateContract(index, 'bonus_years', parseInt(e.target.value) || 0)}
      disabled={!contract.has_bonus_years}
      placeholder={contract.has_bonus_years ? "ูุซุงู: 3 ุฃู 7" : "ูุนุทู"}
    />
  </div>
</div>
```

**ุงูุณููู:**

| ุงูุญุงูุฉ | has_bonus_years | bonus_years | ุญูู ุงูุฅุฏุฎุงู |
|--------|----------------|-------------|------------|
| **ูุนุทู** | `false` | `0` | ูุนุทู (disabled) |
| **ููุนูู** | `true` | `> 0` | ูุดุท |

**ุงูุฃููุงู:**
- **ููุนูู:** ุฎูููุฉ ุฎุถุฑุงุก ูุงุชุญุฉ + border ุฃุฎุถุฑ
- **ูุนุทู:** ุฎูููุฉ ุดูุงูุฉ + border ุฑูุงุฏู

---

## 2๏ธโฃ ุชุญุฏูุซ ุตูุญุฉ ุงููุฒุฑุนุฉ (FarmPage.tsx)

### ุฃ) ุชุญุฏูุซ ุงูุญุณุงุจ ุงููุงูู

#### ูุจู:
```tsx
const totalCost = Object.values(treeSelections).reduce((sum, sel) =>
  sum + (sel.quantity * sel.variety.price), 0  // โ ูู ููุน ุงูุดุฌุฑุฉ
);
```

#### ุจุนุฏ:
```tsx
const totalCost = selectedContract && totalTrees > 0
  ? totalTrees * selectedContract.investor_price  // โ ูู ุงูุนูุฏ
  : 0;
```

**ุงููุนุงุฏูุฉ ุงูุซุงุจุชุฉ:**
```
ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ = ุนุฏุฏ ุงูุฃุดุฌุงุฑ ร ุณุนุฑ ุงูุดุฌุฑุฉ ูู ุงูุนูุฏ
Total Cost = Total Trees ร Contract Investor Price
```

**ููุงุญุธุงุช:**
- โ ุงูุณุนุฑ ุฏุงุฆูุงู ูู `selectedContract.investor_price`
- โ ูุง ูุชู ุงูุถุฑุจ ูู ุงูุณููุงุช
- โ ุงูุณููุงุช ุงููุฌุงููุฉ ูุง ุชุฏุฎู ูู ุฃู ุญุณุงุจ

---

### ุจ) ุชุญุฏูุซ ุนุฑุถ ุงูุฃุดุฌุงุฑ

#### ูุจู:
```tsx
<div className="text-left">
  <p className="text-xl font-bold">{variety.price}</p>
  <p className="text-xs">ุฑูุงู / ุดุฌุฑุฉ</p>
</div>
```

#### ุจุนุฏ:
```tsx
<div className="text-left bg-gradient-to-br from-green-50 to-emerald-50 
               px-3 py-2 rounded-xl border border-green-200">
  <p className="text-xs text-gray-600 mb-0.5">ุงูุณุนุฑ ูู ุงูุนูุฏ</p>
  <p className="text-sm font-bold text-green-700">ููุญุฏุฏ ุนูุฏ ุงุฎุชูุงุฑ ุงูุนูุฏ</p>
</div>
```

**ุงูุบุฑุถ:**
- ุชูุถูุญ ุฃู ุงูุณุนุฑ ูุฃุชู ูู ุงูุนูุฏ ูููุณ ูู ููุน ุงูุดุฌุฑุฉ
- ููุน ุงูุงุฑุชุจุงู ูููุณุชุฎุฏู

---

### ุฌ) ุชุญุฏูุซ ุจุทุงูุฉ ุงูููุฎุต ุงูุณุฑูุน

```tsx
{Object.keys(treeSelections).length > 0 && (
  <div className="mt-4 bg-gradient-to-br from-green-500 to-green-600 
                  rounded-2xl p-4 lg:p-5 text-white shadow-xl">
    {selectedContract ? (
      <div className="space-y-3">
        <div className="flex items-center justify-between">
          <div>
            <p className="text-xs opacity-90 mb-0.5">ุฅุฌูุงูู ุงูุฃุดุฌุงุฑ</p>
            <p className="text-2xl lg:text-3xl font-bold">{totalTrees} ุดุฌุฑุฉ</p>
          </div>
          <div className="text-left">
            <p className="text-xs opacity-90 mb-0.5">ุณุนุฑ ุงูุดุฌุฑุฉ</p>
            <p className="text-2xl lg:text-3xl font-bold">
              {selectedContract.investor_price} ุฑูุงู
            </p>
          </div>
        </div>
        <div className="bg-white/20 rounded-xl p-3 text-center">
          <p className="text-xs opacity-90 mb-1">ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ</p>
          <p className="text-3xl font-black">{totalCost.toLocaleString()} ุฑูุงู</p>
        </div>
      </div>
    ) : (
      <div className="text-center">
        <p className="text-lg font-bold mb-1">ุงุฎุชุฑ ุงูุนูุฏ ุฃููุงู</p>
        <p className="text-xs opacity-80">ุงูุณุนุฑ ูุชุญุฏุฏ ุจูุงุกู ุนูู ุงูุนูุฏ ุงููุฎุชุงุฑ</p>
      </div>
    )}
  </div>
)}
```

**ุงูุณููู:**
- **ุจุฏูู ุนูุฏ ูุฎุชุงุฑ:** ุฑุณุงูุฉ "ุงุฎุชุฑ ุงูุนูุฏ ุฃููุงู"
- **ูุน ุนูุฏ ูุฎุชุงุฑ:** ุนุฑุถ ุงูุณุนุฑ ูุงูุญุณุงุจ ุงููุงูู

---

### ุฏ) ุชุญุฏูุซ Details Grid ูู ุงูุนูุฏ

```tsx
{contract.bonus_years > 0 ? (
  // โ ุนูุฏ ูุน ุณููุงุช ูุฌุงููุฉ
  <div className="rounded-xl p-3 border-2 bg-green-100 border-green-300">
    <div className="flex items-center gap-2 mb-1">
      <Gift className="w-3.5 h-3.5 text-emerald-600" />
      <p className="text-xs font-bold">ุณููุงุช ูุฌุงููุฉ (ููุฒุฉ ุนุฑุถ)</p>
    </div>
    <p className="text-base font-bold text-emerald-700">
      +{contract.bonus_years} ุณููุงุช
    </p>
  </div>
) : (
  // โ ุนูุฏ ุจุฏูู ุณููุงุช ูุฌุงููุฉ
  <div className="rounded-xl p-3 border bg-gray-50 border-gray-200">
    <div className="flex items-center gap-2 mb-1">
      <Calendar className="w-3.5 h-3.5 text-gray-600" />
      <p className="text-xs font-medium">ููุน ุงูุนูุฏ</p>
    </div>
    <p className="text-base font-bold text-gray-900">ุฅูุฌุงุฑ ุณููู</p>
  </div>
)}
```

**ุงูุชูููุฒ ุงูุจุตุฑู:**

| ููุน ุงูุนูุฏ | ุงูุฎูููุฉ | ุงูุฃููููุฉ | ุงููุต |
|-----------|---------|---------|------|
| **ูุน ุณููุงุช ูุฌุงููุฉ** | `bg-green-100` | `Gift` ๐ | "+X ุณููุงุช (ููุฒุฉ ุนุฑุถ)" |
| **ุจุฏูู ุณููุงุช ูุฌุงููุฉ** | `bg-gray-50` | `Calendar` ๐ | "ุฅูุฌุงุฑ ุณููู" |

---

### ูู) ุชุญุฏูุซ ุงูููุฎุต ุงูููุงุฆู

```tsx
<div className="bg-gradient-to-r from-green-600 via-green-500 to-green-600 
                rounded-2xl p-6 shadow-xl">
  <div className="text-center mb-4">
    <p className="text-xs text-white/80 font-medium mb-2">
      ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ
    </p>
    <p className="text-4xl lg:text-5xl font-black text-white mb-1">
      {totalCost.toLocaleString()}
    </p>
    <p className="text-xs text-white/80">ุฑูุงู ุณุนูุฏู</p>
  </div>

  <div className="bg-white/10 backdrop-blur-sm rounded-xl p-3 text-center">
    <p className="text-xs text-white/90 leading-relaxed">
      {selectedContract.bonus_years > 0 ? (
        <>
          ๐ ูุดูู ูุฐุง ุงูุนูุฏ 
          <span className="font-bold">
            {selectedContract.bonus_years} ุณููุงุช ูุฌุงููุฉ
          </span> 
          ูููุฒุฉ ุนุฑุถ ููุง ุชุฏุฎู ูู ุงูุณุนุฑ
        </>
      ) : (
        <>
          ๐ ูุฐุง ุงูุนูุฏ ุฅูุฌุงุฑ ุณููู ุจุฏูู ุณููุงุช ูุฌุงููุฉ
        </>
      )}
    </p>
  </div>
</div>
```

**ุงููุตูุต ุงูุชูุถูุญูุฉ:**

#### 1๏ธโฃ ุนูุฏ ูุน ุณููุงุช ูุฌุงููุฉ:
```
๐ ูุดูู ูุฐุง ุงูุนูุฏ 7 ุณููุงุช ูุฌุงููุฉ ูููุฒุฉ ุนุฑุถ ููุง ุชุฏุฎู ูู ุงูุณุนุฑ
```

#### 2๏ธโฃ ุนูุฏ ุจุฏูู ุณููุงุช ูุฌุงููุฉ:
```
๐ ูุฐุง ุงูุนูุฏ ุฅูุฌุงุฑ ุณููู ุจุฏูู ุณููุงุช ูุฌุงููุฉ
```

---

### ู) ุชุญุฏูุซ ุฏุงูุฉ ุงูุญูุธ

#### ูุจู:
```tsx
const totalCost = Object.values(treeSelections).reduce((sum, sel) =>
  sum + (sel.quantity * sel.variety.price), 0  // โ
);
```

#### ุจุนุฏ:
```tsx
const totalCost = totalTrees * selectedContract.investor_price;  // โ
```

**ุชุฃุซูุฑู:**
- ุถูุงู ุฃู ุงูุณุนุฑ ุงููุญููุธ ูู DB ุตุญูุญ
- ุชูุงุณู ุงูุญุณุงุจุงุช ูู ุฌููุน ุงูุฃูุงูู

---

## 3๏ธโฃ ุชุญุฏูุซ Services & Types

### ุฃ) ุชุญุฏูุซ `farmService.ts`

```tsx
export interface FarmContract {
  id: string
  farm_id: string
  contract_name: string
  duration_years: number
  investor_price: number
  bonus_years: number
  has_bonus_years?: boolean  // โ ุฌุฏูุฏ (ุงุฎุชูุงุฑู ููุชูุงูู)
  is_active: boolean
  display_order: number
  created_at?: string
  updated_at?: string
}
```

**ููุงุฐุง optionalุ**
- ุงูุชูุงูู ูุน ุงูุนููุฏ ุงููุฏููุฉ ูู DB
- ูููู ุชุญุฏูุฏู ุชููุงุฆูุงู ูู loadFarm()

---

## ๐ ุดุฑูุท ุงููุจูู - Acceptance Criteria

### โ 1. ูููู ุฅูุดุงุก ุนูุฏ ูุน ุฃู ุจุฏูู ุณููุงุช ูุฌุงููุฉ

**ุงูุงุฎุชุจุงุฑ:**
- ุฅูุดุงุก ุนูุฏ ุฌุฏูุฏ
- Toggle ุงูุณููุงุช ุงููุฌุงููุฉ ูุนุทู ุงูุชุฑุงุถูุงู
- ุนูุฏ ุงูุชูุนููุ ูููู ุฅุฏุฎุงู ุนุฏุฏ ุงูุณููุงุช
- ุนูุฏ ุงูุชุนุทููุ ูุชู ุชุตููุฑ bonus_years ุชููุงุฆูุงู

**ุงููุชูุฌุฉ:** โ ุชู ุจูุฌุงุญ

---

### โ 2. ุชุนุทูู ุงูุณููุงุช ุงููุฌุงููุฉ ููุนูุณ ูุจุงุดุฑุฉ ูู ุงููุงุฌูุฉ

**ุงูุงุฎุชุจุงุฑ:**
- ุนูุฏ ุชุนุทูู toggleุ ุญูู ุงูุฅุฏุฎุงู ูุตุจุญ disabled
- ุงููููุฉ ุชุชุตูุฑ ุชููุงุฆูุงู
- ุงูุฎูููุฉ ุชุชุบูุฑ ูู ุฎุถุฑุงุก ุฅูู ุฑูุงุฏูุฉ

**ุงููุชูุฌุฉ:** โ ุชู ุจูุฌุงุญ

---

### โ 3. ุงูุณุนุฑ ูุง ูุชุบูุฑ ูู ุฌููุน ุงูุญุงูุงุช

**ุงูุงุฎุชุจุงุฑ:**
- ุนูุฏ ุจู 5 ุณููุงุช + 2 ูุฌุงููุฉุ ุณุนุฑ ุงูุดุฌุฑุฉ 300 ุฑูุงู
- ุงุฎุชูุงุฑ 10 ุฃุดุฌุงุฑ
- ุงูุชูููุฉ = 10 ร 300 = 3000 ุฑูุงู (ููุณ 3000 ร 7)

**ุงููุชูุฌุฉ:** โ ุชู ุจูุฌุงุญ

---

### โ 4. ุงูุญุณุงุจ = ุณุนุฑ ุงูุดุฌุฑุฉ ร ุงูุนุฏุฏ ููุท

**ุงููุนุงุฏูุฉ ุงููุทุจูุฉ:**
```typescript
totalCost = totalTrees * selectedContract.investor_price
```

**ุงูุฃูุงูู ุงูููุทุจููุฉ:**
1. โ ุญุณุงุจ ุงูุชูููุฉ ูู component state
2. โ ุนุฑุถ ุงูุชูููุฉ ูู UI
3. โ ุญูุธ ุงูุชูููุฉ ูู DB
4. โ ููุฎุต ุงูุงุณุชุซูุงุฑ

**ุงููุชูุฌุฉ:** โ ุชู ุจูุฌุงุญ

---

### โ 5. ุงููุตูุต ุชูุถูุญ ุงููุฑู ุจูุถูุญ ูููุณุชุซูุฑ

**ุงููุตูุต ุงููุทุจูุฉ:**

| ุงููููุน | ุงููุต |
|--------|------|
| **Details Grid** | "ุณููุงุช ูุฌุงููุฉ (ููุฒุฉ ุนุฑุถ)" ุฃู "ุฅูุฌุงุฑ ุณููู" |
| **ุงูููุฎุต ุงูููุงุฆู** | "ูุดูู ูุฐุง ุงูุนูุฏ X ุณููุงุช ูุฌุงููุฉ ูููุฒุฉ ุนุฑุถ ููุง ุชุฏุฎู ูู ุงูุณุนุฑ" |
| **ุงูููุฎุต ุงูููุงุฆู (ุจุฏูู)** | "ูุฐุง ุงูุนูุฏ ุฅูุฌุงุฑ ุณููู ุจุฏูู ุณููุงุช ูุฌุงููุฉ" |
| **ุฑุณูู ุงูุตูุงูุฉ** | "ุฑุณูู ุงูุชุดุบูู ูุงูุตูุงูุฉ...ููุง ุชุฏุฎู ูู ุณุนุฑ ุงูุญุฌุฒ" |

**ุงููุชูุฌุฉ:** โ ุชู ุจูุฌุงุญ

---

### โ 6. ูุง ููุฌุฏ ุฃู ุญุณุงุจ ุจุงูุณููุงุช ููุงุฆูุงู

**ุงูุชุญูู:**
```typescript
// โ ูุจู (ุฎุทุฃ)
totalCost = treePrice ร totalTrees ร years

// โ ุจุนุฏ (ุตุญูุญ)
totalCost = contractPrice ร totalTrees
```

**ุงูุฃูุงูู ุงูููุญูุตุฉ:**
1. โ FarmPage.tsx - state calculations
2. โ FarmPage.tsx - handleSaveReservation
3. โ FarmPage.tsx - UI display
4. โ ูุง ุชูุฌุฏ ุนูููุงุช ุถุฑุจ ุจุงูุณููุงุช ูู ุฃู ููุงู

**ุงููุชูุฌุฉ:** โ ุชู ุจูุฌุงุญ

---

## ๐จ ุงูุชุญุณููุงุช ุงูุจุตุฑูุฉ

### 1๏ธโฃ ูู Admin Panel

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงุณู ุงูุนูุฏ: ุนูุฏ 3 ุณููุงุช + 7 ูุฌุงูุงู   โ
โ  ูุฏุฉ ุงูุนูุฏ ุงููุฏููุนุฉ: 3               โ
โ  ุณุนุฑ ุงูุดุฌุฑุฉ: 490                      โ
โ                                        โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ โ ุชูุนูู ุณููุงุช ูุฌุงููุฉ ูููุฒุฉ ุนุฑุถ  โ โ
โ  โ   ุงูุณููุงุช ุงููุฌุงููุฉ ูุง ุชุฏุฎู...    โ โ
โ  โ                                  โ โ
โ  โ   ุนุฏุฏ ุงูุณููุงุช ุงููุฌุงููุฉ: 7       โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงููููุฒุงุช:**
- โ ุฎูููุฉ ุฎุถุฑุงุก ุนูุฏ ุงูุชูุนูู
- โ ุฑุณุงูุฉ ุชูุถูุญูุฉ
- โ ุญูู ูุนุทู ุนูุฏ ุนุฏู ุงูุชูุนูู

---

### 2๏ธโฃ ูู ุตูุญุฉ ุงููุฒุฑุนุฉ

#### ุนุฑุถ ุงูุนูุฏ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โโโโ  ุนูุฏ ุงูุชูุงุน ุจูุฏุฉ 3 ุณููุงุช        โ
โ  โ3 โ  ูุซุงูู ูููุจุชุฏุฆูู   [ุฏุฎูู ุณุฑูุน]  โ
โ  โโโโ                                  โ
โ                                        โ
โ  โโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโ
โ  โูุฏุฉ:3   โ  โูุฌุงูู:+7 ๐ โ  โุฅุฌูุงููโโ
โ  โโโโโโโโโโ  โโโโโโโโโโโโโโโ  โโโโโโโโ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงูููุฎุต:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ        ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ               โ
โ             4,900                      โ
โ          ุฑูุงู ุณุนูุฏู                    โ
โ                                        โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  โ ๐ ูุดูู ูุฐุง ุงูุนูุฏ 7 ุณููุงุช       โ โ
โ  โ    ูุฌุงููุฉ ูููุฒุฉ ุนุฑุถ ููุง ุชุฏุฎู    โ โ
โ  โ    ูู ุงูุณุนุฑ                      โ โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 1: ุนูุฏ ูุน ุณููุงุช ูุฌุงููุฉ

**ุงููุฏุฎูุงุช:**
- ูุฏุฉ ุงูุนูุฏ: 3 ุณููุงุช
- ุณุนุฑ ุงูุดุฌุฑุฉ: 490 ุฑูุงู
- ุณููุงุช ูุฌุงููุฉ: 7
- ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุฎุชุงุฑ: 10

**ุงูุญุณุงุจ:**
```
ุงูุชูููุฉ = 10 ร 490 = 4,900 ุฑูุงู
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ: 4,900 ุฑูุงู
- โ ุฑุณุงูุฉ: "ูุดูู ูุฐุง ุงูุนูุฏ 7 ุณููุงุช ูุฌุงููุฉ ูููุฒุฉ ุนุฑุถ"
- โ ุฅุฌูุงูู ุงููุฏุฉ: 10 ุณููุงุช (ููุนุฑุถ ููุทุ ูุง ุชุฏุฎู ูู ุงูุญุณุงุจ)

---

### ุงูุณููุงุฑูู 2: ุนูุฏ ุจุฏูู ุณููุงุช ูุฌุงููุฉ

**ุงููุฏุฎูุงุช:**
- ูุฏุฉ ุงูุนูุฏ: 1 ุณูุฉ
- ุณุนุฑ ุงูุดุฌุฑุฉ: 300 ุฑูุงู
- ุณููุงุช ูุฌุงููุฉ: 0
- ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุฎุชุงุฑ: 15

**ุงูุญุณุงุจ:**
```
ุงูุชูููุฉ = 15 ร 300 = 4,500 ุฑูุงู
```

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุชูููุฉ ุงูุฅุฌูุงููุฉ: 4,500 ุฑูุงู
- โ ุฑุณุงูุฉ: "ูุฐุง ุงูุนูุฏ ุฅูุฌุงุฑ ุณููู ุจุฏูู ุณููุงุช ูุฌุงููุฉ"
- โ ููุน ุงูุนูุฏ: "ุฅูุฌุงุฑ ุณููู" (ูู Details Grid)

---

### ุงูุณููุงุฑูู 3: ุชุบููุฑ ุงูุนูุฏ

**ุงูุฎุทูุงุช:**
1. ุงุฎุชูุงุฑ 20 ุดุฌุฑุฉ
2. ุงุฎุชูุงุฑ ุนูุฏ ุณุนุฑู 200 ุฑูุงู โ ุงูุชูููุฉ = 4,000
3. ุชุบููุฑ ุฅูู ุนูุฏ ุณุนุฑู 500 ุฑูุงู โ ุงูุชูููุฉ = 10,000

**ุงููุชูุฌุฉ ุงููุชููุนุฉ:**
- โ ุงูุชูููุฉ ุชุชุญุฏุซ ููุฑุงู ุนูุฏ ุชุบููุฑ ุงูุนูุฏ
- โ ุฌููุน ุงูุฃุฑูุงู ุชุชุญุฏุซ ุชููุงุฆูุงู
- โ ุงููุตูุต ุงูุชูุถูุญูุฉ ุชุชุบูุฑ ุญุณุจ ุงูุนูุฏ ุงูุฌุฏูุฏ

---

## ๐ Build Results

```bash
vite v5.4.8 building for production...
transforming...
โ 1573 modules transformed.
โ built in 6.62s

Files:
dist/index.html                  0.97 kB โ gzip:  0.47 kB
dist/assets/index-B5WmVixh.css  54.18 kB โ gzip:  8.72 kB
dist/assets/index-BDGi_eXe.js  517.62 kB โ gzip: 132.03 kB
```

**Status:** โ Build successful - No errors

---

## ๐ ุงููููุงุช ุงูููุญุฏูุซุฉ

### 1. `src/components/admin/CreateEditFarm.tsx`
- โ ุฅุถุงูุฉ `has_bonus_years` ูู interface
- โ ุฅุถุงูุฉ Toggle ููุณููุงุช ุงููุฌุงููุฉ
- โ ุชุนุทูู ุชููุงุฆู ูุญูู bonus_years
- โ ุชุญุฏูุซ ุงูุนูุงููู ูุงููุตูุต

### 2. `src/components/FarmPage.tsx`
- โ ุชุญุฏูุซ ุญุณุงุจ ุงูุชูููุฉ ููุณุชุฎุฏู `investor_price`
- โ ุฅุฒุงูุฉ ุนุฑุถ ุณุนุฑ ุงูุดุฌุฑุฉ ูู ููุน ุงูุดุฌุฑุฉ
- โ ุฅุถุงูุฉ ูุตูุต ุชูุถูุญูุฉ ุญุณุจ ููุน ุงูุนูุฏ
- โ ุชุญุฏูุซ ุงูููุฎุต ุงูููุงุฆู
- โ ุชุญุฏูุซ Details Grid

### 3. `src/services/farmService.ts`
- โ ุฅุถุงูุฉ `has_bonus_years?` ูู FarmContract interface

---

## ๐ฏ ุงูุฎูุงุตุฉ

### ูุง ุชู ุฅูุฌุงุฒู:

#### โ ุงูููุทู ุงูุซุงุจุช
- **ุงููุงุนุฏุฉ:** ุงูุนูุฏ = ูุญุฏุฉ ุงูุชุณุนูุฑ
- **ุงูุณุนุฑ:** ุซุงุจุช ูู ุงูุนูุฏุ ูุง ูุชุฃุซุฑ ุจุงูุณููุงุช
- **ุงูุญุณุงุจ:** `ุณุนุฑ ร ุนุฏุฏ` (ุฏุงุฆูุงู)

#### โ ุงูุณููุงุช ุงููุฌุงููุฉ
- **ุงูุทุจูุนุฉ:** ููุฒุฉ ุงุฎุชูุงุฑูุฉ
- **ุงูุชุฃุซูุฑ:** ูุง ุชุฏุฎู ูู ุฃู ุญุณุงุจ
- **ุงูุชุญูู:** Toggle ูู Admin Panel
- **ุงูุชุนุทูู:** ุชููุงุฆู ููุญููู

#### โ ูุงุฌูุฉ ุงููุณุชุฎุฏู
- **ุงููุตูุต:** ูุงุถุญุฉ ูุชูุถูุญูุฉ
- **ุงูุชูููุฒ:** ุจุตุฑู ุจูู ุงูุฃููุงุน
- **ุงูุญุณุงุจุงุช:** ุดูุงูุฉ ููุฑุฆูุฉ
- **ุงูุชุญุฐูุฑุงุช:** ูุงุถุญุฉ ููููููุฉ

#### โ ุงูุฌูุฏุฉ
- **Build:** ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
- **Types:** ูุชุณูุฉ ูู ุฌููุน ุงููููุงุช
- **Logic:** ุซุงุจุช ูู ูู ุงูุฃูุงูู
- **UX:** ูุงุถุญุฉ ููููููุฉ

---

### ุงููุชูุฌุฉ ุงูููุงุฆูุฉ:
**ููุทู ุชุณุนูุฑ ุซุงุจุช ูููุญุฏ ูุน ุชุญูู ูุงูู ูู ุงูุณููุงุช ุงููุฌุงููุฉ ูููุฒุฉ ุนุฑุถ ุงุฎุชูุงุฑูุฉ!**

---

**ุงูุชุงุฑูุฎ:** 2026-01-27  
**ุงูุญุงูุฉ:** โ ููุชูู ุจูุฌุงุญ  
**ุงูุฌูุฏุฉ:** โญโญโญโญโญ  
**ุฌุงูุฒ ููุฅูุชุงุฌ:** ูุนู  
**Build Time:** 6.62 ุซุงููุฉ
