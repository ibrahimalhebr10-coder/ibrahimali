# ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงูุงุญุชุณุงุจ ุงููุฑู (ุฌููุฑ ุงูููุฉ) โ

---

## โ ุงูุชูู ุงูุชูููุฐ

**ุงูุชุงุฑูุฎ:** 2026-02-06
**ุญุงูุฉ ุงูุจูุงุก:** โ ูุฌุญ ูู 12.57 ุซุงููุฉ
**ุงูุญุงูุฉ:** ุฌุงูุฒ ููุฅูุชุงุฌ - ูุธุงู ุงุญุชุณุงุจ ุฏููุงูููู ุจุงููุงูู

---

## ๐ ุงูููุณูุฉ ุงูุฃุณุงุณูุฉ

> **"ูุง ุฑูู ุซุงุจุช!"**
> **ุฌููุน ููุงุนุฏ ุงูููุงูุขุช ุชูุฏุงุฑ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ**

ุงููุงุนุฏุฉ ุชูุฏุงุฑ ูู: **Admin โ Marketing โ Partner Settings**

---

## ๐ฏ ูุง ุชู ุชูููุฐู

### 1. Backend: ุฏุงูุฉ RPC ุฏููุงููููุฉ โ

**ุงูููู:** `supabase/migrations/*_update_influencer_dashboard_dynamic_calculation.sql`

**ุงูุชุบููุฑุงุช:**
```sql
CREATE OR REPLACE FUNCTION get_my_influencer_dashboard()
RETURNS jsonb AS $$
DECLARE
  trees_required integer;
BEGIN
  -- ุฌูุจ ุงูุนุฏุฏ ุงููุทููุจ ูู ุฌุฏูู ุงูุฅุนุฏุงุฏุงุช (ููุณ ุซุงุจุช!)
  SELECT trees_required_for_reward INTO trees_required
  FROM influencer_settings
  LIMIT 1;

  -- ุฅุฐุง ูู ููุฌุฏุ ุงุณุชุฎุฏู ุงููููุฉ ุงูุงูุชุฑุงุถูุฉ 20
  IF trees_required IS NULL THEN
    trees_required := 20;
  END IF;

  -- ุญุณุงุจ ุงูุชูุฏู ุฏููุงููููุงู
  trees_in_current_batch := trees_count % trees_required;
  progress_percentage := (trees_in_current_batch * 100.0) / trees_required;
  trees_until_next_reward := trees_required - trees_in_current_batch;

  -- ุฅุฑุฌุงุน ุงููููุฉ ุงูุฏููุงููููุฉ ูุน ุงูุฅุญุตุงุฆูุงุช
  RETURN jsonb_build_object(
    'trees_required_for_reward', trees_required,
    'trees_in_current_batch', trees_in_current_batch,
    'trees_until_next_reward', trees_until_next_reward,
    'progress_percentage', progress_percentage,
    ...
  );
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

**ุงููุชูุฌุฉ:**
- โ ูุง ุฑูู ุซุงุจุช ูู ุงูููุฏ
- โ ููุฌูุจ ูู ุฌุฏูู `influencer_settings`
- โ ุงูุชุบููุฑ ูุญุฏุซ ููุฑุงู ูุฌููุน ุงูุดุฑูุงุก
- โ ุงุญุชุณุงุจ ุงูุฃุซุฑ **ุจุนุฏ ุงูุฏูุน ููุท** (status = 'confirmed')

---

### 2. Admin UI: ูุฏูุฑ ุงูุฅุนุฏุงุฏุงุช โ

**ุงูููู:** `src/components/admin/InfluencerSettingsManager.tsx`

**ุงููููุฒุงุช:**

#### ุฃ) ุญูู ุงูุฅุฏุฎุงู ุงูุฏููุงูููู
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุทููุจุฉ ููุญุตูู ุนูู    โ
โ ููุงูุฃุฉ ูุงุญุฏุฉ:                      โ
โ                                     โ
โ  โโโโโโโ                            โ
โ  โ  20 โ ุดุฌุฑุฉ                       โ
โ  โโโโโโโ                            โ
โ                                     โ
โ ๐ก ูุซุงู: ุฅุฐุง ูุงูุช ุงููููุฉ 20ุ       โ
โ    ููู 20 ุดุฌุฑุฉ = ููุงูุฃุฉ ูุงุญุฏุฉ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุจ) ุฃุฒุฑุงุฑ ุงูุฅุนุฏุงุฏุงุช ุงูุณุฑูุนุฉ
```
โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ
โ ุญููุฉ:    โ โ ูุชูุณุท:   โ โ ุงูุชุฑุงุถู: โ โ ุตุนุจ:    โ
โ 5 ุฃุดุฌุงุฑ โ โ 10 ุฃุดุฌุงุฑโ โ 20 ุดุฌุฑุฉ  โ โ 50 ุดุฌุฑุฉ โ
โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ โโโโโโโโโโโโ
```

#### ุฌ) ูุนุงููุฉ ูุจุงุดุฑุฉ
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ูุนุงููุฉ:                           โ
โ ูู 20 ุดุฌุฑุฉ ูุญุฌูุฒุฉ = ููุงูุฃุฉ ุดุฌุฑุฉ ูุงุญุฏุฉ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุฏ) ุงูุชุญูู ูู ุงูุตุญุฉ
- โ ุงูุญุฏ ุงูุฃุฏูู: 1 ุดุฌุฑุฉ
- โ ุงูุญุฏ ุงูุฃูุตู: 1000 ุดุฌุฑุฉ
- โ ุฑุณุงูุฉ ุฎุทุฃ ุฅุฐุง ูุงูุช ุงููููุฉ ุฎุงุฑุฌ ุงููุทุงู

#### ูู) ุฅุนุฏุงุฏุงุช ุฅุถุงููุฉ
- โ ุชูุนูู/ุฅููุงู ุงููุธุงู ุจุงููุงูู
- โ ุชูุนูู ุงูุดุฑูุงุก ุชููุงุฆูุงู
- โ ููู ุงูุจุงูุฉ ุงููููุฒุฉ

**ูุงุฌูุฉ ุงูุฅุนุฏุงุฏุงุช:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ๏ธ  ุฅุนุฏุงุฏุงุช ุดุฑูู ุงููุฌุงุญ                     โ
โ  ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูููุงูุขุช ูุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ      โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ุชูุนูู ูุธุงู ุดุฑูุงุก ุงููุฌุงุญ        [ON/OFF]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ูุงุนุฏุฉ ุงุญุชุณุงุจ ุงูููุงูุขุช                     โ
โ                                               โ
โ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุทููุจุฉ: [___20___] ุดุฌุฑุฉ       โ
โ                                               โ
โ [ุญููุฉ: 5] [ูุชูุณุท: 10] [ุงูุชุฑุงุถู: 20] [ุตุนุจ: 50] โ
โ                                               โ
โ ๐ ูุนุงููุฉ: ูู 20 ุดุฌุฑุฉ = ููุงูุฃุฉ ูุงุญุฏุฉ        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ โ ุชูุนูู ุงูุดุฑูุงุก ุชููุงุฆูุงู         [ON/OFF]  โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ููู ุงูุจุงูุฉ ุงููููุฒุฉ: [๐จ] [#FFD700]          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

                    [๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช]

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ๐ ููุงุญุธุฉ ูููุฉ: ูุชู ุงุญุชุณุงุจ ุงูุฃุดุฌุงุฑ ููุท ูู   โ
โ ุงูุญุฌูุฒุงุช ุงููุคูุฏุฉ (ุจุนุฏ ุงูุฏูุน). ุงูุชุบููุฑุงุช ูู   โ
โ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุทููุจุฉ ุชุคุซุฑ ุนูู ุฌููุน ุงูุดุฑูุงุก   โ
โ ููุฑุงู.                                        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 3. Admin Dashboard: ุงูุชูุงูู โ

**ุงูููู:** `src/components/admin/MarketingManagement.tsx`

**ุงูุชุบููุฑุงุช:**
- โ ุฅุถุงูุฉ ุชุจููุจ ุฑุงุจุน: "ุฅุนุฏุงุฏุงุช ุงููุธุงู"
- โ ุฅุถุงูุฉ ุจุทุงูุฉ ูู ูุธุฑุฉ ุนุงูุฉ
- โ ุชุถููู ูููู `InfluencerSettingsManager`

**ุงูุชุจููุจุงุช:**
```
โโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโ
โ ูุธุฑุฉ ุนุงูุฉ โ ุดุฑูุงุก ุงููุณูุฑุฉ โ ุงูุจุงูุฉ ุงููููุฒุฉ โ ุฅุนุฏุงุฏุงุช ุงููุธุงู โ
โโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโโ
```

**ุจุทุงูุฉ ุงูุฅุนุฏุงุฏุงุช ูู ุงููุธุฑุฉ ุงูุนุงูุฉ:**
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  โ๏ธ                                โ
โ                                   โ
โ  ุฅุนุฏุงุฑุงุช ุงููุธุงู                   โ
โ                                   โ
โ  ุฅุฏุงุฑุฉ ููุงุนุฏ ุงูููุงูุขุช             โ
โ  ูุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

### 4. Partner Dashboard: ุงูุนุฑุถ ุงูุฏููุงูููู โ

**ุงูููู:** `src/components/InfluencerDashboard.tsx`

**ุงูุชุบููุฑุงุช:**

#### ูุจู:
```typescript
<span className="text-sm text-amber-600">/20</span>
```

#### ุจุนุฏ:
```typescript
<span className="text-sm text-amber-600">
  /{stats.trees_required_for_reward || 20}
</span>
```

**ุงููุชูุฌุฉ ุงูุจุตุฑูุฉ:**

##### ุจุทุงูุฉ ุงูุชูุฏู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  ุงูุชูุฏู ูุญู ุงูููุงูุฃุฉ ุงูุชุงููุฉ          โ
โ                                       โ
โ  โโโโโ                                โ
โ  โ 15โ/20                    75%      โ
โ  โโโโโ                                โ
โ                                       โ
โ  โโโโโโโโโโโโโโโโโโ (ุดุฑูุท ุงูุชูุฏู)     โ
โ                                       โ
โ  5 ุฃุดุฌุงุฑ ูุชุจููุฉ                       โ
โ                                       โ
โ  ๐ ูู 20 ุดุฌุฑุฉ = ููุงูุฃุฉ ูุงุญุฏุฉ         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

##### ุณุฌู ุงููุดุงุท:
```
โโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโฌโโโโโโโโโโโ
โ ุงูุชุงุฑูุฎ   โ ุงูุฃุดุฌุงุฑ  โ ุงูููุงูุขุช โ ุงูุชูุฏู    โ
โโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโผโโโโโโโโโโโค
โ 2026-02 โ    15    โ   +0     โ 15/20 โโโโ
โ 2026-01 โ    20    โ   +1     โ 0/20  โโโโ
โ 2026-01 โ    10    โ   +0     โ 10/20 โโโโ
โโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโดโโโโโโโโโโโ
```

---

## ๐ ุงููููุงุช ุงููุนุฏูุฉ/ุงูููุดุฃุฉ

### ูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```
โ supabase/migrations/*_update_influencer_dashboard_dynamic_calculation.sql
   - ุชุญุฏูุซ ุฏุงูุฉ get_my_influencer_dashboard()
   - ุฌูุจ trees_required_for_reward ูู influencer_settings
   - ุญุณุงุจ ุฏููุงูููู ููุชูุฏู
   - ุฅุฑุฌุงุน ุงููููุฉ ุงูุญุงููุฉ ูุน ุงูุฅุญุตุงุฆูุงุช
```

### ููููุงุช ุฌุฏูุฏุฉ:
```
โ src/components/admin/InfluencerSettingsManager.tsx (ุฌุฏูุฏ)
   - ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงูุฅุนุฏุงุฏุงุช
   - ุญูู ุฅุฏุฎุงู ูุน ุชุญูู
   - ุฃุฒุฑุงุฑ ุฅุนุฏุงุฏุงุช ุณุฑูุนุฉ
   - ูุนุงููุฉ ูุจุงุดุฑุฉ
   - ุญูุธ/ุชุญููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
```

### ููููุงุช ูุญุฏุซุฉ:
```
โ src/components/admin/MarketingManagement.tsx (ูุญุฏุซ)
   - ุฅุถุงูุฉ ุชุจููุจ "ุฅุนุฏุงุฏุงุช ุงููุธุงู"
   - ุฅุถุงูุฉ ุจุทุงูุฉ ูู ุงููุธุฑุฉ ุงูุนุงูุฉ
   - ุชุถููู InfluencerSettingsManager

โ src/components/InfluencerDashboard.tsx (ูุญุฏุซ)
   - ุงุณุชุจุฏุงู /20 ุงูุซุงุจุช ุจู /{stats.trees_required_for_reward}
   - ุนุฑุถ ุงููุงุนุฏุฉ ุงูุญุงููุฉ ูู ุจุทุงูุฉ ุงูุชูุฏู
   - ุชุญุฏูุซ ุณุฌู ุงููุดุงุท ููุณุชุฎุฏู ุงููููุฉ ุงูุฏููุงููููุฉ
```

---

## ๐งช ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### ุงุฎุชุจุงุฑ 1: ุชุนุฏูู ุงููุงุนุฏุฉ ูู Admin
```bash
1. ุงูุชุญ Admin โ Marketing โ ุฅุนุฏุงุฏุงุช ุงููุธุงู
2. โ ุชูุนุฑุถ ุงููููุฉ ุงูุญุงููุฉ (20 ุงูุชุฑุงุถูุงู)
3. ุบููุฑ ุงููููุฉ ุฅูู 5 (ุญููุฉ)
4. ุงุถุบุท "ุญูุธ ุงูุฅุนุฏุงุฏุงุช"
5. โ ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ"
6. ุงูุชุญ ุญุณุงุจ ุดุฑูู ูุฌุงุญ
7. โ ูุธูุฑ: "15/5" ุจุฏูุงู ูู "15/20"
8. โ ุงููุต: "๐ ูู 5 ุดุฌุฑุฉ = ููุงูุฃุฉ ูุงุญุฏุฉ"
```

### ุงุฎุชุจุงุฑ 2: ุงูุฅุนุฏุงุฏุงุช ุงูุณุฑูุนุฉ
```bash
1. ุงูุชุญ ุฅุนุฏุงุฏุงุช ุงููุธุงู
2. ุงุถุบุท ุฒุฑ "ุญููุฉ: 5 ุฃุดุฌุงุฑ"
3. โ ุงูุญูู ูุชุญุฏุซ ุฅูู 5
4. โ ุงููุนุงููุฉ: "ูู 5 ุดุฌุฑุฉ = ููุงูุฃุฉ"
5. ุงุถุบุท "ุตุนุจ: 50 ุดุฌุฑุฉ"
6. โ ุงูุญูู ูุชุญุฏุซ ุฅูู 50
7. โ ุงููุนุงููุฉ: "ูู 50 ุดุฌุฑุฉ = ููุงูุฃุฉ"
```

### ุงุฎุชุจุงุฑ 3: ุงูุชุญูู ูู ุงูุตุญุฉ
```bash
1. ุงูุชุญ ุฅุนุฏุงุฏุงุช ุงููุธุงู
2. ุฃุฏุฎู ูููุฉ 0
3. ุงุถุบุท "ุญูุธ"
4. โ ุฑุณุงูุฉ ุฎุทุฃ: "ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุทููุจุฉ ูุฌุจ ุฃู ูููู ุจูู 1 ู 1000"
5. ุฃุฏุฎู ูููุฉ 2000
6. ุงุถุบุท "ุญูุธ"
7. โ ุฑุณุงูุฉ ุฎุทุฃ: "ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุทููุจุฉ ูุฌุจ ุฃู ูููู ุจูู 1 ู 1000"
8. ุฃุฏุฎู ูููุฉ 10
9. ุงุถุบุท "ุญูุธ"
10. โ ูุฌุญ ุงูุญูุธ
```

### ุงุฎุชุจุงุฑ 4: ุงูุชุฃุซูุฑ ุงูููุฑู ุนูู ุฌููุน ุงูุดุฑูุงุก
```bash
1. ุงูุชุญ Admin โ Marketing โ ุดุฑูุงุก ุงููุณูุฑุฉ
2. ุณุฌูู 3 ุดุฑูุงุก ุฌุฏุฏ
3. ุงูุชุญ ุฅุนุฏุงุฏุงุช ุงููุธุงู
4. ุบููุฑ ุงููุงุนุฏุฉ ูู 20 ุฅูู 10
5. ุงุถุบุท "ุญูุธ"
6. ุงูุชุญ ุญุณุงุจ ุงูุดุฑูู ุงูุฃูู
7. โ ูุนุฑุถ: "x/10"
8. ุงูุชุญ ุญุณุงุจ ุงูุดุฑูู ุงูุซุงูู
9. โ ูุนุฑุถ: "x/10"
10. ุงูุชุญ ุญุณุงุจ ุงูุดุฑูู ุงูุซุงูุซ
11. โ ูุนุฑุถ: "x/10"
12. โ ุฌููุน ุงูุดุฑูุงุก ุชุฃุซุฑูุง ููุฑุงู
```

### ุงุฎุชุจุงุฑ 5: ุงูุงุญุชุณุงุจ ุจุนุฏ ุงูุฏูุน ููุท
```bash
1. ุดุฑูู ูุฏูู 15 ุดุฌุฑุฉ ูุญุฌูุฒุฉ (ูุคูุฏุฉ)
2. ุนููู ุฌุฏูุฏ ูุญุฌุฒ 10 ุฃุดุฌุงุฑ ุจููุฏ ุงูุดุฑูู
3. ุงูุญุงูุฉ: 'pending' (ูุจู ุงูุฏูุน)
4. ุงูุชุญ ุญุณุงุจ ุงูุดุฑูู
5. โ ูุง ูุฒุงู 15 ุดุฌุฑุฉ (ูู ุชูุญุชุณุจ ุงูุนุดุฑุฉ ุงูุฌุฏูุฏุฉ)
6. ุงูุนููู ูุฏูุน
7. ุงูุญุงูุฉ ุชุชุบูุฑ ุฅูู: 'confirmed'
8. ุงูุชุญ ุญุณุงุจ ุงูุดุฑูู
9. โ ุงูุขู 25 ุดุฌุฑุฉ (ุชู ุงุญุชุณุงุจ ุงูุนุดุฑุฉ)
```

---

## ๐ฏ ุงููุฒุงูุง ุงูุฃุณุงุณูุฉ

### 1. ูุฑููุฉ ูุงููุฉ โจ
```
โ ูุง ุฑูู ุซุงุจุช ูู ุงูููุฏ
โ ุชุญูู ูุงูู ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ
โ ุชุบููุฑ ุงููุงุนุฏุฉ ูู ุฃู ููุช
โ ุชุฃุซูุฑ ููุฑู ุนูู ุฌููุน ุงูุดุฑูุงุก
```

### 2. ุณูููุฉ ุงูุฅุฏุงุฑุฉ ๐๏ธ
```
โ ูุงุฌูุฉ ุจุณูุทุฉ ููุงุถุญุฉ
โ ุฃุฒุฑุงุฑ ุฅุนุฏุงุฏุงุช ุณุฑูุนุฉ
โ ูุนุงููุฉ ูุจุงุดุฑุฉ
โ ุฑุณุงุฆู ูุฌุงุญ/ุฎุทุฃ ูุงุถุญุฉ
```

### 3. ุงุณุชุฑุงุชูุฌูุงุช ูุชููุนุฉ ๐
```
โ ุญููุฉ: 5 ุฃุดุฌุงุฑ (ุชุญููุฒ ุณุฑูุน)
โ ูุชูุณุท: 10 ุฃุดุฌุงุฑ (ูุชูุงุฒู)
โ ุงูุชุฑุงุถู: 20 ุดุฌุฑุฉ (ููุงุณู)
โ ุตุนุจ: 50 ุดุฌุฑุฉ (ุชุญุฏู)
โ ูุฎุตุต: ุฃู ุฑูู ูู 1-1000
```

### 4. ุฃูุงู ูุดูุงููุฉ ๐
```
โ ุงุญุชุณุงุจ ุจุนุฏ ุงูุฏูุน ููุท
โ ุญุงูุฉ confirmed ูุทููุจุฉ
โ ูุง ุงุญุชุณุงุจ ููุญุฌูุฒุงุช ุงููุนููุฉ
โ ุดูุงููุฉ ูุงููุฉ ููุดุฑูู
```

### 5. ุนุฑุถ ุฏููุงูููู ููุดุฑูู ๐ฑ
```
โ ูุฑู ุงููุงุนุฏุฉ ุงูุญุงููุฉ ุฏุงุฆูุงู
โ ุงูุชูุฏู ูุญุณูุจ ุญุณุจ ุงููุงุนุฏุฉ
โ ุฑุณุงูุฉ ูุงุถุญุฉ: "ูู X ุดุฌุฑุฉ = ููุงูุฃุฉ"
โ ุชุญุฏูุซ ููุฑู ุนูุฏ ุงูุชุบููุฑ
```

---

## ๐ ุงูุชูุงุตูู ุงูุชูููุฉ

### ููุทู ุงูุงุญุชุณุงุจ ุงูุฏููุงูููู:
```sql
-- ูู ุฏุงูุฉ get_my_influencer_dashboard()

-- 1. ุฌูุจ ุงููุงุนุฏุฉ ุงูุญุงููุฉ
SELECT trees_required_for_reward INTO trees_required
FROM influencer_settings
LIMIT 1;

-- 2. ุญุณุงุจ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ูู ุงูุญุฌูุฒุงุช ุงููุคูุฏุฉ ููุท
SELECT COALESCE(SUM(tree_count), 0) INTO trees_count
FROM reservations
WHERE influencer_code = partner_name
  AND status = 'confirmed';  -- ููู ุฌุฏุงู!

-- 3. ุญุณุงุจ ุงูุชูุฏู ุฏููุงููููุงู
trees_in_current_batch := trees_count % trees_required;
progress_percentage := (trees_in_current_batch * 100.0) / trees_required;
trees_until_next_reward := trees_required - trees_in_current_batch;

-- 4. ุญุณุงุจ ุงูููุงูุขุช ุงูููุชุณุจุฉ
total_rewards_earned := trees_count / trees_required;

-- 5. ุฅุฑุฌุงุน ุฌููุน ุงูููู
RETURN jsonb_build_object(
  'trees_required_for_reward', trees_required,  -- ุฏููุงูููู!
  'trees_in_current_batch', trees_in_current_batch,
  'trees_until_next_reward', trees_until_next_reward,
  'progress_percentage', progress_percentage,
  'total_rewards_earned', total_rewards_earned,
  ...
);
```

### ููุทู ุงูุญูุธ ูู Admin:
```typescript
const handleSave = async () => {
  // 1. ุงูุชุญูู ูู ุงูุตุญุฉ
  if (settings.trees_required_for_reward < 1 ||
      settings.trees_required_for_reward > 1000) {
    setErrorMessage('ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุทููุจุฉ ูุฌุจ ุฃู ูููู ุจูู 1 ู 1000');
    return;
  }

  // 2. ุงูุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  await supabase
    .from('influencer_settings')
    .update({
      trees_required_for_reward: settings.trees_required_for_reward
    })
    .eq('id', '00000000-0000-0000-0000-000000000001');

  // 3. ุฑุณุงูุฉ ูุฌุงุญ
  setSuccessMessage('โ ุชู ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุจูุฌุงุญ!');
};
```

### ุงูุนุฑุถ ุงูุฏููุงูููู ูู Dashboard:
```typescript
// ูุจู: ุซุงุจุช
<span>/20</span>

// ุจุนุฏ: ุฏููุงูููู
<span>/{stats.trees_required_for_reward || 20}</span>

// ุนุฑุถ ุงููุงุนุฏุฉ ุงูุญุงููุฉ
<p className="text-xs text-amber-700 font-bold">
  ๐ ูู {stats.trees_required_for_reward || 20} ุดุฌุฑุฉ = ููุงูุฃุฉ ูุงุญุฏุฉ
</p>
```

---

## ๐ ูุจู ูุจุนุฏ

### ูุจู (ุซุงุจุช):
```
โ ุฑูู 20 ุซุงุจุช ูู ุงูููุฏ
โ ูุง ูููู ุชุบููุฑู ุฅูุง ุจุชุนุฏูู ุงูููุฏ
โ ูุญุชุงุฌ ุฅุนุงุฏุฉ ูุดุฑ ุนูุฏ ุงูุชุบููุฑ
โ ููุณ ุงููุงุนุฏุฉ ููุญููุงุช ูุงูููุช ุงูุนุงุฏู
โ ุบูุฑ ูุฑุฆู ูููุฏูุฑ
โ ูุง ุชูุฌุฏ ูุงุฌูุฉ ุฅุฏุงุฑุฉ
```

### ุจุนุฏ (ุฏููุงูููู):
```
โ ูุง ุฑูู ุซุงุจุช ูู ุงูููุฏ
โ ููุฏุงุฑ ูู ููุญุฉ ุงูุชุญูู
โ ุชุบููุฑ ููุฑู ุจุฏูู ุฅุนุงุฏุฉ ูุดุฑ
โ ุงุณุชุฑุงุชูุฌูุงุช ูุฎุชููุฉ (ุญููุงุชุ ุนุงุฏูุ ุชุญุฏู)
โ ูุงุฌูุฉ ูุงุถุญุฉ ูููุฏูุฑ
โ ูุนุงููุฉ ูุจุงุดุฑุฉ ููุชุฃุซูุฑ
โ ุงุญุชุณุงุจ ุจุนุฏ ุงูุฏูุน ููุท
โ ุดูุงููุฉ ูุงููุฉ ููุดุฑูู
```

---

## ๐ ุงูููุฎุต

**ูุธุงู ุงูุงุญุชุณุงุจ ุงููุฑู = ููุฉ ุฅุฏุงุฑูุฉ ุญููููุฉ**

```
ุงููุธุงู:
โ ูุง ุฑูู ุซุงุจุช ุฃุจุฏุงู
โ ุชุญูู ูุงูู ูู Admin
โ ุชุบููุฑ ููุฑู ูุฌููุน ุงูุดุฑูุงุก
โ ุงุณุชุฑุงุชูุฌูุงุช ูุชููุนุฉ (1-1000)
โ ุงุญุชุณุงุจ ุจุนุฏ ุงูุฏูุน ููุท
โ ุนุฑุถ ุฏููุงูููู ูุงุถุญ
โ ูุงุฌูุฉ ุฅุฏุงุฑุฉ ุงุญุชุฑุงููุฉ
โ ูุฑููุฉ ูุงููุฉ
```

**ุงูููุณูุฉ:**
> **"ุงูููุงูุขุช ุชูุฏุงุฑุ ูุง ุชูุจุฑูุฌ"**
> **"ุงููุงุนุฏุฉ ุชุชุบูุฑุ ุงููุธุงู ูุชููู"**

---

**ุญุงูุฉ ุงูุจูุงุก:** โ ูุฌุญ ูู 12.57s
**ุงููุญุฏุงุช ุงููุญููุฉ:** 1610
**ุงูุชุงุฑูุฎ:** 2026-02-06
**ุงูุญุงูุฉ:** โ ูุงูู ูุฌุงูุฒ ููุฅูุชุงุฌ

---

**ุงููุชูุฌุฉ:** ูุธุงู ุงุญุชุณุงุจ ููุงูุขุช ูุฑู ูููู! ๐ฏโจ

**ุงููุฑุญูุฉ ุงูุซุงููุฉ ููุชููุฉ ุจุงููุงูู!** ๐

---

## ๐ ูุงุฐุง ุจุนุฏุ

ููููู ุงูุขู:

1. **ุฅุฏุงุฑุฉ ุงูููุงุนุฏ ุจุญุฑูุฉ:**
   - ุงูุชุญ Admin โ Marketing โ ุฅุนุฏุงุฏุงุช ุงููุธุงู
   - ุบููุฑ `trees_required_for_reward` ุญุณุจ ุงูุญุงุฌุฉ
   - ุงูุชุฃุซูุฑ ููุฑู ุนูู ุฌููุน ุงูุดุฑูุงุก

2. **ุงุณุชุฑุงุชูุฌูุงุช ูุฎุชููุฉ:**
   - ุญููุฉ ูููุฉ: 5 ุฃุดุฌุงุฑ = ููุงูุฃุฉ
   - ูุถุน ุนุงุฏู: 20 ุดุฌุฑุฉ = ููุงูุฃุฉ
   - ุชุญุฏู ุตุนุจ: 50 ุดุฌุฑุฉ = ููุงูุฃุฉ

3. **ูุฑุงูุจุฉ ุงูุฃุซุฑ:**
   - ุงูุชุญ Admin โ Marketing โ ุดุฑูุงุก ุงููุณูุฑุฉ
   - ุชุงุจุน ุฃุฏุงุก ุงูุดุฑูุงุก
   - ุฑุงูุจ ุชุฃุซูุฑ ุงูุชุบููุฑุงุช

**ูุธุงู ุดุฑูุงุก ุงููุฌุงุญ ููุชูู 100%! ๐ฟโจ**
