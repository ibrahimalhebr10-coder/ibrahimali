# ุชุญุฏูุซ: ุงูุณูุงุญ ุจุญุฐู ุงููุฒุงุฑุน ูุน ุชุญุฐูุฑ ููู

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ูุธุงู ุญุฐู ุงููุฒุงุฑุน ููุณูุงุญ ุจุญุฐู ุงููุฒุงุฑุน ุงูุชู ุชุญุชูู ุนูู ุญุฌูุฒุงุชุ ูุน ุนุฑุถ ุชุญุฐูุฑ ูุงุถุญ ูููู ูุจู ุงููุชุงุจุนุฉ.

---

## ุงูุชุบููุฑ ุงููุทููุจ

### ูุจู ุงูุชุญุฏูุซ โ
```
ุงููุฒุฑุนุฉ ุจูุง ุญุฌูุฒุงุช
    โ
ุฑุณุงูุฉ: "ูุง ูููู ุงูุญุฐู"
    โ
ุงูุญุฐู ููููุน ุชูุงูุงู
```

**ุงููุดููุฉ:**
- ูุง ูููู ููุฃุฏูู ุญุฐู ุงููุฒุฑุนุฉ ุญุชู ูู ุฃุฑุงุฏ ุฐูู
- ูุฌุจ ุญุฐู ุงูุญุฌูุฒุงุช ูุฏููุงู ูุงุญุฏุฉ ูุงุญุฏุฉ

### ุจุนุฏ ุงูุชุญุฏูุซ โ
```
ุงููุฒุฑุนุฉ ุจูุง ุญุฌูุฒุงุช
    โ
ุชุญุฐูุฑ ููู ูุน ุงูุชูุงุตูู
    โ
ุงููุณุชุฎุฏู ูุคูุฏ ุฃู ููุบู
    โ
ุฅุฐุง ุฃูุฏ: ุญุฐู ุงููุฒุฑุนุฉ + ุฌููุน ุงูุญุฌูุฒุงุช
```

**ุงูููุงุฆุฏ:**
- โ ูุฑููุฉ ุฃูุจุฑ ููุฃุฏูู
- โ ุชุญุฐูุฑ ูุงุถุญ ูุดุงูู
- โ ุญุฐู ุณุฑูุน ุนูุฏ ุงูุญุงุฌุฉ

---

## ุขููุฉ ุงูุนูู ุงูุฌุฏูุฏุฉ

### ุงูุณููุงุฑูู 1: ุญุฐู ูุฒุฑุนุฉ ุจุฏูู ุญุฌูุฒุงุช

```
1. ุงูุฃุฏูู ูุถุบุท "ุญุฐู"
2. ูุงูุฐุฉ ุชุฃููุฏ ุนุงุฏูุฉ:
   "ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฒุฑุนุฉ Xุ"
3. ุนูุฏ ุงูุชุฃููุฏ โ ุงูุญุฐู ูุจุงุดุฑุฉ
4. ุฑุณุงูุฉ ูุฌุงุญ: "ุชู ุญุฐู ุงููุฒุฑุนุฉ ุจูุฌุงุญ"
```

**ุงูุฎุทูุงุช:**
```javascript
handleDeleteClick(farm)
    โ
showDeleteConfirm = true (ูุงูุฐุฉ ุงูุญุฐู ุงูุฃููู)
    โ
handleConfirmDelete()
    โ
ูุญุต ุงูุญุฌูุฒุงุช: 0 ุญุฌุฒ
    โ
ุญุฐู ุงููุฒุฑุนุฉ ูุจุงุดุฑุฉ โ
```

### ุงูุณููุงุฑูู 2: ุญุฐู ูุฒุฑุนุฉ ุจูุง ุญุฌูุฒุงุช โ๏ธ

```
1. ุงูุฃุฏูู ูุถุบุท "ุญุฐู"
2. ูุงูุฐุฉ ุชุฃููุฏ ุนุงุฏูุฉ:
   "ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฒุฑุนุฉ Xุ"
3. ุนูุฏ ุงูุชุฃููุฏ:
   โ
4. ูุญุต ุงูุญุฌูุฒุงุช โ ููุฌุฏ 5 ุญุฌูุฒุงุช
5. ูุงูุฐุฉ ุชุญุฐูุฑ ุฅุถุงููุฉ:

   โ๏ธ ุชุญุฐูุฑ ูุงู โ๏ธ

   ุงููุฒุฑุนุฉ "ูุฒุฑุนุฉ ุงููุฎูู" ุชุญุชูู ุนูู 5 ุญุฌูุฒุงุช.

   ุญุฐู ูุฐู ุงููุฒุฑุนุฉ ุณูุคุฏู ุฅูู:
   โข ุญุฐู ุฌููุน ุงูู 5 ุญุฌูุฒุงุช ููุงุฆูุงู
   โข ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ (ุงูุนููุฏุ ุงูููุงูุ ุงูุฑุณุงุฆู)
   โข ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก

   ูู ุฃูุช ูุชุฃูุฏ ุชูุงูุงู ูู ุงููุชุงุจุนุฉุ

   [ุฅูุบุงุก]  [ููุงูู]

6a. ุฅุฐุง ุฃูุบู โ ุงูุนูุฏุฉ ุจุฏูู ุญุฐู
6b. ุฅุฐุง ูุงูู โ ุญุฐู ุงููุฒุฑุนุฉ + ุฌููุน ุงูุญุฌูุฒุงุช
7. ุฑุณุงูุฉ ูุฌุงุญ:
   "ุชู ุญุฐู ุงููุฒุฑุนุฉ 'ูุฒุฑุนุฉ ุงููุฎูู' ุจูุฌุงุญ
    ุชู ุญุฐู 5 ุญุฌูุฒุงุช ูุฑุชุจุท"
```

**ุงูุฎุทูุงุช:**
```javascript
handleDeleteClick(farm)
    โ
showDeleteConfirm = true (ูุงูุฐุฉ ุงูุญุฐู ุงูุฃููู)
    โ
handleConfirmDelete()
    โ
ูุญุต ุงูุญุฌูุฒุงุช: 5 ุญุฌูุฒุงุช
    โ
window.confirm() โ ูุงูุฐุฉ ุชุญุฐูุฑ ุซุงููุฉ
    โ
ุงููุณุชุฎุฏู ูุฎุชุงุฑ:
โโ ููุงูู โ ุญุฐู ุงููุฒุฑุนุฉ + CASCADE ุญุฐู ุงูุญุฌูุฒุงุช โ
โโ ุฅูุบุงุก โ ุฅูุบุงุก ุงูุนูููุฉ โ
```

---

## ุงูููุฏ ุงููุญุฏุซ

### ุงูุฏุงูุฉ ุงูุฌุฏูุฏุฉ: handleConfirmDelete

```typescript
const handleConfirmDelete = async () => {
  if (!selectedFarm) return;

  setIsDeleting(true);
  try {
    // 1. ูุญุต ุนุฏุฏ ุงูุญุฌูุฒุงุช
    const { count: reservationsCount } = await supabase
      .from('reservations')
      .select('*', { count: 'exact', head: true })
      .eq('farm_id', selectedFarm.id);

    // 2. ุฅุฐุง ููุฌุฏุช ุญุฌูุฒุงุช โ ุนุฑุถ ุชุญุฐูุฑ ุฅุถุงูู
    if (reservationsCount && reservationsCount > 0) {
      setIsDeleting(false);

      const confirmMessage =
        `โ๏ธ ุชุญุฐูุฑ ูุงู โ๏ธ\n\n` +
        `ุงููุฒุฑุนุฉ "${selectedFarm.name_ar}" ุชุญุชูู ุนูู ${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'}.\n\n` +
        `ุญุฐู ูุฐู ุงููุฒุฑุนุฉ ุณูุคุฏู ุฅูู:\n` +
        `โข ุญุฐู ุฌููุน ุงูู ${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'} ููุงุฆูุงู\n` +
        `โข ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ (ุงูุนููุฏุ ุงูููุงูุ ุงูุฑุณุงุฆู)\n` +
        `โข ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก\n\n` +
        `ูู ุฃูุช ูุชุฃูุฏ ุชูุงูุงู ูู ุงููุชุงุจุนุฉุ`;

      const userConfirmed = window.confirm(confirmMessage);

      // 3. ุฅุฐุง ุฃูุบู ุงููุณุชุฎุฏู โ ุฅููุงุก
      if (!userConfirmed) {
        setShowDeleteConfirm(false);
        return;
      }

      setIsDeleting(true);
    }

    // 4. ุชูููุฐ ุงูุญุฐู
    const { error } = await supabase
      .from('farms')
      .delete()
      .eq('id', selectedFarm.id);

    if (error) {
      console.error('Error deleting farm:', error);
      if (error.code === '23503') {
        alert(
          'ุญุฏุซ ุฎุทุฃ: ุงููุฒุฑุนุฉ ูุฑุชุจุทุฉ ุจุจูุงูุงุช ุฃุฎุฑู ูู ุงููุธุงู.\n\n' +
          'ูุฑุฌู ุงูุงุชุตุงู ุจุงูุฏุนู ุงูููู.'
        );
      } else {
        alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงููุฒุฑุนุฉ');
      }
      setIsDeleting(false);
      return;
    }

    // 5. ุฑุณุงูุฉ ูุฌุงุญ ูุน ุงูุชูุงุตูู
    alert(
      `ุชู ุญุฐู ุงููุฒุฑุนุฉ "${selectedFarm.name_ar}" ุจูุฌุงุญ` +
      (reservationsCount && reservationsCount > 0
        ? `\n\nุชู ุญุฐู ${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'} ูุฑุชุจุท`
        : ''
      )
    );

    setShowDeleteConfirm(false);
    setSelectedFarm(null);
    setRefreshTrigger(prev => prev + 1);
  } catch (err) {
    console.error('Unexpected error deleting farm:', err);
    alert('ุญุฏุซ ุฎุทุฃ ุบูุฑ ูุชููุน');
    setIsDeleting(false);
  } finally {
    setIsDeleting(false);
  }
};
```

---

## ูุฑุงุญู ุงูุชุฃููุฏ (Two-Step Confirmation)

### ุงููุฑุญูุฉ ุงูุฃููู: ูุงูุฐุฉ ุงูุญุฐู ุงูุนุงุฏูุฉ

**ุงููููู:** Modal ุฌููู ูุน ุฃููููุฉ ุชุญุฐูุฑ

```jsx
{showDeleteConfirm && selectedFarm && (
  <div className="fixed inset-0 bg-black/50 z-50...">
    <div className="bg-white rounded-2xl...">
      <AlertCircle className="w-8 h-8 text-red-600" />
      <h3>ุชุฃููุฏ ุงูุญุฐู</h3>
      <p>ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฒุฑุนุฉ {selectedFarm.name_ar}ุ</p>
      <button onClick={handleConfirmDelete}>ุญุฐู ููุงุฆูุงู</button>
    </div>
  </div>
)}
```

**ุงูุบุฑุถ:**
- โ ุชุฃููุฏ ุฃููู ูู ุงููุณุชุฎุฏู
- โ ูุงุฌูุฉ ุฌูููุฉ ููุฑูุญุฉ
- โ ูููู ุงูุฅูุบุงุก ุจุณูููุฉ

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุชุญุฐูุฑ ุงูุญุฌูุฒุงุช (ุฅุฐุง ููุฌุฏุช)

**ุงููููู:** `window.confirm()` ูุน ุฑุณุงูุฉ ููุตูุฉ

```
โ๏ธ ุชุญุฐูุฑ ูุงู โ๏ธ

ุงููุฒุฑุนุฉ "ูุฒุฑุนุฉ ุงููุฎูู" ุชุญุชูู ุนูู 5 ุญุฌูุฒุงุช.

ุญุฐู ูุฐู ุงููุฒุฑุนุฉ ุณูุคุฏู ุฅูู:
โข ุญุฐู ุฌููุน ุงูู 5 ุญุฌูุฒุงุช ููุงุฆูุงู
โข ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ (ุงูุนููุฏุ ุงูููุงูุ ุงูุฑุณุงุฆู)
โข ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก

ูู ุฃูุช ูุชุฃูุฏ ุชูุงูุงู ูู ุงููุชุงุจุนุฉุ
```

**ุงูุบุฑุถ:**
- โ๏ธ ุชุญุฐูุฑ ููู ูููุตู
- โ๏ธ ุชูุถูุญ ุงูุชุจุนุงุช ุจุฏูุฉ
- โ๏ธ ุนุฑุถ ุนุฏุฏ ุงูุญุฌูุฒุงุช ุงููุญุฏุฏุฉ
- โ๏ธ ุชุฃููุฏ ููุงุฆู ูุจู ุงูุญุฐู ุงูุดุงูู

---

## ุงูุชูุงุตูู ุงูุชูููุฉ

### 1. ูุญุต ุงูุญุฌูุฒุงุช

```typescript
const { count: reservationsCount } = await supabase
  .from('reservations')
  .select('*', { count: 'exact', head: true })
  .eq('farm_id', selectedFarm.id);
```

**ุงูุฎุตุงุฆุต:**
- `count: 'exact'` โ ุนุฏุฏ ุฏููู ููุญุฌูุฒุงุช
- `head: true` โ ูุง ูุฑูุฏ ุงูุจูุงูุงุชุ ููุท ุงูุนุฏุฏ (ุฃุณุฑุน)
- `eq('farm_id', ...)` โ ููุท ุญุฌูุฒุงุช ูุฐู ุงููุฒุฑุนุฉ

### 2. ุฑุณุงูุฉ ุงูุชุญุฐูุฑ ุงูุฏููุงููููุฉ

```typescript
const confirmMessage =
  `โ๏ธ ุชุญุฐูุฑ ูุงู โ๏ธ\n\n` +
  `ุงููุฒุฑุนุฉ "${selectedFarm.name_ar}" ุชุญุชูู ุนูู ${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'}.\n\n` +
  `ุญุฐู ูุฐู ุงููุฒุฑุนุฉ ุณูุคุฏู ุฅูู:\n` +
  `โข ุญุฐู ุฌููุน ุงูู ${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'} ููุงุฆูุงู\n` +
  `โข ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ (ุงูุนููุฏุ ุงูููุงูุ ุงูุฑุณุงุฆู)\n` +
  `โข ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก\n\n` +
  `ูู ุฃูุช ูุชุฃูุฏ ุชูุงูุงู ูู ุงููุชุงุจุนุฉุ`;
```

**ุงูููุฒุงุช:**
- โ ุงุณู ุงููุฒุฑุนุฉ ุงููุญุฏุฏุฉ
- โ ุนุฏุฏ ุงูุญุฌูุฒุงุช ุงูุฏููู
- โ ุงุณุชุฎุฏุงู ุตูุบุฉ ุงูููุฑุฏ/ุงูุฌูุน ุญุณุจ ุงูุนุฏุฏ
- โ ูุงุฆูุฉ ุจุงูุชุจุนุงุช
- โ ุชุฃููุฏ ุนุฏู ุงููุฏุฑุฉ ุนูู ุงูุชุฑุงุฌุน

### 3. CASCADE ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช

**ูู Migration ุงูุณุงุจูุฉ:**
```sql
ALTER TABLE reservations
  ADD CONSTRAINT reservations_farm_id_fkey
  FOREIGN KEY (farm_id)
  REFERENCES farms(id)
  ON DELETE CASCADE;
```

**ุงูุชุฃุซูุฑ:**
```
ุญุฐู ูุฒุฑุนุฉ (farm_id = X)
    โ CASCADE
ุญุฐู ุชููุงุฆู ูู:
โโ reservations (farm_id = X)
โ  โโ CASCADE โ reservation_items
โโ farm_tasks (farm_id = X)
โโ farm_contracts (farm_id = X)
โโ investor_messages (farm_id = X)
```

### 4. ุฑุณุงูุฉ ุงููุฌุงุญ ุงูููุตูุฉ

```typescript
alert(
  `ุชู ุญุฐู ุงููุฒุฑุนุฉ "${selectedFarm.name_ar}" ุจูุฌุงุญ` +
  (reservationsCount && reservationsCount > 0
    ? `\n\nุชู ุญุฐู ${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'} ูุฑุชุจุท`
    : ''
  )
);
```

**ุฃูุซูุฉ:**

**ุจุฏูู ุญุฌูุฒุงุช:**
```
ุชู ุญุฐู ุงููุฒุฑุนุฉ "ูุฒุฑุนุฉ ุงูุฒูุชูู" ุจูุฌุงุญ
```

**ูุน 3 ุญุฌูุฒุงุช:**
```
ุชู ุญุฐู ุงููุฒุฑุนุฉ "ูุฒุฑุนุฉ ุงููุฎูู" ุจูุฌุงุญ

ุชู ุญุฐู 3 ุญุฌูุฒุงุช ูุฑุชุจุท
```

**ูุน ุญุฌุฒ ูุงุญุฏ:**
```
ุชู ุญุฐู ุงููุฒุฑุนุฉ "ูุฒุฑุนุฉ ุงูุชูู" ุจูุฌุงุญ

ุชู ุญุฐู 1 ุญุฌุฒ ูุฑุชุจุท
```

---

## ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู A: ูุฒุฑุนุฉ ุชุฌุฑูุจูุฉ ุจุฏูู ุญุฌูุฒุงุช
```
ุงููููู: ุฃุฏูู ุฃูุดุฃ ูุฒุฑุนุฉ ููุงุฎุชุจุงุฑ ููุฑูุฏ ุญุฐููุง

ุงูุฎุทูุงุช:
1. ุญุฐู
2. ุชุฃููุฏ
3. โ ุชู ุงูุญุฐู ููุฑุงู

ุงูููุช: < 3 ุซูุงูู
```

### ุณููุงุฑูู B: ูุฒุฑุนุฉ ูุฏููุฉ ุจูุง 50 ุญุฌุฒ ููุชูู
```
ุงููููู: ูุฒุฑุนุฉ ูุฏููุฉ ุชููู ุงูุนูู ุจูุงุ ููู ุจูุง ุญุฌูุฒุงุช ูุฏููุฉ

ุงูุฎุทูุงุช:
1. ุญุฐู
2. ุชุฃููุฏ ุฃููู
3. ุชุญุฐูุฑ: "ุชุญุชูู ุนูู 50 ุญุฌูุฒุงุช..."
4. ูุฑุงุกุฉ ุงูุชุญุฐูุฑ ุจุนูุงูุฉ
5. ุชุฃููุฏ ููุงุฆู
6. โ ุญุฐู ุงููุฒุฑุนุฉ + 50 ุญุฌุฒ
7. ุฑุณุงูุฉ: "ุชู ุญุฐู ุงููุฒุฑุนุฉ + 50 ุญุฌูุฒุงุช"

ุงูููุช: 10-20 ุซุงููุฉ (ูุน ูุฑุงุกุฉ ุงูุชุญุฐูุฑ)
```

### ุณููุงุฑูู C: ุญุฐู ุจุงูุฎุทุฃ ุซู ุชุฑุงุฌุน
```
ุงููููู: ุฃุฏูู ุถุบุท ุญุฐู ุจุงูุฎุทุฃ ุนูู ูุฒุฑุนุฉ ูุดุทุฉ ุจูุง 100 ุญุฌุฒ

ุงูุฎุทูุงุช:
1. ุญุฐู (ุจุงูุฎุทุฃ)
2. ุชุฃููุฏ ุฃููู (ูู ููุชุจู)
3. ุชุญุฐูุฑ: "ุชุญุชูู ุนูู 100 ุญุฌูุฒุงุช..."
4. ูุฑุงุกุฉ "100 ุญุฌูุฒุงุช" โ ุชูุจูู!
5. ุฅูุบุงุก โ
6. โ ุงููุฒุฑุนุฉ ูุญููุธุฉุ ูู ููุญุฐู ุดูุก

ุงููุชูุฌุฉ: ุงูุชุญุฐูุฑ ุงูููู ููุน ุฎุทุฃ ูุจูุฑ
```

### ุณููุงุฑูู D: ุชูุธูู ุดุงูู ูููุธุงู
```
ุงููููู: ุญุฐู 10 ูุฒุงุฑุน ูุฏููุฉ ุฏูุนุฉ ูุงุญุฏุฉ

ุงููุฒุฑุนุฉ 1: 0 ุญุฌูุฒุงุช โ ุญุฐู ุณุฑูุน โ
ุงููุฒุฑุนุฉ 2: 5 ุญุฌูุฒุงุช โ ุชุญุฐูุฑ โ ุชุฃููุฏ โ ุญุฐู โ
ุงููุฒุฑุนุฉ 3: 0 ุญุฌูุฒุงุช โ ุญุฐู ุณุฑูุน โ
ุงููุฒุฑุนุฉ 4: 12 ุญุฌูุฒุงุช โ ุชุญุฐูุฑ โ ุชุฃููุฏ โ ุญุฐู โ
...

ุงููุชูุฌุฉ: ุนูููุฉ ุณุฑูุนุฉ ูุน ุญูุงูุฉ ูุงููุฉ
```

---

## ุงูุฃูุงู ูุงูุญูุงูุฉ

### 1. ุชุฃููุฏ ูุชุนุฏุฏ ุงููุฑุงุญู

```
ุงููุฑุญูุฉ 1: Modal ุฌููู (UI)
    โ
    ุฅุฐุง ุงููุณุชุฎุฏู ุฃูุฏ
    โ
ูุญุต ุงูุญุฌูุฒุงุช
    โ
    ุฅุฐุง ููุฌุฏุช ุญุฌูุฒุงุช
    โ
ุงููุฑุญูุฉ 2: window.confirm() (ุชุญุฐูุฑ ููู)
    โ
    ุฅุฐุง ุงููุณุชุฎุฏู ุฃูุฏ ูุฑุฉ ุฃุฎุฑู
    โ
ุชูููุฐ ุงูุญุฐู
```

**ุงูููุงุฆุฏ:**
- โ ุตุนูุจุฉ ุงูุญุฐู ุจุงูุฎุทุฃ
- โ ุงููุณุชุฎุฏู ูููู ุงูุชุจุนุงุช ุชูุงูุงู
- โ ูุฑุตุชุงู ููุชุฑุงุฌุน

### 2. ุฑุณุงุฆู ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

**ูุจู:**
```
Error 23503: foreign key constraint violation
```

**ุจุนุฏ:**
```
โ๏ธ ุชุญุฐูุฑ ูุงู โ๏ธ

ุงููุฒุฑุนุฉ "ูุฒุฑุนุฉ ุงููุฎูู" ุชุญุชูู ุนูู 5 ุญุฌูุฒุงุช.

ุญุฐู ูุฐู ุงููุฒุฑุนุฉ ุณูุคุฏู ุฅูู:
โข ุญุฐู ุฌููุน ุงูู 5 ุญุฌูุฒุงุช ููุงุฆูุงู
โข ุญุฐู ุฌููุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ
โข ูุง ูููู ุงูุชุฑุงุฌุน ุนู ูุฐุง ุงูุฅุฌุฑุงุก
```

### 3. ุนุฏุงุฏุงุช ุฏูููุฉ

```typescript
${reservationsCount} ${reservationsCount === 1 ? 'ุญุฌุฒ' : 'ุญุฌูุฒุงุช'}
```

**ุฃูุซูุฉ:**
- 1 ุญุฌุฒ (ููุฑุฏ)
- 2 ุญุฌูุฒุงุช (ุฌูุน)
- 10 ุญุฌูุฒุงุช (ุฌูุน)
- 100 ุญุฌูุฒุงุช (ุฌูุน)

### 4. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก

```typescript
if (error) {
  console.error('Error deleting farm:', error);
  if (error.code === '23503') {
    alert('ุญุฏุซ ุฎุทุฃ: ุงููุฒุฑุนุฉ ูุฑุชุจุทุฉ ุจุจูุงูุงุช ุฃุฎุฑู...');
  } else {
    alert('ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุญุฐู ุงููุฒุฑุนุฉ');
  }
  setIsDeleting(false);
  return;
}
```

---

## ุงููุฑู ุจูู ุงููุธุงู ุงููุฏูู ูุงูุฌุฏูุฏ

### ุงููุธุงู ุงููุฏูู

```
ูุฒุฑุนุฉ ุจูุง ุญุฌูุฒุงุช
    โ
ุญุฐู
    โ
โ ุฎุทุฃ: "ูุง ูููู ุงูุญุฐู"
    โ
ูุฌุจ:
1. ูุชุญ ุตูุญุฉ ุงูุญุฌูุฒุงุช
2. ุงูุจุญุซ ุนู ุญุฌูุฒุงุช ูุฐู ุงููุฒุฑุนุฉ
3. ุญุฐู ูู ุญุฌุฒ ูุฏููุงู
4. ุงูุนูุฏุฉ ูุตูุญุฉ ุงููุฒุงุฑุน
5. ูุญุงููุฉ ุงูุญุฐู ูุฑุฉ ุฃุฎุฑู
    โ
โฑ๏ธ ููุช ุทููู ุฌุฏุงู
```

**ุงููุดุงูู:**
- โ ุจุทุก ุดุฏูุฏ
- โ ุนูููุงุช ูุชุนุฏุฏุฉ
- โ ุงุญุชูุงู ูุณูุงู ุญุฌูุฒุงุช
- โ ุชุฌุฑุจุฉ ุณูุฆุฉ

### ุงููุธุงู ุงูุฌุฏูุฏ

```
ูุฒุฑุนุฉ ุจูุง ุญุฌูุฒุงุช
    โ
ุญุฐู
    โ
ุชุฃููุฏ ุฃููู
    โ
โ๏ธ ุชุญุฐูุฑ: "5 ุญุฌูุฒุงุช ุณูุชู ุญุฐููุง"
    โ
ุชุฃููุฏ ููุงุฆู
    โ
โ ุญุฐู ุดุงูู ูู ุฎุทูุฉ ูุงุญุฏุฉ
    โ
โฑ๏ธ 10 ุซูุงูู ููุท
```

**ุงููููุฒุงุช:**
- โ ุณุฑูุน ุฌุฏุงู
- โ ุนูููุฉ ูุงุญุฏุฉ
- โ ุชุญุฐูุฑ ูุงุถุญ
- โ ุชุฌุฑุจุฉ ููุชุงุฒุฉ

---

## ุงูููุงุฑูุฉ ุงูุดุงููุฉ

| ุงูููุฒุฉ | ุงููุธุงู ุงููุฏูู | ุงููุธุงู ุงูุฌุฏูุฏ |
|--------|---------------|---------------|
| **ุญุฐู ูุฒุฑุนุฉ ูุงุฑุบุฉ** | โ ุณุฑูุน | โ ุณุฑูุน |
| **ุญุฐู ูุฒุฑุนุฉ ุจูุง ุญุฌูุฒุงุช** | โ ููููุน | โ ูููู ูุน ุชุญุฐูุฑ |
| **ุนุฏุฏ ุงูุฎุทูุงุช** | 6+ ุฎุทูุงุช | 3 ุฎุทูุงุช |
| **ุงูููุช ุงููุทููุจ** | 2-5 ุฏูุงุฆู | 10 ุซูุงูู |
| **ุงูุชุญุฐูุฑุงุช** | ุฑุณุงูุฉ ุฎุทุฃ ููุท | ุชุญุฐูุฑุงู ูุงุถุญุงู |
| **ุนุฏุฏ ุงูุญุฌูุฒุงุช** | ูุง ููุนุฑุถ | โ ููุนุฑุถ ุจูุถูุญ |
| **ุงูุชุจุนุงุช** | ุบูุฑ ููุถุญุฉ | โ ูุงุฆูุฉ ููุตูุฉ |
| **ุฅููุงููุฉ ุงูุชุฑุงุฌุน** | ูุนู (ุจุนุฏ ุฑุณุงูุฉ ุงูุฎุทุฃ) | ูุนู (ูุฑุญูุชุงู) |
| **ุงูุญูุงูุฉ ูู ุงูุฎุทุฃ** | ุถุนููุฉ | โ ูููุฉ ุฌุฏุงู |
| **ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู** | ุณูุฆุฉ | โ ููุชุงุฒุฉ |

---

## ุงูุฎูุงุตุฉ

### ูุง ุชู ุชุญุฏูุซู โ

1. **ุฅุฒุงูุฉ ุงูุญุธุฑ:**
   - โ ุงูุณูุงุญ ุจุญุฐู ุงููุฒุงุฑุน ุงูุชู ุจูุง ุญุฌูุฒุงุช
   - โ CASCADE ูุญุฐู ุงูุญุฌูุฒุงุช ุชููุงุฆูุงู

2. **ูุธุงู ุชุญุฐูุฑ ูุชุนุฏุฏ ุงููุฑุงุญู:**
   - โ ุชุฃููุฏ ุฃููู (Modal ุฌููู)
   - โ ุชุญุฐูุฑ ููู (window.confirm)
   - โ ุฑุณุงุฆู ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ

3. **ูุนูููุงุช ุฏูููุฉ:**
   - โ ุนุฑุถ ุนุฏุฏ ุงูุญุฌูุฒุงุช
   - โ ูุงุฆูุฉ ุจุฌููุน ุงูุชุจุนุงุช
   - โ ุชุฃููุฏ ุนุฏู ุงููุฏุฑุฉ ุนูู ุงูุชุฑุงุฌุน

4. **ุฑุณุงูุฉ ูุฌุงุญ ููุตูุฉ:**
   - โ ุงุณู ุงููุฒุฑุนุฉ ุงููุญุฐููุฉ
   - โ ุนุฏุฏ ุงูุญุฌูุฒุงุช ุงููุญุฐููุฉ
   - โ ุงุณุชุฎุฏุงู ุตูุบ ุงููุญู ุงูุตุญูุญุฉ

### ุงูููุงุฆุฏ ุงูููุงุฆูุฉ

**ููุฃุฏูู:**
- โก ุณุฑุนุฉ ูู ุงูุญุฐู
- ๐ก๏ธ ุญูุงูุฉ ูููุฉ ูู ุงูุฃุฎุทุงุก
- ๐ ูุนูููุงุช ูุงุถุญุฉ
- โจ ุชุฌุฑุจุฉ ุณูุณุฉ

**ูููุธุงู:**
- ๐ CASCADE ูุนูู ุจููุงุกุฉ
- ๐๏ธ ุชูุธูู ุดุงูู ููุจูุงูุงุช
- ๐ ุณูุงูุฉ ุงูุจูุงูุงุช ูุญููุธุฉ
- ๐ ุฃุฏุงุก ููุชุงุฒ

**ููููุตุฉ:**
- ๐ผ ุฅุฏุงุฑุฉ ูุฑูุฉ
- ๐ฏ ุฏูุฉ ุนุงููุฉ
- ๐ ุฅูุชุงุฌูุฉ ุฃูุถู
- โ ููุซูููุฉ ูุงููุฉ

---

## ุงูุญุงูุฉ ุงูููุงุฆูุฉ

```
๐ข ุงูุญุฐู: ูุนูู ุจูุฑููุฉ 100%
๐ข ุงูุชุญุฐูุฑุงุช: ูุงุถุญุฉ ููููุฉ
๐ข CASCADE: ููุนูู ููุนูู ุชููุงุฆูุงู
๐ข ุงูุญูุงูุฉ: ูุชุนุฏุฏุฉ ุงููุฑุงุญู
๐ข Build: ูุงุฌุญ โ
```

### ุงููููุงุช ุงููุนุฏูุฉ

**FarmCardsManagement.tsx**
- `handleConfirmDelete()` โ ุฏุนู ุงูุชุญุฐูุฑ ุงููุชุนุฏุฏ ุงููุฑุงุญู
- ุนุฑุถ ุนุฏุฏ ุงูุญุฌูุฒุงุช
- ุฑุณุงูุฉ ูุฌุงุญ ููุตูุฉ
- ูุนุงูุฌุฉ ุงูุตูุบ (ููุฑุฏ/ุฌูุน)

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2026-02-02
**Build:** ูุงุฌุญ ุจุฏูู ุฃุฎุทุงุก โ
**ุงููุธุงุฆู:** ุญุฐู ูุฑู + ุญูุงูุฉ ูููุฉ โ
**ุชุฌุฑุจุฉ ุงููุณุชุฎุฏู:** ููุชุงุฒุฉ โ
