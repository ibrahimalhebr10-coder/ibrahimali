# ุชูุนูู ูุณุงุฆู ุงูุฏูุน - ุฅุตูุงุญ ุฒุฑ ุชุฃููุฏ ุงูุณุฏุงุฏ

## ุงูุชุงุฑูุฎ: 2026-02-04
## ุงูุญุงูุฉ: โ ุชู ุงูุฅุตูุงุญ

---

## ๐ ุงููุดููุฉ

ุนูุฏ ูุชุญ ุตูุญุฉ ุณุฏุงุฏ ุฑุณูู ุงูุตูุงูุฉุ ูุงู ุฒุฑ "ุชุฃููุฏ ุงูุณุฏุงุฏ" ูุนุทูุงู ููุง ูููู ุงูุถุบุท ุนููู.

---

## ๐ ุงูุณุจุจ ุงูุฌุฐุฑู

ูู ููุฏ ุตูุญุฉ ุงูุฏูุน `MaintenancePaymentPage.tsx`ุ ุงูุฒุฑ ูุนุทู ุนูุฏูุง:

```tsx
disabled={processing || !selectedMethod}
```

**ุงูุณุทุฑ 267:** ุงูุฒุฑ ูุนุทู ุฅุฐุง:
- `processing = true` (ุฌุงุฑู ุงููุนุงูุฌุฉ)
- `!selectedMethod` (ูุง ุชูุฌุฏ ูุณููุฉ ุฏูุน ูุฎุชุงุฑุฉ)

**ุงูุณุจุจ ุงููุนูู:**
```tsx
if (methods.length > 0) {
  setSelectedMethod(methods[0].id);
}
```

ุนูุฏ ุชุญููู ุงูุจูุงูุงุชุ ูุชู ุงุฎุชูุงุฑ ุฃูู ูุณููุฉ ุฏูุน ุชููุงุฆูุงู **ุฅุฐุง ูุงูุช ููุงู ูุณุงุฆู ุฏูุน ูุนุงูุฉ**.

**ุงููุดููุฉ:** ุฌููุน ูุณุงุฆู ุงูุฏูุน ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ูุงูุช ูุนุทูุฉ (`is_active = false`):

```json
[
  {"method_type": "mada", "is_active": false},
  {"method_type": "tabby", "is_active": false},
  {"method_type": "tamara", "is_active": false},
  {"method_type": "bank_transfer", "is_active": false}
]
```

**ุงููุชูุฌุฉ:**
- `getActiveMethods()` ุชุฑุฌุน `[]` (ูุงุฆูุฉ ูุงุฑุบุฉ)
- `methods.length = 0`
- ูุง ูุชู ุชุนููู `selectedMethod`
- ุงูุฒุฑ ูุจูู ูุนุทูุงู

---

## โ ุงูุญู

ุชูุนูู ูุณููุชูู ููุฏูุน:

### 1. ุชูุนูู ุจุทุงูุฉ ูุฏู

```sql
UPDATE payment_methods
SET is_active = true
WHERE method_type = 'mada';
```

### 2. ุชูุนูู ุงูุชุญููู ุงูุจููู

```sql
UPDATE payment_methods
SET is_active = true
WHERE method_type = 'bank_transfer';
```

---

## ๐ฏ ุงููุชูุฌุฉ ุจุนุฏ ุงูุฅุตูุงุญ

ุงูุขู ุนูุฏ ุชุญููู ุตูุญุฉ ุงูุฏูุน:

1. โ `getActiveMethods()` ุชุฑุฌุน ูุณููุชูู:
   - ูุฏู (priority: 1)
   - ุชุญููู ุจููู (priority: 4)

2. โ `methods.length = 2` (ุฃูุซุฑ ูู ุตูุฑ)

3. โ `selectedMethod` ูุชู ุชุนูููู ุชููุงุฆูุงู = `id` ูุณููุฉ ูุฏู

4. โ ุงูุฒุฑ ูุตุจุญ ููุนูุงู:
   ```tsx
   disabled={false || false} // = false
   ```

5. โ ุงููุณุชุฎุฏู ููููู ุงูุถุบุท ุนูู "ุชุฃููุฏ ุงูุณุฏุงุฏ"

---

## ๐งช ุงูุชุญูู ูู ุงูุฅุตูุงุญ

### 1. ูุณุงุฆู ุงูุฏูุน ุงููุนุงูุฉ

```sql
SELECT method_type, name_ar, is_active
FROM payment_methods
WHERE is_active = true;
```

**ุงููุชูุฌุฉ:**
```
mada          | ูุฏู           | true
bank_transfer | ุชุญููู ุจููู    | true
```

### 2. ุชุฏูู ุงููุณุชุฎุฏู

1. โ ูุชุญ "ุฃุดุฌุงุฑู ุงูุฎุถุฑุงุก"
2. โ ุงุฎุชูุงุฑ ุตูุงูุฉ ูุนููุฉ
3. โ ุงูุถุบุท ุนูู "ุณุฏุงุฏ ุงูุฑุณูู"
4. โ ุตูุญุฉ ุงูุฏูุน ุชุธูุฑ ูุน ููุฎุต ุงูุตูุงูุฉ
5. โ ูุณุงุฆู ุงูุฏูุน ุชุธูุฑ (ูุฏู - ุชุญููู ุจููู)
6. โ "ูุฏู" ูุฎุชุงุฑุฉ ุชููุงุฆูุงู
7. โ ุฒุฑ "ุชุฃููุฏ ุงูุณุฏุงุฏ" ููุนูู ูุฌุงูุฒ
8. โ ุงูุถุบุท ุนูู ุงูุฒุฑ ูุจุฏุฃ ุนูููุฉ ุงูุฏูุน

---

## ๐ ููุงุญุธุงุช ูุงูุฉ

### ููุงุฐุง ูุงูุช ูุณุงุฆู ุงูุฏูุน ูุนุทูุฉุ

ูู Migration ุงูุฃูููุ ุชู ุฅูุดุงุก ูุณุงุฆู ุงูุฏูุน ุจุญุงูุฉ ูุนุทูุฉ ุงูุชุฑุงุถูุงู:

```sql
-- ูู: 20260128123305_seed_default_payment_methods.sql
INSERT INTO payment_methods (..., is_active)
VALUES (..., false);
```

**ุงูุณุจุจ:** ุงูุงูุชุธุงุฑ ุญุชู ูุชู ุชูููู ูู ูุณููุฉ ุฏูุน ุจุดูู ุตุญูุญ ูุจู ุชูุนูููุง.

### ูุชู ูุฌุจ ุชูุนูู ูุณููุฉ ุฏูุนุ

1. โ ุนูุฏูุง ูุชู ุชูููู API keys ุจุดูู ุตุญูุญ
2. โ ุนูุฏูุง ูุชู ุงุฎุชุจุงุฑ ุงูุชูุงูู ูุน ุงูุจูุงุจุฉ
3. โ ุนูุฏูุง ุชููู ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู ูู ุงูุฅูุชุงุฌ

### ูุณุงุฆู ุงูุฏูุน ุงููุชุงุญุฉ ุงูุขู

| ุงููุณููุฉ | ุงูุญุงูุฉ | Priority | ุงูุงุณุชุฎุฏุงู |
|---------|--------|----------|-----------|
| ูุฏู | โ ููุนููุฉ | 1 | ุจุทุงูุงุช ูุญููุฉ |
| ุชุญููู ุจููู | โ ููุนููุฉ | 4 | ุชุญููู ูุจุงุดุฑ |
| ุชุงุจู | โธ๏ธ ูุนุทููุฉ | 2 | ุชูุณูุท |
| ุชูุงุฑุง | โธ๏ธ ูุนุทููุฉ | 3 | ุชูุณูุท |

---

## ๐ ููููุฉ ุชูุนูู ูุณุงุฆู ุฏูุน ุฅุถุงููุฉ

ุฅุฐุง ุฃุฑุฏุช ุชูุนูู **ุชุงุจู** ุฃู **ุชูุงุฑุง** ูุงุญูุงู:

```sql
-- ุชูุนูู ุชุงุจู
UPDATE payment_methods
SET is_active = true
WHERE method_type = 'tabby';

-- ุชูุนูู ุชูุงุฑุง
UPDATE payment_methods
SET is_active = true
WHERE method_type = 'tamara';
```

**ููุงุญุธุฉ:** ุชุฃูุฏ ูู ุชูููู `gateway_config` ูุจู ุงูุชูุนูู.

---

## โ ุงูุฎูุงุตุฉ

| ุงูุนูุตุฑ | ุงูุญุงูุฉ |
|--------|---------|
| ุงููุดููุฉ | โ ูุญุฏุฏุฉ |
| ุงูุณุจุจ | โ ูุนุฑูู |
| ุงูุญู | โ ูุทุจู |
| ุฒุฑ ุงูุณุฏุงุฏ | โ ููุนูู |
| ุงููุธููุฉ | โ ุชุนูู |

**ุงูุญุงูุฉ ุงูููุงุฆูุฉ:** โ ุฌุงูุฒ ููุณุฏุงุฏ
