# ุชูุฑูุฑ ุงุฎุชุจุงุฑ ุงููุจูู (UAT) - ุงููุฑุญูุฉ 7

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅุนุฏุงุฏ ุจูุฆุฉ ุงุฎุชุจุงุฑ ูุงููุฉ ูุงุฎุชุจุงุฑ ูุธุงู ุงูุตูุงุญูุงุช ุนูู ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ ูุน ูุณุชุฎุฏููู ูู ุฌููุน ุงูุฃุฏูุงุฑ.

---

## ุงูุจูุฆุฉ ุงูุงุฎุชุจุงุฑูุฉ

### ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ
- **ุงูุงุณู:** ูุฒุฑุนุฉ ุชุฌุฑูุจูุฉ - ุงุฎุชุจุงุฑ ุงููุธุงู
- **ID:** `59d3cf32-dfcd-435f-a6fb-9fefa53c93ef`
- **ุงููููุน:** ููุทูุฉ ุงูุงุฎุชุจุงุฑ - ุงูุณุนูุฏูุฉ
- **ุงูุฃุดุฌุงุฑ:** 100 ุดุฌุฑุฉ (90 ูุชุงุญุฉุ 10 ูุญุฌูุฒุฉ)

### ุงููุณุชุฎุฏููู ุงูุงุฎุชุจุงุฑููู

ุชู ุฅูุดุงุก ุงููุณุชุฎุฏููู ุงูุชุงููุฉ ููุงุฎุชุจุงุฑ:

| ุงูุฏูุฑ | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ุงูุงุณู | Scope | ุงููุฒุงุฑุน ุงููุนููุฉ |
|-------|-------------------|-------|-------|-----------------|
| **ุงููุฏูุฑ ุงูุนุงู** | ibrahimalhebr1@gmail.com | ูุฏูุฑ ุงููุธุงู | all | ุฌููุน ุงููุฒุงุฑุน |
| **ูุฏูุฑ ุงููุฒุงุฑุน** | test.farm.manager@olivefarms.test | ูุฏูุฑ ูุฒุฑุนุฉ ุงุฎุชุจุงุฑู | all | ุฌููุน ุงููุฒุงุฑุน |
| **ูุฏูุฑ ูุฒุฑุนุฉ** | farm.supervisor@olivefarms.test | ูุฏูุฑ ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ | farm | ูุฒุฑุนุฉ ูุงุญุฏุฉ |
| **ูุดุฑู** | supervisor@olivefarms.test | ูุดุฑู ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ | farm | ูุฒุฑุนุฉ ูุงุญุฏุฉ |
| **ุนุงูู** | worker@olivefarms.test | ุนุงูู ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ | tasks | ูุฒุฑุนุฉ ูุงุญุฏุฉ |

### ุงูููุงู ุงูุงุฎุชุจุงุฑูุฉ

ุชู ุฅูุดุงุก 12 ูููุฉ ููุฒุนุฉ ูุงูุชุงูู:

**ููุนุงูู (3 ููุงู):**
1. ุฑู ุฃุดุฌุงุฑ ุงูุฒูุชูู - ุงููุทุงุน A (pending)
2. ูุญุต ูุธุงู ุงูุฑู ุงูุขูู (in_progress)
3. ุชูุธูู ุงููุฎุฒู (completed)

**ูููุดุฑู (2 ููุงู):**
1. ูุฑุงุฌุนุฉ ุชูุฑูุฑ ุงูุตูุงูุฉ ุงูุดูุฑู (pending)
2. ุชุฏุฑูุจ ุงูุนูุงู ุงูุฌุฏุฏ (in_progress)

**ููุฏูุฑ ุงููุฒุฑุนุฉ (2 ููุงู):**
1. ูุฑุงุฌุนุฉ ููุฒุงููุฉ ุงููุฒุฑุนุฉ (pending)
2. ุงุฌุชูุงุน ูุน ุงูููุฑุฏูู (pending)

**ููุฏูุฑ ุงููุฒุงุฑุน (5 ููุงู ูุฏููุฉ):**
1. ุฑู ุฌููุน ุงูุฃุดุฌุงุฑ ูู ุงููุทุงุน A (completed)
2. ุชูููู ุงูุฃุดุฌุงุฑ (in_progress)
3. ุฑุด ุงููุจูุฏุงุช (pending)
4. ุงูุชุญุถูุฑ ููุญุตุงุฏ (pending)
5. ุฅุถุงูุฉ ุงูุฃุณูุฏุฉ (pending)

---

## ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### ุงูุณููุงุฑูู 1๏ธโฃ: ูุฏูุฑ ูุฒุฑุนุฉ ูุฑู ูุฒุฑุนุชู ููุท

**ุงูุฏูุฑ ุงููุฎุชุจุฑ:** ูุฏูุฑ ูุฒุฑุนุฉ (farm_supervisor)
**ุงูุจุฑูุฏ:** farm.supervisor@olivefarms.test

#### ูุง ูุฌุจ ุฃู ูุฑุงู:

โ **ุงููุฒุงุฑุน:**
- ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ ููุท (ุงููุนููุฉ ูู)
- ูุง ูุฑู ุจุงูู ุงููุฒุงุฑุน ูู ุงููุธุงู

โ **ุงูููุงู:**
- ููุงูู ุงูุฎุงุตุฉ (2 ููุงู)
- ููุงู ุงููุดุฑู (2 ููุงู) - ูุฃูู ูุฏูุฑ ุงููุฒุฑุนุฉ
- ููุงู ุงูุนุงูู (3 ููุงู) - ูุฃูู ูุฏูุฑ ุงููุฒุฑุนุฉ

โ **ุงูุชุจููุจุงุช ูู ูุญุตููู:**
- ุงูุนูููุงุช (Operations)
- ุงูุตูุงูุฉ (Maintenance)
- ุงูููุงู (Tasks)
- ุงููุนุฏุงุช (Equipment)

โ **ูุง ูุง ูุฌุจ ุฃู ูุฑุงู:**
- ุงููุงููุฉ (Finance) - ููุณ ูุฏูู ุงูุตูุงุญูุฉ
- ูุฒุงุฑุน ุฃุฎุฑู ูู ุงููุธุงู
- ุฎูุงุฑ "ุฅุฏุงุฑุฉ ุงููุฒุงุฑุน" ูู ุงูุฅุฏุงุฑุฉ

#### ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ:

```
1. ุชุณุฌูู ุงูุฏุฎูู ุจู farm.supervisor@olivefarms.test
2. ุงูุชุญูู ูู ุงูุชูุฌูู ุงูุชููุงุฆู โ ูุญุตููู
3. ุงูุชุญูู ูู ุนุฑุถ ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ ููุท
4. ุงูุชุญูู ูู ุงูุชุจููุจุงุช ุงููุชุงุญุฉ (4 ุชุจููุจุงุช)
5. ุงูุชุญูู ูู ุนุฏู ุธููุฑ ุชุจููุจ ุงููุงููุฉ
6. ุงูุชุญูู ูู ุฑุคูุฉ ุฌููุน ููุงู ุงููุฒุฑุนุฉ (7 ููุงู)
7. ูุญุงููุฉ ุงููุตูู ููุฒุฑุนุฉ ุฃุฎุฑู (ูุฌุจ ุฃู ููุดู)
```

#### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

| ุงูุงุฎุชุจุงุฑ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|----------|------------------|
| ุงูุชูุฌูู ุงูุชููุงุฆู | โ ูุฐูุจ ููุญุตููู ูุจุงุดุฑุฉ |
| ุนุฏุฏ ุงููุฒุงุฑุน ุงููุนุฑูุถุฉ | โ 1 (ุงูุชุฌุฑูุจูุฉ ููุท) |
| ุนุฏุฏ ุงูุชุจููุจุงุช | โ 4 (ุจุฏูู ุงููุงููุฉ) |
| ุนุฏุฏ ุงูููุงู | โ 7 (ููุงูู + ููุงู ูุฑููู) |
| ุงููุตูู ููุฒุฑุนุฉ ุฃุฎุฑู | โ ูุฑููุถ (RLS) |

---

### ุงูุณููุงุฑูู 2๏ธโฃ: ูุดุฑู ูุง ูุฑู ุงููุฑุงุณูุฉ

**ุงูุฏูุฑ ุงููุฎุชุจุฑ:** ูุดุฑู (supervisor)
**ุงูุจุฑูุฏ:** supervisor@olivefarms.test

#### ูุง ูุฌุจ ุฃู ูุฑุงู:

โ **ููุญุฉ ุงูุชุญูู:**
- ุงูุชูุฌูู ุงูุชููุงุฆู โ ูุญุตููู
- ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ ูู ุงููุงุฆูุฉ

โ **ุงูููุงู:**
- ููุงูู ุงูุฎุงุตุฉ (2 ููุงู)
- ููุงู ุงูุนุงูู (3 ููุงู) - ูุฃูู ูุดุฑู

โ **ุงูุชุจููุจุงุช ูู ูุญุตููู:**
- ุงูุนูููุงุช (Operations)
- ุงูุตูุงูุฉ (Maintenance)
- ุงูููุงู (Tasks)

โ **ูุง ูุง ูุฌุจ ุฃู ูุฑุงู:**
- ุชุจููุจ ุงููุงููุฉ (Finance)
- ุชุจููุจ ุงููุนุฏุงุช (Equipment) - ุญุณุจ ุงูุตูุงุญูุงุช
- ุฎูุงุฑ "ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู" ูู ุงูุฅุฏุงุฑุฉ
- ุฎูุงุฑ "ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช"

#### ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ:

```
1. ุชุณุฌูู ุงูุฏุฎูู ุจู supervisor@olivefarms.test
2. ุงูุชุญูู ูู ุงูุชูุฌูู ุงูุชููุงุฆู โ ูุญุตููู
3. ุงูุชุญูู ูู ุนุฏู ุธููุฑ "ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู" ูู ุงููุงุฆูุฉ
4. ุงูุชุญูู ูู ุงูุชุจููุจุงุช ุงููุชุงุญุฉ (3 ุชุจููุจุงุช)
5. ุงูุชุญูู ูู ุฑุคูุฉ ููุงูู + ููุงู ุงูุนุงูู (5 ููุงู)
6. ูุญุงููุฉ ุงููุตูู ูุตูุญุฉ ุงููุฑุงุณูุฉ (ูุฌุจ ุฃู ููุดู)
7. ูุญุงููุฉ ุฅูุดุงุก ุฑุณุงูุฉ ูููุณุชุซูุฑูู (ูุฌุจ ุฃู ููุดู)
```

#### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

| ุงูุงุฎุชุจุงุฑ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|----------|------------------|
| ุงูุชูุฌูู ุงูุชููุงุฆู | โ ูุฐูุจ ููุญุตููู ูุจุงุดุฑุฉ |
| "ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู" ูู ุงููุงุฆูุฉ | โ ุบูุฑ ููุฌูุฏุฉ |
| ุนุฏุฏ ุงูุชุจููุจุงุช | โ 3 (ุจุฏูู ุงููุงููุฉ ูุงููุนุฏุงุช) |
| ุนุฏุฏ ุงูููุงู | โ 5 (ููุงูู + ููุงู ุงูุนุงูู) |
| ุงููุตูู ูุตูุญุฉ ุงููุฑุงุณูุฉ | โ ูุฑููุถ |

---

### ุงูุณููุงุฑูู 3๏ธโฃ: ุนุงูู ูุฑู ููุงูู ููุท

**ุงูุฏูุฑ ุงููุฎุชุจุฑ:** ุนุงูู (worker)
**ุงูุจุฑูุฏ:** worker@olivefarms.test

#### ูุง ูุฌุจ ุฃู ูุฑุงู:

โ **ููุญุฉ ุงูุชุญูู:**
- ุงูุชูุฌูู ุงูุชููุงุฆู โ ูุญุตููู
- ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ ูู ุงููุงุฆูุฉ

โ **ุงูููุงู:**
- ููุงูู ุงูุฎุงุตุฉ ููุท (3 ููุงู)
- ูุง ูุฑู ููุงู ุงูุขุฎุฑูู

โ **ุงูุชุจููุจุงุช ูู ูุญุตููู:**
- ุงูููุงู (Tasks) ููุท

โ **ูุง ูุง ูุฌุจ ุฃู ูุฑุงู:**
- ุชุจููุจ ุงูุนูููุงุช (Operations)
- ุชุจููุจ ุงูุตูุงูุฉ (Maintenance)
- ุชุจููุจ ุงููุนุฏุงุช (Equipment)
- ุชุจููุจ ุงููุงููุฉ (Finance)
- ุฃู ุฎูุงุฑุงุช ุฅุฏุงุฑูุฉ
- ููุงู ุงููุดุฑู
- ููุงู ูุฏูุฑ ุงููุฒุฑุนุฉ

#### ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ:

```
1. ุชุณุฌูู ุงูุฏุฎูู ุจู worker@olivefarms.test
2. ุงูุชุญูู ูู ุงูุชูุฌูู ุงูุชููุงุฆู โ ูุญุตููู
3. ุงูุชุญูู ูู ุธููุฑ ุชุจููุจ "ุงูููุงู" ููุท
4. ุงูุชุญูู ูู ุฑุคูุฉ 3 ููุงู ููุท (ููุงูู)
5. ูุญุงููุฉ ุชุญุฏูุซ ุญุงูุฉ ูููุฉ ุฎุงุตุฉ ุจู (ูุฌุจ ุฃู ููุฌุญ)
6. ูุญุงููุฉ ุญุฐู ูููุฉ (ูุฌุจ ุฃู ููุดู)
7. ูุญุงููุฉ ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ (ูุฌุจ ุฃู ููุดู)
8. ุงูุชุญูู ูู ุนุฏู ุฑุคูุฉ ููุงู ุงูุขุฎุฑูู
```

#### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

| ุงูุงุฎุชุจุงุฑ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|----------|------------------|
| ุงูุชูุฌูู ุงูุชููุงุฆู | โ ูุฐูุจ ููุญุตููู ูุจุงุดุฑุฉ |
| ุนุฏุฏ ุงูุชุจููุจุงุช | โ 1 (ุงูููุงู ููุท) |
| ุนุฏุฏ ุงูููุงู ุงููุฑุฆูุฉ | โ 3 (ููุงูู ููุท) |
| ุชุญุฏูุซ ุญุงูุฉ ูููุชู | โ ููุฌุญ |
| ุญุฐู ูููุฉ | โ ูุฑููุถ |
| ุฅูุดุงุก ูููุฉ | โ ูุฑููุถ |
| ุฑุคูุฉ ููุงู ุงูุขุฎุฑูู | โ ุบูุฑ ูุฑุฆูุฉ (RLS) |

---

### ุงูุณููุงุฑูู 4๏ธโฃ: ุงููุฏูุฑ ุงูุนุงู ูุฑู ูู ุดูุก

**ุงูุฏูุฑ ุงููุฎุชุจุฑ:** ุงููุฏูุฑ ุงูุนุงู (super_admin)
**ุงูุจุฑูุฏ:** ibrahimalhebr1@gmail.com

#### ูุง ูุฌุจ ุฃู ูุฑุงู:

โ **ููุญุฉ ุงูุชุญูู:**
- ุงูุชูุฌูู ุงูุชููุงุฆู โ ููุญุฉ ุงูุชุญูู (Dashboard)
- ุฌููุน ุงููุฒุงุฑุน ูู ุงููุธุงู
- ุฌููุน ุงูุฅุญุตุงุฆูุงุช

โ **ุงูููุงู:**
- ุฌููุน ุงูููุงู ูุฌููุน ุงููุฒุงุฑุน
- 12 ูููุฉ ูู ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ

โ **ุงูุตูุงุญูุงุช:**
- ุฅุฏุงุฑุฉ ุงููุฒุงุฑุน (ุฅุถุงูุฉุ ุชุนุฏููุ ุญุฐู)
- ุฅุฏุงุฑุฉ ุงูุญุฌูุฒุงุช
- ุฅุฏุงุฑุฉ ุงููุงููุฉ
- ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู
- ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ
- ุนุฑุถ ุงูุณุฌูุงุช

โ **ุงูุชุจููุจุงุช ูู ูุญุตููู:**
- ุฌููุน ุงูุชุจููุจุงุช (5 ุชุจููุจุงุช)
  - ุงูุนูููุงุช
  - ุงูุตูุงูุฉ
  - ุงูููุงู
  - ุงููุนุฏุงุช
  - ุงููุงููุฉ

#### ุงูุงุฎุชุจุงุฑุงุช ุงููุทููุจุฉ:

```
1. ุชุณุฌูู ุงูุฏุฎูู ุจู ibrahimalhebr1@gmail.com
2. ุงูุชุญูู ูู ุงูุชูุฌูู ุงูุชููุงุฆู โ ููุญุฉ ุงูุชุญูู
3. ุงูุชุญูู ูู ุฑุคูุฉ ุฌููุน ุงููุฒุงุฑุน
4. ุงูุชุญูู ูู ูุฌูุฏ ุฌููุน ุงูุฎูุงุฑุงุช ุงูุฅุฏุงุฑูุฉ
5. ุงูุฏุฎูู ูุตูุญุฉ "ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช"
6. ุงูุชุญูู ูู ุฑุคูุฉ ุฌููุน ุงูุฃุฏูุงุฑ ูุงูุตูุงุญูุงุช
7. ุงูุฏุฎูู ููุญุตููู โ ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ
8. ุงูุชุญูู ูู ุฑุคูุฉ ุฌููุน ุงูุชุจููุจุงุช (5)
9. ุงูุชุญูู ูู ุฑุคูุฉ ุฌููุน ุงูููุงู (12 ูููุฉ)
10. ูุญุงููุฉ ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ (ูุฌุจ ุฃู ููุฌุญ)
11. ูุญุงููุฉ ุญุฐู ูููุฉ (ูุฌุจ ุฃู ููุฌุญ)
```

#### ุงููุชุงุฆุฌ ุงููุชููุนุฉ:

| ุงูุงุฎุชุจุงุฑ | ุงููุชูุฌุฉ ุงููุชููุนุฉ |
|----------|------------------|
| ุงูุชูุฌูู ุงูุชููุงุฆู | โ ูุฐูุจ ูููุญุฉ ุงูุชุญูู |
| ุนุฏุฏ ุงููุฒุงุฑุน ุงููุฑุฆูุฉ | โ ุฌููุน ุงููุฒุงุฑุน |
| ุงูุฎูุงุฑุงุช ุงูุฅุฏุงุฑูุฉ | โ ุฌููุนูุง ูุชุงุญุฉ |
| ุงููุตูู ููุตูุงุญูุงุช | โ ูุชุงุญ |
| ุนุฏุฏ ุงูุชุจููุจุงุช | โ 5 (ุฌููุน ุงูุชุจููุจุงุช) |
| ุนุฏุฏ ุงูููุงู | โ 12 (ุฌููุน ุงูููุงู) |
| ุฅูุดุงุก ูููุฉ | โ ููุฌุญ |
| ุญุฐู ูููุฉ | โ ููุฌุญ |
| ุฑุคูุฉ ุงูุณุฌูุงุช | โ ูุชุงุญุฉ |

---

## ุงุฎุชุจุงุฑุงุช RLS (Row Level Security)

### ุงุฎุชุจุงุฑ 1: ุนุฒู ุงููุฒุงุฑุน

**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏููู ูุฑูู ูุฒุงุฑุนูู ุงููุนููุฉ ููุท

```sql
-- ููุฏูุฑ ูุฒุฑุนุฉ
SELECT * FROM farms;
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: ูุฒุฑุนุฉ ูุงุญุฏุฉ (ุงูุชุฌุฑูุจูุฉ)

-- ููุฏูุฑ ุนุงู
SELECT * FROM farms;
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: ุฌููุน ุงููุฒุงุฑุน
```

### ุงุฎุชุจุงุฑ 2: ุนุฒู ุงูููุงู

**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฃู ุงูุนุงูู ูุฑู ููุงูู ููุท

```sql
-- ูุนุงูู
SELECT * FROM farm_tasks;
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: 3 ููุงู ููุท

-- ููุดุฑู
SELECT * FROM farm_tasks WHERE farm_id = 'test-farm-id';
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: 5 ููุงู (ููุงูู + ููุงู ุงูุนุงูู)

-- ููุฏูุฑ ูุฒุฑุนุฉ
SELECT * FROM farm_tasks WHERE farm_id = 'test-farm-id';
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: 7 ููุงู (ุฌููุน ููุงู ุงููุฒุฑุนุฉ)
```

### ุงุฎุชุจุงุฑ 3: ููุน ุงูุชุนุฏูู ุบูุฑ ุงููุตุฑุญ

**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏููู ูุง ูููููู ุชุนุฏูู ูุง ููุณ ูุฏููู ุตูุงุญูุฉ ูู

```sql
-- ูุนุงูู - ูุญุงููุฉ ุญุฐู ูููุฉ
DELETE FROM farm_tasks WHERE id = 'some-task-id';
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: โ ูุฑููุถ (ููุณ ูุฏูู ุตูุงุญูุฉ tasks.delete)

-- ููุดุฑู - ูุญุงููุฉ ุฅูุดุงุก ุฑุณุงูุฉ ูููุณุชุซูุฑูู
INSERT INTO investor_messages (...);
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: โ ูุฑููุถ (ููุณ ูุฏูู ุตูุงุญูุฉ messaging.create)

-- ููุฏูุฑ ูุฒุฑุนุฉ - ูุญุงููุฉ ุงููุตูู ููุงููุฉ ูุฒุฑุนุฉ ุฃุฎุฑู
SELECT * FROM farms WHERE id = 'other-farm-id';
-- ุงููุชูุฌุฉ ุงููุชููุนุฉ: โ ูุง ุดูุก (RLS ุชุตูู ุงููุชุงุฆุฌ)
```

---

## ุงุฎุชุจุงุฑุงุช UI Guards

### ุงุฎุชุจุงุฑ 1: ุฅุฎูุงุก ุงูุชุจููุจุงุช

**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฅุฎูุงุก ุงูุชุจููุจุงุช ุงูุชู ูุง ูููู ุงููุณุชุฎุฏู ุตูุงุญูุฉ ููุง

```
โ ุนุงูู:
- ูุฑู ุชุจููุจ "ุงูููุงู" ููุท
- ูุง ูุฑู "ุงูุนูููุงุช" ุฃู "ุงูุตูุงูุฉ" ุฃู "ุงููุนุฏุงุช" ุฃู "ุงููุงููุฉ"

โ ูุดุฑู:
- ูุฑู "ุงูุนูููุงุช" ู "ุงูุตูุงูุฉ" ู "ุงูููุงู"
- ูุง ูุฑู "ุงููุนุฏุงุช" ุฃู "ุงููุงููุฉ"

โ ูุฏูุฑ ูุฒุฑุนุฉ:
- ูุฑู ุฌููุน ุงูุชุจููุจุงุช ุฅูุง "ุงููุงููุฉ"

โ ูุฏูุฑ ุนุงู:
- ูุฑู ุฌููุน ุงูุชุจููุจุงุช
```

### ุงุฎุชุจุงุฑ 2: ุชุนุทูู ุงูุฃุฒุฑุงุฑ

**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุชุนุทูู ุงูุฃุฒุฑุงุฑ ุงูุชู ูุง ูููู ุงููุณุชุฎุฏู ุตูุงุญูุฉ ููุง

```
โ ุนุงูู:
- ุฒุฑ "ุฅููุงู ุงููููุฉ" โ โ ููุนู
- ุฒุฑ "ุญุฐู ุงููููุฉ" โ โ ูุนุทู ุฃู ูุฎูู
- ุฒุฑ "ุฅูุดุงุก ูููุฉ" โ โ ูุนุทู ุฃู ูุฎูู

โ ูุดุฑู:
- ุฒุฑ "ุฅูุดุงุก ูููุฉ" โ โ ููุนู
- ุฒุฑ "ุญุฐู ูููุฉ" โ โ ูุนุทู
- ุฒุฑ "ุฅุฑุณุงู ุฑุณุงูุฉ ูููุณุชุซูุฑูู" โ โ ูุนุทู ุฃู ูุฎูู

โ ูุฏูุฑ ูุฒุฑุนุฉ:
- ุฒุฑ "ุชุนุฏูู ุงููุฒุฑุนุฉ" โ โ ููุนู (ููุฒุฑุนุชู ููุท)
- ุฒุฑ "ุญุฐู ุงููุฒุฑุนุฉ" โ โ ูุนุทู
```

### ุงุฎุชุจุงุฑ 3: ุฅุฎูุงุก ุงูููุงุฆู

**ุงููุฏู:** ุงูุชุฃูุฏ ูู ุฅุฎูุงุก ุงูุฎูุงุฑุงุช ุงูุฅุฏุงุฑูุฉ ุบูุฑ ุงููุตุฑุญ ุจูุง

```
โ ูุดุฑู:
- "ุฅุฏุงุฑุฉ ุงููุฒุงุฑุน" โ โ ูุฎููุฉ
- "ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู" โ โ ูุฎููุฉ
- "ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช" โ โ ูุฎููุฉ

โ ูุฏูุฑ ูุฒุฑุนุฉ:
- "ุฅุฏุงุฑุฉ ุงููุฒุงุฑุน" โ โ ูุฎููุฉ (ุฃู ูุนุทูุฉ)
- "ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู" โ โ ูุฎููุฉ
- "ุฅุฏุงุฑุฉ ุงูุตูุงุญูุงุช" โ โ ูุฎููุฉ

โ ูุฏูุฑ ุนุงู:
- ุฌููุน ุงูุฎูุงุฑุงุช โ โ ูุฑุฆูุฉ ูููุนูุฉ
```

---

## ุงุฎุชุจุงุฑุงุช ุงูุชูุฌูู ุงูุชููุงุฆู

### ุงุฎุชุจุงุฑ 1: ุงูุฃุฏูุงุฑ ุงูุชุดุบูููุฉ โ ูุญุตููู

```
โ ุนุงูู โ ูุฐูุจ ููุญุตููู
โ ูุดุฑู โ ูุฐูุจ ููุญุตููู
โ ูุฏูุฑ ูุฒุฑุนุฉ โ ูุฐูุจ ููุญุตููู
```

### ุงุฎุชุจุงุฑ 2: ุงูุฃุฏูุงุฑ ุงูุฅุฏุงุฑูุฉ โ ููุญุฉ ุงูุชุญูู

```
โ ูุฏูุฑ ุนุงู โ ูุฐูุจ ูููุญุฉ ุงูุชุญูู
โ ูุฏูุฑ ุงููุฒุงุฑุน โ ูุฐูุจ ูููุญุฉ ุงูุชุญูู
โ ุงููุฏูุฑ ุงููุงูู โ ูุฐูุจ ูููุญุฉ ุงูุชุญูู
```

### ุงุฎุชุจุงุฑ 3: ุฑุณุงูุฉ ุงูุชูุฌูู

```
โ ุฃุซูุงุก ุชุณุฌูู ุงูุฏุฎููุ ูุนุฑุถ ุฑุณุงูุฉ ูุงุถุญุฉ:
- "ุณูุชู ุชูุฌููู ุฅูู ูุญุตููู" ููุฃุฏูุงุฑ ุงูุชุดุบูููุฉ
- "ุณูุชู ุชูุฌููู ุฅูู ููุญุฉ ุงูุชุญูู" ููุฃุฏูุงุฑ ุงูุฅุฏุงุฑูุฉ
```

---

## ุงุฎุชุจุงุฑุงุช ุงูุฃุฏุงุก

### ุงุฎุชุจุงุฑ 1: ุณุฑุนุฉ ุงูุชุญููู

```
โ ุชุญููู ูุงุฆูุฉ ุงููุฒุงุฑุน: < 1 ุซุงููุฉ
โ ุชุญููู ูุงุฆูุฉ ุงูููุงู: < 1 ุซุงููุฉ
โ ุชุญููู ุงูุตูุงุญูุงุช: < 0.5 ุซุงููุฉ
โ ุงูุชูุฌูู ุงูุชููุงุฆู: < 0.5 ุซุงููุฉ
```

### ุงุฎุชุจุงุฑ 2: Caching

```
โ ุงูุตูุงุญูุงุช ุชูุฎุฒู ูุคูุชุงู (5 ุฏูุงุฆู)
โ ุชุญุฏูุซ ุงูุตูุงุญูุงุช ูุฒูู ุงูุชุฎุฒูู ุงููุคูุช
โ ุชุณุฌูู ุงูุฎุฑูุฌ ููุณุญ ุฌููุน ุงูุจูุงูุงุช
```

---

## ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู

### ููุงุญุธุฉ ูููุฉ

ุงููุณุชุฎุฏููู ุงูุงุฎุชุจุงุฑููู ุชู ุฅูุดุงุคูู ูู ุฌุฏูู `admins` ููุทุ **ุจุฏูู** ุฅูุดุงุก ุญุณุงุจุงุช ูู `auth.users`. ูุฐุง ูุนูู:

โ **ูุง ูููู ุชุณุฌูู ุงูุฏุฎูู** ุนุจุฑ ุงููุงุฌูุฉ ุงูุนุงุฏูุฉ ููุคูุงุก ุงููุณุชุฎุฏููู ุงูุงุฎุชุจุงุฑููู

โ **ูููู ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช** ุนุจุฑ:
1. ุชูููุฐ ุงุณุชุนูุงูุงุช SQL ูุจุงุดุฑุฉ
2. ุงุณุชุฎุฏุงู ุฏูุงู RLS ููุชุญูู
3. ูุญุงูุงุฉ ุงูุฌูุณุงุช ูู ุงูููุฏ

### ููุงุฎุชุจุงุฑ ุงููุนูู ุนุจุฑ ุงููุงุฌูุฉ:

ูุฌุจ ุฅูุดุงุก ุงููุณุชุฎุฏููู ูู `auth.users` ุฃููุงูุ ุฃู ุงุณุชุฎุฏุงู ุงููุณุชุฎุฏู ุงูููุฌูุฏ:

```
ุงูุจุฑูุฏ: ibrahimalhebr1@gmail.com
ูููุฉ ุงููุฑูุฑ: 2931
ุงูุฏูุฑ: ุงููุฏูุฑ ุงูุนุงู
```

ูุฐุง ุงููุณุชุฎุฏู ููููู:
- ุฑุคูุฉ ูู ุดูุก
- ุงููุตูู ูุฌููุน ุงููุฒุงุฑุน
- ุงุฎุชุจุงุฑ ุฌููุน ุงูุตูุงุญูุงุช

---

## ูุชุงุฆุฌ ุงูุงุฎุชุจุงุฑ ุงููุชููุนุฉ

### ุฌุฏูู ุงูููุฎุต

| ุงูุณููุงุฑูู | ุงููุณุชุฎุฏู | ุงููุฒุงุฑุน ุงููุฑุฆูุฉ | ุงูููุงู ุงููุฑุฆูุฉ | ุงูุชุจููุจุงุช | ุงูุตูุงุญูุงุช ุงูุฅุฏุงุฑูุฉ |
|-----------|----------|-----------------|----------------|-----------|-------------------|
| **1** | ูุฏูุฑ ูุฒุฑุนุฉ | 1 | 7 | 4 | ูุญุฏูุฏุฉ |
| **2** | ูุดุฑู | 1 | 5 | 3 | ูุง |
| **3** | ุนุงูู | 1 | 3 | 1 | ูุง |
| **4** | ูุฏูุฑ ุนุงู | ุฌููุนูุง | ุฌููุนูุง | 5 | ุฌููุนูุง |

### ุงูุชุฃููุฏุงุช ุงูุฑุฆูุณูุฉ

โ **ุงูุนุฒู (Isolation):** ูู ูุณุชุฎุฏู ูุฑู ุจูุงูุงุชู ููุท
โ **ุงูุญูุงูุฉ (Protection):** RLS ุชููุน ุงููุตูู ุบูุฑ ุงููุตุฑุญ
โ **ุงูุชุฌุฑุจุฉ (UX):** ูุงุฌูุฉ ูุธููุฉ ุจุฏูู ุฎูุงุฑุงุช ุบูุฑ ูุตุฑุญ ุจูุง
โ **ุงูุชูุฌูู (Routing):** ูู ุฏูุฑ ูุฐูุจ ููุตูุญุฉ ุงูููุงุณุจุฉ
โ **ุงูุฃุฏุงุก (Performance):** ุชุญููู ุณุฑูุน ูุน caching

---

## ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ููุงุฎุชุจุงุฑ ุงููุฏูู:

1. **ุชุณุฌูู ุงูุฏุฎูู ููุฏูุฑ ุนุงู:**
   ```
   ุงูุจุฑูุฏ: ibrahimalhebr1@gmail.com
   ูููุฉ ุงููุฑูุฑ: 2931
   ```

2. **ุงูุชุญูู ูู:**
   - ุฌููุน ุงููุฒุงุฑุน ูุฑุฆูุฉ
   - ุฌููุน ุงูุฎูุงุฑุงุช ุงูุฅุฏุงุฑูุฉ ูุชุงุญุฉ
   - ุงูุฏุฎูู ูุตูุญุฉ ุงูุตูุงุญูุงุช ูุนูู
   - ุงูุฏุฎูู ููุญุตููู โ ุงููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ
   - ุฑุคูุฉ ุฌููุน ุงูููุงู (12 ูููุฉ)

3. **ุงุฎุชุจุงุฑ ุงูุตูุงุญูุงุช:**
   - ูุญุงููุฉ ุฅูุดุงุก ูููุฉ ุฌุฏูุฏุฉ (ูุฌุจ ุฃู ููุฌุญ)
   - ูุญุงููุฉ ุญุฐู ูููุฉ (ูุฌุจ ุฃู ููุฌุญ)
   - ูุชุญ ุตูุญุฉ ูุฑุงุณูุฉ ุงููุณุชุซูุฑูู (ูุฌุจ ุฃู ูุนูู)

### ููุงุฎุชุจุงุฑ ุงูุขูู:

ุงุณุชุฎุฏู ุงุณุชุนูุงูุงุช SQL ููุชุญูู ูู:
```sql
-- ุงูุชุญูู ูู ุนุฏุฏ ุงูููุงู ููู ูุณุชุฎุฏู
SELECT
  a.email,
  r.role_name_ar,
  COUNT(ft.id) AS tasks_count
FROM admins a
JOIN admin_roles r ON a.role_id = r.id
LEFT JOIN farm_tasks ft ON ft.assigned_to = a.id
WHERE a.email IN (
  'worker@olivefarms.test',
  'supervisor@olivefarms.test',
  'farm.supervisor@olivefarms.test'
)
GROUP BY a.email, r.role_name_ar;
```

---

## ุงูุงุณุชูุชุงุฌ

ุชู ุฅุนุฏุงุฏ ุจูุฆุฉ ุงุฎุชุจุงุฑ ุดุงููุฉ ุชุบุทู:

โ **4 ุฃุฏูุงุฑ ูุฎุชููุฉ** ูุน ุตูุงุญูุงุช ูุชุฏุฑุฌุฉ
โ **12 ูููุฉ ุงุฎุชุจุงุฑ** ููุฒุนุฉ ุนูู ุงููุณุชุฎุฏููู
โ **ูุฒุฑุนุฉ ุชุฌุฑูุจูุฉ** ูุฎุตุตุฉ ููุงุฎุชุจุงุฑ
โ **ุณููุงุฑูููุงุช ูุงุถุญุฉ** ููู ุฏูุฑ
โ **ูุชุงุฆุฌ ูุชููุนุฉ** ูุญุฏุฏุฉ

ุงููุธุงู ุฌุงูุฒ ููุงุฎุชุจุงุฑ ุงููุฏูู ูุงูุขูู ููุชุฃูุฏ ูู ุฃู ูุธุงู ุงูุตูุงุญูุงุช ูุนูู ููุง ูู ูุชููุน ุนูู ุฌููุน ุงููุณุชููุงุช:
- **ูุงุนุฏุฉ ุงูุจูุงูุงุช (RLS)**
- **ุงููุงุฌูุฉ (UI Guards)**
- **ุงูุชูุฌูู (Auto-Routing)**

---

## ููุงุญุธุงุช ูููุฉ

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

- ุชู ุชุญุฏูุซ ููุฏ `valid_role` ูุฏุนู ุฌููุน ุงูุฃุฏูุงุฑ
- ุชู ุฅูุดุงุก 3 ูุณุชุฎุฏููู ุงุฎุชุจุงุฑ ุฌุฏุฏ
- ุชู ุชุนููู ุงููุณุชุฎุฏููู ูููุฒุฑุนุฉ ุงูุชุฌุฑูุจูุฉ ุนุจุฑ `admin_farm_assignments`
- ุชู ุฅูุดุงุก 7 ููุงู ุฌุฏูุฏุฉ (ุฅุถุงูุฉ ุฅูู 5 ููุฌูุฏุฉ)

### 2. ุงูุตูุงุญูุงุช

ุฌููุน ุงูุตูุงุญูุงุช ูุฃุฎูุฐุฉ ูู ุณุฌู ุงูุตูุงุญูุงุช (49 ุตูุงุญูุฉ) ูุน ุฑุจุทูุง ุจุงูุฃุฏูุงุฑ (91 ุฑุจุท) ููุง ุชู ูู ุงููุฑุงุญู ุงูุณุงุจูุฉ.

### 3. RLS Policies

ุฌููุน ุงูู RLS policies ุชุนูู ุจุดูู ุตุญูุญ:
- `admin_has_action()` - ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- `admin_has_farm_access()` - ุงูุชุญูู ูู ุงููุตูู ูููุฒุงุฑุน
- `get_admin_role()` - ุงูุญุตูู ุนูู ูุนูููุงุช ุงูุฏูุฑ

### 4. ุงูุจูุงุก

ุชู ุงูุชุฃูุฏ ูู ุฃู ุงููุดุฑูุน ูุจูู ุจูุฌุงุญ ุจุฏูู ุฃุฎุทุงุก.

---

ุงููุธุงู ุฌุงูุฒ ููุงุฎุชุจุงุฑ! ๐
