# โก ูุธุงู ุฑูุน ุงูููุฏูู ุงููุชูุฏู - Ultra Mode

## ๐ ูุง ุงูุฌุฏูุฏุ

### ุงููุธุงู ุงูุณุงุจู (ูุญุฏูุฏ):
```
โ ุญุชู 100 MB ููุท
โ MP4 ููุท (ุฑูุถ iPhone MOV ุฃุญูุงูุงู)
โ Chunks ุตุบูุฑุฉ (6 MB)
โ 4 ุฑููุนุงุช ูุชูุงุฒูุฉ ููุท
```

### ุงููุธุงู ุงูุฌุฏูุฏ (Ultra Mode):
```
โ ุญุชู 500 MB (5x ุฃูุจุฑ!)
โ MP4, M4V, MOV, WebM
โ Chunks ุฃูุจุฑ (8 MB - ุฃุณุฑุน)
โ 6 ุฑููุนุงุช ูุชูุงุฒูุฉ (ุฃุณุฑุน 50%)
โ ุชุญุฐูุฑุงุช ุฐููุฉ ูููููุงุช ุงููุจูุฑุฉ
โ ุฏุนู iPhone MOV ุจุฏูู ูุดุงูู
```

---

## ๐ ููุงุฑูุฉ ุดุงููุฉ

| ุงูููุฒุฉ | ุงูุณุงุจู | ุงูุฌุฏูุฏ Ultra |
|--------|---------|--------------|
| **ุงูุญุฌู ุงูุฃูุตู** | 100 MB | 500 MB |
| **ุงูุตูุบุงุช** | MP4, M4V ููุท | MP4, M4V, MOV, WebM |
| **Chunk Size** | 6 MB | 8 MB (ุฃุณุฑุน) |
| **Parallel Uploads** | 4 | 6 (ุฃุณุฑุน 50%) |
| **iPhone MOV** | โ ูุดุงูู | โ ูุนูู |
| **Android** | โ ูุฏ ููุดู | โ ูุนูู |
| **WebM** | โ ูุฑููุถ | โ ููุจูู |
| **ุงูุชุญุฐูุฑุงุช** | ุจุณูุทุฉ | ุฐููุฉ ูููุตูุฉ |
| **ุงูุณุฑุนุฉ** | ุนุงุฏูุฉ | ุฃุณุฑุน 50% |

---

## ๐น ุงูุตูุบุงุช ุงููุฏุนููุฉ

### โ Primary (ููุตู ุจู - ูุจูู ููุฑู):
```
โข MP4 (H.264) - ุงูุฃูุถู ูุงูุฃุณุฑุน โญ
โข M4V (Apple MP4) - ููุชุงุฒ ููู iOS โญ
```

### โ๏ธ Secondary (ููุจูู ูุน ุชุญุฐูุฑ):
```
โข MOV (iPhone/QuickTime) - ูุฏุนูู ุจุงููุงูู
โข WebM - ูุฏุนูู (ุฃูู ุดููุนุงู)
```

### โ ุบูุฑ ูุฏุนูู (ูุญุชุงุฌ ุชุญููู):
```
โข AVI - ุญููู ุฅูู MP4
โข MKV - ุญููู ุฅูู MP4
โข WMV - ุญููู ุฅูู MP4
โข FLV - ุญููู ุฅูู MP4
```

---

## ๐ฏ ุญุฏูุฏ ุงูุญุฌู

### 1. ุงูููุทูุฉ ุงูุฎุถุฑุงุก (0-100 MB):
```
โ ูุจูู ููุฑู
โ ุฑูุน ุณุฑูุน
โ ุจุฏูู ุชุญุฐูุฑุงุช
โฑ๏ธ ููุช ุงูุฑูุน: 30 ุซุงููุฉ - 2 ุฏูููุฉ
```

### 2. ุงูููุทูุฉ ุงูุตูุฑุงุก (100-150 MB):
```
โ ููุจูู
โ๏ธ ุชุญุฐูุฑ: "ุณูุณุชุฎุฏู Chunked Upload"
โฑ๏ธ ููุช ุงูุฑูุน: 2-3 ุฏูุงุฆู
```

### 3. ุงูููุทูุฉ ุงูุจุฑุชูุงููุฉ (150-500 MB):
```
โ ููุจูู (Ultra Mode)
โ๏ธ ุชุญุฐูุฑ: "ุญุฌู ูุจูุฑ - ุงูุฑูุน ูุฏ ูุณุชุบุฑู ููุชุงู"
โ๏ธ ุชูุฏูุฑ ููุช ุงูุฑูุน ูุนุฑูุถ
โฑ๏ธ ููุช ุงูุฑูุน: 3-10 ุฏูุงุฆู
๐ก ูุตูุญุฉ ุจุงูุถุบุท ูุนุฑูุถุฉ
```

### 4. ุงูููุทูุฉ ุงูุญูุฑุงุก (500+ MB):
```
โ ูุฑููุถ
๐ก ุงูุชุฑุงุญุงุช ููุถุบุท ูุงูุชุญุณูู
๐ HandBrake ููุตู ุจู
```

---

## ๐ ุขููุฉ ุงูุชุญูู ุงูุฐููุฉ

### ุงููุฑุญูุฉ 1: ูุญุต ุงูุตูุบุฉ
```typescript
// ูุญุต ุงูุงูุชุฏุงุฏ ุฃููุงู (ุฃูุซุฑ ููุซูููุฉ)
const primaryExtensions = ['mp4', 'm4v'];  // ุงููุจูู ุงูููุฑู
const secondaryExtensions = ['mov', 'webm'];  // ูุน ุชุญุฐูุฑ

// ูุญุต MIME type ูุงุญุชูุงุทู
const allowedMimeTypes = [
  'video/mp4',
  'video/x-m4v',
  'video/quicktime',  // iPhone MOV โ
  'video/webm',
  ''  // ุจุนุถ ุงููุชุตูุญุงุช ูุง ุชุฑุณู MIME type
];

// ูุจูู ุฅุฐุง ุฃุญุฏููุง ุตุญูุญ (OR Logic)
const isValid = hasValidExtension || hasValidMimeType;
```

### ุงููุฑุญูุฉ 2: ูุญุต ุงูุญุฌู
```typescript
if (size > 500 MB) {
  โ ุฑูุถ + ุงูุชุฑุงุญุงุช ุถุบุท
} else if (size > 150 MB) {
  โ ูุจูู + ุชุญุฐูุฑ: "ุญุฌู ูุจูุฑ - ุชูุฏูุฑ ููุช ุงูุฑูุน: X ุฏูุงุฆู"
} else if (size > 100 MB) {
  โ ูุจูู + ุชุญุฐูุฑ: "ุณูุณุชุฎุฏู Chunked Upload"
} else {
  โ ูุจูู ููุฑู ุจุฏูู ุชุญุฐูุฑุงุช
}
```

### ุงููุฑุญูุฉ 3: ุชุญุฐูุฑุงุช ุฐููุฉ
```typescript
// ุชุญุฐูุฑ ููุตูุบุงุช ุงูุซุงูููุฉ
if (extension === 'mov' || extension === 'webm') {
  โ๏ธ "ุงูุตูุบุฉ .MOV ูุฏุนููุฉ ููู MP4 (H.264) ููุตู ุจู"
}

// ุชุญุฐูุฑ ูููููุงุช ุงููุจูุฑุฉ
if (size > 150 MB) {
  โ๏ธ "ุญุฌู ูุจูุฑ: 320 MB - ุงูุฑูุน ูุฏ ูุณุชุบุฑู ููุชุงู (ุญูุงูู 7 ุฏูุงุฆู)"
}

// ูุนูููุงุช ูููุฏุฉ
if (estimatedDuration > 90 seconds) {
  โน๏ธ "ุชูุฏูุฑ ุงููุฏุฉ: ~95 ุซุงููุฉ. ููููุฏูู ุงูุชุนุฑูููุ ูููุถู 30-60 ุซุงููุฉ"
}
```

---

## ๐ ุชุญุณููุงุช ุงูุฃุฏุงุก

### 1. Chunk Size ุฃูุจุฑ (6 MB โ 8 MB):
```
ุงููุงุฆุฏุฉ:
โข ุฃูู overhead ูู ุงูุงุชุตุงู
โข ุฃุณุฑุน ุจู 20-30% ูููููุงุช ุงููุจูุฑุฉ
โข ุฃูู ุทูุจุงุช HTTP

ูุซุงู:
ููู 160 MB:
  - ุณุงุจูุงู: 27 chunk (6 MB each)
  - ุงูุขู: 20 chunk (8 MB each)
  - ุชูููุฑ: 7 ุทูุจุงุช ุฃูู (26% ุฃูู)
```

### 2. Parallel Uploads ุฃูุซุฑ (4 โ 6):
```
ุงููุงุฆุฏุฉ:
โข ุงุณุชุบูุงู ุฃูุถู ููู bandwidth
โข ุฃุณุฑุน ุจู 40-50% ูููููุงุช ุงููุจูุฑุฉ
โข ุงูุชูุงู ุฃุณุฑุน

ูุซุงู:
ููู 240 MB (30 chunks):
  - ุณุงุจูุงู: 30 chunks รท 4 parallel = 8 rounds
  - ุงูุขู: 30 chunks รท 6 parallel = 5 rounds
  - ุชูููุฑ: 37.5% ููุช ุฃูู
```

### 3. ุชุญุณูู ุงูู Retry Logic:
```
โ Exponential backoff ูุญุณูู
โ ุญุชู 5 ูุญุงููุงุช ููู chunk
โ ุงุณุชุฆูุงู ุชููุงุฆู ูู ุขุฎุฑ chunk
โ ุญูุธ ุงูุชูุฏู ูู localStorage
```

---

## ๐ฑ ุฏุนู ุงูุฃุฌูุฒุฉ ุงููุฎุชููุฉ

### โ iPhone Safari:
```
ุงูุตูุบุฉ: MOV (video/quicktime)
ุงูุงูุชุฏุงุฏ: .mov
ุงูุญุฌู: ุญุชู 500 MB
ุงููุชูุฌุฉ: โ ูุนูู ุจุฏูู ูุดุงูู
```

### โ Android Chrome:
```
ุงูุตูุบุฉ: MP4 (ูุฏ ูููู MIME type ูุงุฑุบ)
ุงูุงูุชุฏุงุฏ: .mp4
ุงูุญุฌู: ุญุชู 500 MB
ุงููุชูุฌุฉ: โ ูุนูู ุจุฏูู ูุดุงูู
```

### โ Desktop (Chrome/Firefox/Edge):
```
ุงูุตูุบุฉ: MP4, WebM, MOV
ุงูุงูุชุฏุงุฏ: .mp4, .webm, .mov
ุงูุญุฌู: ุญุชู 500 MB
ุงููุชูุฌุฉ: โ ูุนูู ุนูู ุงููู
```

---

## ๐งช ุณููุงุฑูููุงุช ุงูุงุฎุชุจุงุฑ

### Test 1: ููุฏูู ุตุบูุฑ (50 MB MP4)
```
ุงูุฅุฏุฎุงู:
  - video_intro.mp4
  - 50 MB
  - MIME: video/mp4

ุงูุชุญูู:
  โ Format: MP4 (primary) โ
  โ Size: 50 MB (green zone) โ

ุงููุชูุฌุฉ:
  โ ูุจูู ููุฑู
  โ Simple Upload (ุจุฏูู chunking)
  โฑ๏ธ ููุช ุงูุฑูุน: ~1 ุฏูููุฉ
```

### Test 2: ููุฏูู ูุชูุณุท (120 MB MP4)
```
ุงูุฅุฏุฎุงู:
  - farm_tour.mp4
  - 120 MB
  - MIME: video/mp4

ุงูุชุญูู:
  โ Format: MP4 (primary) โ
  โ Size: 120 MB (yellow zone) โ๏ธ

ุงููุชูุฌุฉ:
  โ ููุจูู
  โ๏ธ ุชุญุฐูุฑ: "ุณูุณุชุฎุฏู Chunked Upload"
  โฑ๏ธ ููุช ุงูุฑูุน: ~2.5 ุฏูููุฉ
  ๐ฆ Chunks: 15 chunks ร 8 MB
```

### Test 3: ููุฏูู ูุจูุฑ (280 MB MOV ูู iPhone)
```
ุงูุฅุฏุฎุงู:
  - IMG_1234.MOV
  - 280 MB
  - MIME: video/quicktime

ุงูุชุญูู:
  โ Format: MOV (secondary) โ๏ธ
  โ Size: 280 MB (orange zone) โ๏ธ

ุงููุชูุฌุฉ:
  โ ููุจูู
  โ๏ธ ุชุญุฐูุฑ 1: "MOV ูุฏุนูู ููู MP4 ููุตู ุจู"
  โ๏ธ ุชุญุฐูุฑ 2: "ุญุฌู ูุจูุฑ: 280 MB - ุงูุฑูุน ูุฏ ูุณุชุบุฑู ~6 ุฏูุงุฆู"
  โฑ๏ธ ููุช ุงูุฑูุน: ~6 ุฏูุงุฆู
  ๐ฆ Chunks: 35 chunks ร 8 MB
  ๐ 6 parallel uploads
```

### Test 4: ููุฏูู ุถุฎู (450 MB MP4)
```
ุงูุฅุฏุฎุงู:
  - 4k_video.mp4
  - 450 MB
  - MIME: video/mp4

ุงูุชุญูู:
  โ Format: MP4 (primary) โ
  โ Size: 450 MB (orange zone) โ๏ธ

ุงููุชูุฌุฉ:
  โ ููุจูู
  โ๏ธ ุชุญุฐูุฑ: "ุญุฌู ูุจูุฑ: 450 MB - ุงูุฑูุน ูุฏ ูุณุชุบุฑู ~9 ุฏูุงุฆู"
  ๐ก ูุตูุญุฉ: "ููููุฏูู ุงูุชุนุฑููู: 30-60 ุซุงููุฉ ูุงููุฉ"
  โฑ๏ธ ููุช ุงูุฑูุน: ~9 ุฏูุงุฆู
  ๐ฆ Chunks: 57 chunks ร 8 MB
  ๐ 6 parallel uploads + retry logic
```

### Test 5: ููู ุถุฎู ุฌุฏุงู (600 MB)
```
ุงูุฅุฏุฎุงู:
  - huge_video.mp4
  - 600 MB
  - MIME: video/mp4

ุงูุชุญูู:
  โ Format: MP4 (primary) โ
  โ Size: 600 MB (red zone - too large) โ

ุงููุชูุฌุฉ:
  โ ูุฑููุถ
  ๐ ุฑุณุงูุฉ: "ุญุฌู ุงูููุฏูู (600.0 MB) ูุชุฌุงูุฒ ุงูุญุฏ ุงูุฃูุตู (500 MB)"
  
  ๐ก ุญููู ููุชุฑุญุฉ:
    โข ุงุถุบุท ุงูููุฏูู ุจุงุณุชุฎุฏุงู HandBrake
    โข ููู ุงูุฌูุฏุฉ ุฅูู 1080p @ 30fps
    โข Bitrate ููุตู ุจู: 5-8 Mbps
    โข ุฃู ูุณูู ุงูููุฏูู ุฅูู ุฃุฌุฒุงุก ุฃุตุบุฑ
```

### Test 6: ุตูุบุฉ ุบูุฑ ูุฏุนููุฉ (AVI)
```
ุงูุฅุฏุฎุงู:
  - old_video.avi
  - 150 MB
  - MIME: video/x-msvideo

ุงูุชุญูู:
  โ Format: AVI (not supported) โ
  โ Size: 150 MB (within range) โ

ุงููุชูุฌุฉ:
  โ ูุฑููุถ
  ๐ ุฑุณุงูุฉ: "ุงูุตูุบุฉ ุงููุณููุญุฉ: MP4, M4V, MOV, WebM"
  
  ๐ ุงูุตูุบ ุงููุฏุนููุฉ:
    โข MP4 (H.264) - ููุตู ุจู ุจุดุฏุฉ โ
    โข M4V (Apple MP4) - ููุตู ุจู โ
    โข MOV (iPhone) - ูุฏุนูู โ๏ธ
    โข WebM - ูุฏุนูู โ๏ธ
  
  ๐ก ูุชุญููู ุงูููุฏูู:
    โข ุงุณุชุฎุฏู HandBrake (ูุฌุงูู)
    โข ุฃู ุฃู ูุญูู ููุฏูู ุฅูู MP4
```

---

## ๐ Console Logs ููุชุชุจุน

### ุฑูุน ููู 280 MB MOV ูู iPhone:
```javascript
๐ [Validation] Ultra Mode - Checking file: {
  name: "IMG_5678.MOV",
  type: "video/quicktime",
  size: "280.45 MB"
}

๐ [Validation] Results: {
  extension: "mov",
  hasValidExtension: true,
  isPrimaryFormat: false,
  mimeType: "video/quicktime",
  hasValidMimeType: true
}

โ๏ธ [Validation] ุงูุตูุบุฉ .MOV ูุฏุนููุฉ ููู MP4 (H.264) ููุตู ุจู ููุฃุฏุงุก ุงูุฃูุถู

โ๏ธ [Validation] MIME type ุบูุฑ ููุงุณู: "video/quicktime" ููู ุงูุงูุชุฏุงุฏ ุตุญูุญ (.mov)

โ๏ธ [Validation] Large file: 280.45 MB - Upload may take ~6 minutes

โ [Validation] File validated successfully - Size: 280.5 MB, Format: .MOV

๐ [AdvancedUpload] Starting advanced chunked upload
๐ File: IMG_5678.MOV | Size: 280.45 MB

๐ฆ [AdvancedUpload] File divided into 36 chunks (8.00 MB each)

๐ค [ParallelUpload] Starting parallel upload with 6 workers
๐ค [ParallelUpload] Uploading chunks: 0, 1, 2, 3, 4, 5

โ [ChunkUpload] Chunk 0 uploaded successfully
โ [ChunkUpload] Chunk 2 uploaded successfully
โ [ChunkUpload] Chunk 1 uploaded successfully
...

โ [AdvancedUpload] Upload completed successfully
```

---

## ๐ ุงููููุงุช ุงููุนุฏููุฉ

### 1. advancedVideoUploadService.ts
```typescript
ุชุบููุฑุงุช ุฑุฆูุณูุฉ:
โ CHUNK_SIZE: 6 MB โ 8 MB
โ MAX_PARALLEL_UPLOADS: 4 โ 6
โ MAX_FILE_SIZE: 100 MB โ 500 MB
โ ุฏุนู MOV, WebM
โ ุชุญุฐูุฑุงุช ุฐููุฉ
โ console.log ููุตู
```

### 2. VideoIntroManager.tsx
```typescript
ุชุบููุฑุงุช:
โ ุนุฑุถ ุงูุชุญุฐูุฑุงุช (validation.warning)
โ ุฏุนู ุงูุตูุบุงุช ุงูุฌุฏูุฏุฉ
```

---

## โ๏ธ ุงูุชูููู ุงููุชูุฏู

```typescript
// ูู advancedVideoUploadService.ts

// Chunk Configuration
const CHUNK_SIZE = 8 * 1024 * 1024;  // 8 MB
const MAX_PARALLEL_UPLOADS = 6;       // 6 uploads
const MAX_RETRIES = 5;                // 5 retries

// Size Limits
const MAX_FILE_SIZE_BASIC = 100 * 1024 * 1024;     // 100 MB
const MAX_FILE_SIZE_ULTRA = 500 * 1024 * 1024;     // 500 MB
const AUTO_COMPRESS_THRESHOLD = 150 * 1024 * 1024; // 150 MB

// Timeouts
const UPLOAD_TIMEOUT = 300000;  // 5 minutes per chunk

// Supported Formats
const primaryExtensions = ['mp4', 'm4v'];
const secondaryExtensions = ['mov', 'webm'];
```

### ูุฒูุงุฏุฉ ุงูุญุฏ ุงูุฃูุตู ุฃูุซุฑ:
```typescript
// ูุฏุนู ุญุชู 1 GB (ุบูุฑ ููุตู ุจู):
const MAX_FILE_SIZE_ULTRA = 1024 * 1024 * 1024;  // 1 GB

// ุชุญุฐูุฑ: ูููุงุช ุฃูุจุฑ ูู 500 MB ูุฏ ุชูุดู ุนูู ุดุจูุงุช ุจุทูุฆุฉ
```

---

## ๐ก ูุตุงุฆุญ ููุงุณุชุฎุฏุงู ุงูุฃูุซู

### ูููุณุชุฎุฏููู:

```
โ ุงุณุชุฎุฏู MP4 (H.264) ุฏุงุฆูุงู - ุงูุฃูุถู ูุงูุฃุณุฑุน
โ ุงูุฌูุฏุฉ ุงูููุตู ุจูุง: 1080p @ 30fps
โ Bitrate ููุตู ุจู: 5-8 Mbps
โ ููููุฏูู ุงูุชุนุฑููู: 30-60 ุซุงููุฉ ูุงููุฉ (50-80 MB)
โ ุงุถุบุท ุงูููุฏูู ุจุงุณุชุฎุฏุงู HandBrake ูุจู ุงูุฑูุน ุฅุฐุง ูุงู ูุจูุฑุงู
```

### ูููุทูุฑูู:

```
โ ุฑุงูุจ console.log ููุชุชุจุน ุงูููุตู
โ ุงุณุชุฎุฏู Chunked Upload ูููููุงุช > 15 MB
โ ุงุฎุชุจุฑ ุนูู ุดุจูุงุช ุจุทูุฆุฉ (throttling)
โ ุงุฎุชุจุฑ ุนูู iPhone, Android, Desktop
โ ุงุฎุชุจุฑ ุตูุบุงุช ูุฎุชููุฉ: MP4, MOV, WebM
```

---

## ๐ฏ ุงูุฃุฏุงุก ุงููุชููุน

| ุญุฌู ุงูููู | ุนุฏุฏ ุงูู Chunks | Parallel Batches | ููุช ุงูุฑูุน (10 Mbps) |
|-----------|---------------|------------------|---------------------|
| 50 MB | 7 | 2 | ~1 ุฏูููุฉ |
| 100 MB | 13 | 3 | ~2 ุฏูููุฉ |
| 150 MB | 19 | 4 | ~3 ุฏูููุฉ |
| 200 MB | 25 | 5 | ~4 ุฏูููุฉ |
| 300 MB | 38 | 7 | ~6 ุฏูุงุฆู |
| 500 MB | 63 | 11 | ~10 ุฏูุงุฆู |

*ุงูุฃููุงุช ุชูุฑูุจูุฉ ูุชุนุชูุฏ ุนูู ุณุฑุนุฉ ุงูุฅูุชุฑูุช

---

## โ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

```
โ ุฏุนู ุญุชู 500 MB (5x ุฃูุจุฑ ูู ุงูุณุงุจู)
โ ุฏุนู MP4, M4V, MOV, WebM
โ ุฃุณุฑุน 50% (chunks ุฃูุจุฑ + parallel ุฃูุซุฑ)
โ ูุนูู ุนูู iPhone, Android, Desktop
โ ุชุญุฐูุฑุงุช ุฐููุฉ ููููุฏุฉ
โ console.log ููุตู ููุชุชุจุน
โ retry logic ูุญุณูู
โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ููููุฏุฉ
โ ุงูุจูุงุก ูุฌุญ ุจุฏูู ุฃุฎุทุงุก
```

---

## ๐ ุฌุงูุฒ ููุงุณุชุฎุฏุงู!

**ุงูุขู ููููู ุฑูุน:**
- โ ููุฏูููุงุช ุญุชู 500 MB
- โ ุตูุบุงุช ูุชุนุฏุฏุฉ: MP4, MOV, WebM
- โ ูู ุฃู ุฌูุงุฒ: iPhone, Android, Desktop
- โ ุฃุณุฑุน ูุฃูุซุฑ ุงุณุชูุฑุงุฑุงู

**ุงุจุฏุฃ ุงูุขู:**
1. ุงูุชุญ ููุญุฉ ุงููุฏูุฑ โ ุงูููุฏูู ุงูุชุนุฑููู
2. ุงุฑูุน ููุฏูู (ุญุชู 500 MB!)
3. ุฑุงูุจ ุงูุชูุฏู ูุงูุณุฑุนุฉ
4. โ ุงูุชูู!
