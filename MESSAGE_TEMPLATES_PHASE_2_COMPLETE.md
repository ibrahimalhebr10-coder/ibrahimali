# โ ุงููุฑุญูุฉ 2 - ููุงูุจ ุงูุฑุณุงุฆู - ููุชููุฉ

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ููุงูุจ ุงูุฑุณุงุฆู ุจูุฌุงุญ ูุน 4 ููุงูุจ ุงูุชุฑุงุถูุฉ ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู.

---

## โจ ูุง ุชู ุชูููุฐู

### 1๏ธโฃ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู `message_templates`
```sql
- id (uuid)
- name (text) - ุงุณู ุงููุงูุจ
- content (text) - ูุต ุงูุฑุณุงูุฉ
- variables (text[]) - ุงููุชุบูุฑุงุช ุงูุฏููุงููููุฉ
- category (text) - ุงูุชุตููู
- is_system (boolean) - ูุงูุจ ูุธุงู ุฃู ูุฎุตุต
- created_at (timestamptz)
- updated_at (timestamptz)
```

#### ุณูุงุณุงุช ุงูุฃูุงู (RLS)
- โ ุงููุฑุงุกุฉ - ุงููุฏูุฑ ุงูุนุงู ููุท
- โ ุงูุฅูุดุงุก - ุงููุฏูุฑ ุงูุนุงู ููุท
- โ ุงูุชุนุฏูู - ุงููุฏูุฑ ุงูุนุงู ููุท
- โ ุงูุญุฐู - ุงููุฏูุฑ ุงูุนุงู ููุท (ุงูููุงูุจ ุงููุฎุตุตุฉ ููุท)

---

### 2๏ธโฃ ุงูููุงูุจ ุงูุงูุชุฑุงุถูุฉ

#### ๐ ูุงูุจ "ูุชุญ ุณุฏุงุฏ"
- **ุงูุชุตููู**: ุณุฏุงุฏ
- **ุงููุชุบูุฑุงุช**:
  - `{{ุงุณู_ุงููุณุชุซูุฑ}}`
  - `{{ุฑูู_ุงูุญุฌุฒ}}`
  - `{{ุงุณู_ุงููุฒุฑุนุฉ}}`
  - `{{ุงููุจูุบ}}`
  - `{{ุชุงุฑูุฎ_ุงูุงุณุชุญูุงู}}`
  - `{{ุฑุงุจุท_ุงูุณุฏุงุฏ}}`

#### ๐ ูุงูุจ "ุชุฐููุฑ ุจุงูุณุฏุงุฏ"
- **ุงูุชุตููู**: ุณุฏุงุฏ
- **ุงููุชุบูุฑุงุช**:
  - `{{ุงุณู_ุงููุณุชุซูุฑ}}`
  - `{{ุฑูู_ุงูุญุฌุฒ}}`
  - `{{ุงุณู_ุงููุฒุฑุนุฉ}}`
  - `{{ุงููุจูุบ}}`
  - `{{ุชุงุฑูุฎ_ุงูุงุณุชุญูุงู}}`
  - `{{ุงูุฃูุงู_ุงููุชุจููุฉ}}`
  - `{{ุฑุงุจุท_ุงูุณุฏุงุฏ}}`

#### โ ูุงูุจ "ุชุฃููุฏ ุงุณุชูุงู ุงูุทูุจ"
- **ุงูุชุตููู**: ุญุฌูุฒุงุช
- **ุงููุชุบูุฑุงุช**:
  - `{{ุงุณู_ุงููุณุชุซูุฑ}}`
  - `{{ุฑูู_ุงูุญุฌุฒ}}`
  - `{{ุงุณู_ุงููุฒุฑุนุฉ}}`
  - `{{ููุน_ุงูุฃุดุฌุงุฑ}}`
  - `{{ุนุฏุฏ_ุงูุฃุดุฌุงุฑ}}`
  - `{{ุงููุจูุบ_ุงูุฅุฌูุงูู}}`
  - `{{ุญุงูุฉ_ุงูุทูุจ}}`
  - `{{ุฑุงุจุท_ุงูุญุฌุฒ}}`

#### ๐จ ูุงูุจ "ุฑุณุงูุฉ ุนุงูุฉ"
- **ุงูุชุตููู**: ุนุงู
- **ุงููุชุบูุฑุงุช**:
  - `{{ุงุณู_ุงููุณุชุซูุฑ}}`
  - `{{ูุญุชูู_ุงูุฑุณุงูุฉ}}`

---

### 3๏ธโฃ ุฎุฏูุฉ ุงูููุงูุจ (messageTemplatesService)

#### ุงููุธุงุฆู ุงููุชุงุญุฉ:
```typescript
// ุฌูุจ ุฌููุน ุงูููุงูุจ
getAllTemplates(): Promise<MessageTemplate[]>

// ุฌูุจ ูุงูุจ ูุญุฏุฏ
getTemplateById(id: string): Promise<MessageTemplate | null>

// ุฅูุดุงุก ูุงูุจ ุฌุฏูุฏ
createTemplate(template): Promise<MessageTemplate>

// ุชุญุฏูุซ ูุงูุจ
updateTemplate(id: string, updates): Promise<MessageTemplate>

// ุญุฐู ูุงูุจ
deleteTemplate(id: string): Promise<void>

// ุงุณุชุจุฏุงู ุงููุชุบูุฑุงุช ูู ุงููุต
replaceVariables(template: string, variables: Record<string, string>): string

// ุงุณุชุฎุฑุงุฌ ุงููุชุบูุฑุงุช ูู ุงููุต
extractVariables(template: string): string[]
```

---

### 4๏ธโฃ ูุงุฌูุฉ ุงููุณุชุฎุฏู (MessageTemplates Component)

#### ุงููููุฒุงุช:
- โ ุนุฑุถ ุฌููุน ุงูููุงูุจ ูุน ุงูุชุตูููุงุช
- โ ุฅูุดุงุก ููุงูุจ ุฌุฏูุฏุฉ
- โ ุชุนุฏูู ุงูููุงูุจ ุงูููุฌูุฏุฉ
- โ ุญุฐู ุงูููุงูุจ ุงููุฎุตุตุฉ
- โ ุญูุงูุฉ ููุงูุจ ุงููุธุงู ูู ุงูุญุฐู
- โ ุงูุชุดุงู ุชููุงุฆู ูููุชุบูุฑุงุช ูู ุงููุต
- โ ุนุฑุถ ุงููุชุบูุฑุงุช ุงูููุชุดูุฉ ูุน badges
- โ ูุนุงููุฉ ุงููุต ูุน ุชุตููู monospace
- โ ุชุตูููุงุช ููููุฉ ููููุงูุจ
- โ ุฃููููุงุช ูุงุถุญุฉ ููุชุนุฏูู ูุงูุญุฐู

#### ุฃููุงุน ุงูููุงูุจ:
1. **ููุงูุจ ุงููุธุงู** (is_system = true)
   - ูุญููุฉ ูู ุงูุญุฐู
   - ูููู ุชุนุฏูู ุงููุญุชูู ููุท
   - ุชุธูุฑ ุจุฃููููุฉ ููู ๐

2. **ููุงูุจ ูุฎุตุตุฉ** (is_system = false)
   - ูููู ุชุนุฏูููุง ุจุงููุงูู
   - ูููู ุญุฐููุง

---

### 5๏ธโฃ ุงูุชูุงูู ูุน ูุฑูุฒ ุงูุฑุณุงุฆู

#### ุงูุชุจููุจุงุช ุงููุชุงุญุฉ:
1. ุตูุฏูู ุงููุงุฑุฏ
2. ุงูุฑุณุงุฆู ุงููุฑุณูุฉ
3. **๐ ููุงูุจ ุงูุฑุณุงุฆู** โ ุฌุฏูุฏ
4. ุฅูุดุงุก ุฑุณุงูุฉ

---

## ๐จ ุชุตููู ุงููุงุฌูุฉ

### ุงูุจุทุงูุงุช:
- ุชุตููู ุฃููู ูุน ุธูุงู ุฏููุงููููุฉ
- ุฃููููุฉ ุฎุถุฑุงุก ููู ูุงูุจ
- ุนุฑุถ ูุนุงููุฉ ูููุต (200 ุญุฑู)
- ุชุตูููุงุช ููููุฉ ุญุณุจ ุงูููุน:
  - ๐ข ุณุฏุงุฏ (ุฃุฎุถุฑ)
  - ๐ต ุญุฌูุฒุงุช (ุฃุฒุฑู)
  - โช ุนุงู (ุฑูุงุฏู)
  - ๐ก ุฅุดุนุงุฑุงุช (ุฃุตูุฑ)

### ูููุฐุฌ ุงูุชุนุฏูู/ุงูุฅูุดุงุก:
- ุญูู ุงูุงุณู
- ูุงุฆูุฉ ุงูุชุตูููุงุช
- textarea ูุจูุฑ ูููุต
- ุงูุชุดุงู ููุฑู ูููุชุบูุฑุงุช
- ุนุฑุถ ุงููุชุบูุฑุงุช ุงูููุชุดูุฉ
- ุฃุฒุฑุงุฑ ุญูุธ ูุฅูุบุงุก

---

## ๐ ุงูุตูุงุญูุงุช

### ูู ููููู ุงููุตูู:
- โ ุงููุฏูุฑ ุงูุนุงู (super_admin) ููุท
- โ ุฌููุน ุงูุฃุฏูุงุฑ ุงูุฃุฎุฑู

### ุงูุนูููุงุช ุงููุชุงุญุฉ:
- โ ุนุฑุถ ุฌููุน ุงูููุงูุจ
- โ ุฅูุดุงุก ููุงูุจ ูุฎุตุตุฉ
- โ ุชุนุฏูู ุฌููุน ุงูููุงูุจ
- โ ุญุฐู ุงูููุงูุจ ุงููุฎุตุตุฉ ููุท
- โ ุญุฐู ููุงูุจ ุงููุธุงู

---

## ๐ ุงูุชุตูููุงุช ุงููุชุงุญุฉ

1. **ุนุงู** (general) - ุฑุณุงุฆู ุนุงูุฉ
2. **ุณุฏุงุฏ** (payment) - ุฑุณุงุฆู ูุชุนููุฉ ุจุงูุฏูุนุงุช
3. **ุญุฌูุฒุงุช** (reservation) - ุฑุณุงุฆู ุงูุญุฌูุฒุงุช
4. **ุฅุดุนุงุฑุงุช** (notification) - ุฅุดุนุงุฑุงุช ุนุงูุฉ

---

## ๐ก ุงููุชุบูุฑุงุช ุงูุฏููุงููููุฉ

### ุทุฑููุฉ ุงูุงุณุชุฎุฏุงู:
```
{{ุงุณู_ุงููุชุบูุฑ}}
```

### ุฃูุซูุฉ ุดุงุฆุนุฉ:
- `{{ุงุณู_ุงููุณุชุซูุฑ}}`
- `{{ุงุณู_ุงููุฒุฑุนุฉ}}`
- `{{ุฑูู_ุงูุญุฌุฒ}}`
- `{{ุงููุจูุบ}}`
- `{{ุชุงุฑูุฎ_ุงูุงุณุชุญูุงู}}`
- `{{ุฑุงุจุท_ุงูุณุฏุงุฏ}}`
- `{{ุนุฏุฏ_ุงูุฃุดุฌุงุฑ}}`
- `{{ููุน_ุงูุฃุดุฌุงุฑ}}`

---

## ๐ ุงูุงุณุชุฎุฏุงู ุงููุณุชูุจูู

### ูู ุงููุฑุงุญู ุงููุงุฏูุฉ:
1. **ูู ุตูุญุฉ ุงูุญุฌูุฒุงุช**: ุนูุฏ ุชุฃููุฏ ุงูุญุฌุฒุ ุฅุฑุณุงู ุฑุณุงูุฉ ุจุงุณุชุฎุฏุงู ูุงูุจ "ุชุฃููุฏ ุงุณุชูุงู ุงูุทูุจ"
2. **ูู ุงููุธุงู ุงููุงูู**: ุนูุฏ ูุชุญ ุฏูุนุฉุ ุฅุฑุณุงู ุฑุณุงูุฉ ุจุงุณุชุฎุฏุงู ูุงูุจ "ูุชุญ ุณุฏุงุฏ"
3. **ุฌุฏููุฉ ุชููุงุฆูุฉ**: ุฅุฑุณุงู ุชุฐููุฑุงุช ุจุงุณุชุฎุฏุงู ูุงูุจ "ุชุฐููุฑ ุจุงูุณุฏุงุฏ"
4. **ูู ูุฑูุฒ ุงูุฑุณุงุฆู**: ุงุฎุชูุงุฑ ูุงูุจ ูุฅุฑุณุงูู ููุณุชุซูุฑูู ูุญุฏุฏูู

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ/ุงููุนุฏูุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```
supabase/migrations/
โโโ YYYYMMDDHHMMSS_create_message_templates_system.sql
โโโ YYYYMMDDHHMMSS_seed_default_message_templates.sql
```

### ุงูุฎุฏูุงุช:
```
src/services/
โโโ messageTemplatesService.ts (ุฌุฏูุฏ)
```

### ุงูููููุงุช:
```
src/components/admin/
โโโ MessageTemplates.tsx (ุฌุฏูุฏ)
โโโ MessagesCenter.tsx (ูุนุฏู)
```

---

## โ ูุชุงุฆุฌ ุงููุฑุญูุฉ

1. โ ุชุจููุจ "ููุงูุจ ุงูุฑุณุงุฆู" ุธุงูุฑ ูู ูุฑูุฒ ุงูุฑุณุงุฆู
2. โ 4 ููุงูุจ ุงูุชุฑุงุถูุฉ ุฌุงูุฒุฉ
3. โ ุฅููุงููุฉ ุฅูุดุงุก ููุงูุจ ูุฎุตุตุฉ
4. โ ุชุนุฏูู ุงูููุงูุจ ูุน ุงูุญูุงุธ ุนูู ุญูุงูุฉ ููุงูุจ ุงููุธุงู
5. โ ุงูุชุดุงู ุชููุงุฆู ูููุชุบูุฑุงุช
6. โ ูุงุฌูุฉ ุณููุฉ ูุฃูููุฉ
7. โ ุญูุงูุฉ ูุงููุฉ ุจุตูุงุญูุงุช RLS

---

## ๐ ุงูุญุงูุฉ

**ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ุงููุฑุงุญู ุงููุงุฏูุฉ!**

ุงูููุงูุจ ุฌุงูุฒุฉ ููููู ุงุณุชุฎุฏุงููุง ูู:
- ุฅุฑุณุงู ุงูุฑุณุงุฆู ูู ุงูุฃูุณุงู ุงูุฃุฎุฑู
- ุงูุฌุฏููุฉ ุงูุชููุงุฆูุฉ
- ุงูุฅุดุนุงุฑุงุช
- ุงููุฑุงุณูุงุช ุงูุฌูุงุนูุฉ

---

## ๐ ููุงุญุธุงุช

1. **ุงูููุงูุจ ูุง ุชุฑุณู ุฑุณุงุฆู ุจุญุฏ ุฐุงุชูุง** - ูู ููุท ููุงูุจ ุฌุงูุฒุฉ
2. **ุงูุฅุฑุณุงู ุงููุนูู** ุณูุชู ูู ุงููุฑุงุญู ุงููุงุฏูุฉ ูู ุงูุฃูุณุงู ุงูุฃุฎุฑู
3. **ุงููุชุบูุฑุงุช ุชูุณุชุจุฏู ุชููุงุฆูุงู** ุนูุฏ ุงูุฅุฑุณุงู ุจุงุณุชุฎุฏุงู ุฏุงูุฉ `replaceVariables`
4. **ููุงูุจ ุงููุธุงู ูุญููุฉ** ููุง ูููู ุญุฐููุง ูุถูุงู ุชููุฑูุง ุฏุงุฆูุงู

---

**ุชุงุฑูุฎ ุงูุฅูุฌุงุฒ**: 2026-01-28
**ุงูุญุงูุฉ**: โ ููุชูู ุจูุฌุงุญ
