# ูุธุงู ุฑูุน ุงููููุงุช ููุชูุซูู ุงูุฒุฑุงุนู

## ๐ ูุธุฑุฉ ุนุงูุฉ

ุชู ุชุญุฏูุซ ุชุจููุจ "ุงูุชูุซูู ุงูุฒุฑุงุนู" ููุฏุนู ุฑูุน ุงูุตูุฑ ูุงูููุฏูููุงุช ูุจุงุดุฑุฉ ูู ุงูุฌูุงุฒ (ุฌูุงู ุฃู ููุจููุชุฑ) ุจุฏูุงู ูู ุฅุฏุฎุงู ุฑูุงุจุท ุฎุงุฑุฌูุฉ.

---

## โจ ุงูููุฒุงุช ุงูุฌุฏูุฏุฉ

### 1๏ธโฃ ุฑูุน ุงููููุงุช ูู ุงูุฌูุงุฒ
- โ ุฏุนู ุฑูุน **ุงูุตูุฑ**: JPG, PNG, WebP, HEIC
- โ ุฏุนู ุฑูุน **ุงูููุฏูููุงุช**: MP4, MOV, AVI, WebM
- โ ุฑูุน **ุนุฏุฉ ุตูุฑ** ูู ููุณ ุงูููุช (multi-select)
- โ ุฑูุน **ููุฏูู ูุงุญุฏ** ูู ูู ูุฑุฉ
- โ ุญุฏ ุฃูุตู ูุญุฌู ุงูููุฏูู: **50 ููุฌุงุจุงูุช**

### 2๏ธโฃ ูุนุงููุฉ ุงููููุงุช ูุจู ุงูุฑูุน
- ูุนุงููุฉ ุงูุตูุฑ ูู ุดุจูุฉ 3 ุฃุนูุฏุฉ
- ูุนุงููุฉ ุงูููุฏูู ุจุฅููุงููุฉ ุงูุชุดุบูู
- ุฅุฒุงูุฉ ูููุงุช ูุนููุฉ ูู ุงููุงุฆูุฉ ูุจู ุงูุฑูุน

### 3๏ธโฃ ุดุฑูุท ุชูุฏู ุงูุฑูุน
- ุนุฑุถ ูุณุจุฉ ุงูุฑูุน ุงููุฆููุฉ
- ุดุฑูุท ุชูุฏู ุจุตุฑู
- ุชุนุทูู ุงูุฃุฒุฑุงุฑ ุฃุซูุงุก ุงูุฑูุน

### 4๏ธโฃ ุนุฑุถ ูุญุณูู ูููููุงุช
- ุนุฑุถ ุงูุตูุฑ ูุจุงุดุฑุฉ ูู ุงูุจุทุงูุงุช
- ูุดุบู ููุฏูู ูุฏูุฌ
- ุฒุฑ ุญุฐู ุนูู ุงูุตูุฑุฉ/ุงูููุฏูู ูุจุงุดุฑุฉ
- badges ููููุน ูุงูุฑุจุท ุนูู ุงูุตูุฑุฉ ููุณูุง

### 5๏ธโฃ ุญุฐู ุฐูู
- ุญุฐู ุงูููู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช **ูุงูุชุฎุฒูู**
- ุชูุธูู ูุงูู ูููููุงุช

---

## ๐๏ธ Supabase Storage

### Bucket: `agricultural-documentation`

**ุงูููุงุตูุงุช:**
- ๐ ุงุณู ุงูู bucket: `agricultural-documentation`
- ๐ ุนุงู (Public): ูุนู
- ๐ฆ ุญุฏ ุฃูุตู ูุญุฌู ุงูููู: **50MB**
- ๐ ุงูุฃูุงู: RLS ููุนูู

**ุฃููุงุน ุงููููุงุช ุงููุฏุนููุฉ:**
```
ุงูุตูุฑ:
- image/jpeg
- image/jpg
- image/png
- image/webp
- image/heic

ุงูููุฏูููุงุช:
- video/mp4
- video/quicktime
- video/x-msvideo
- video/webm
```

### ุณูุงุณุงุช ุงูุฃูุงู (RLS Policies)

#### 1. ุฑูุน ุงููููุงุช
```sql
"Admins can upload documentation files"
- ููุฃุฏูู ุงููุตุงุฏููู ููุท
- INSERT ุนูู storage.objects
```

#### 2. ุญุฐู ุงููููุงุช
```sql
"Admins can delete documentation files"
- ููุฃุฏูู ุงููุตุงุฏููู ููุท
- DELETE ุนูู storage.objects
```

#### 3. ุนุฑุถ ุงููููุงุช
```sql
"Anyone can view documentation files"
- ููุฌููุน (ุงูู bucket ุนุงู)
- SELECT ุนูู storage.objects
```

---

## ๐จ ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ูููุฐุฌ ุงูุฑูุน

**ุฎุทูุงุช ุงูุฑูุน:**
1. ุงุฎุชุฑ ููุน ุงูููู (ุตูุฑุฉ ุฃู ููุฏูู)
2. ุงุถุบุท ุนูู ููุทูุฉ ุงูุฑูุน ูุงุฎุชูุงุฑ ุงููููุงุช
3. ูุนุงููุฉ ุงููููุงุช ุงููุฎุชุงุฑุฉ
4. ุฅุฒุงูุฉ ุฃู ููู ุบูุฑ ูุฑุบูุจ (ุงุฎุชูุงุฑู)
5. ุงุฎุชุฑ ุงูุนูููุฉ ุฃู ุงููุฑุญูุฉ ููุฑุจุท
6. ุฃุถู ุชุนููู (ุงุฎุชูุงุฑู)
7. ุงุถุบุท "ุฑูุน"

**ุฃุซูุงุก ุงูุฑูุน:**
- ุนุฑุถ ูุณุจุฉ ุงูุชูุฏู
- ุดุฑูุท ุชูุฏู ุจุตุฑู
- ุชุนุทูู ุฌููุน ุงูุฃุฒุฑุงุฑ
- ูุต "ุฌุงุฑู ุงูุฑูุน..."

**ุจุนุฏ ุงูุฑูุน:**
- ุฑุณุงูุฉ ูุฌุงุญ ุจุนุฏุฏ ุงููููุงุช ุงููุฑููุนุฉ
- ุชุญุฏูุซ ุชููุงุฆู ูููุงุฆูุฉ
- ุฅุนุงุฏุฉ ุชุนููู ุงููููุฐุฌ

### ุนุฑุถ ุงููููุงุช

**ุจุทุงูุงุช ุงูุตูุฑ:**
```
โโโโโโโโโโโโโโโโโโโโโโโ
โ [ุตูุฑุฉ ูุนุฑูุถุฉ]      โ
โ [ุฒุฑ ุญุฐู] [badges]   โ
โโโโโโโโโโโโโโโโโโโโโโโค
โ ุงูุชุนููู (ุฅู ูุฌุฏ)   โ
โ ุงูุชุงุฑูุฎ             โ
โโโโโโโโโโโโโโโโโโโโโโโ
```

**ุจุทุงูุงุช ุงูููุฏูู:**
```
โโโโโโโโโโโโโโโโโโโโโโโ
โ [ูุดุบู ููุฏูู]       โ
โ [ุฒุฑ ุญุฐู] [badges]   โ
โโโโโโโโโโโโโโโโโโโโโโโค
โ ุงูุชุนููู (ุฅู ูุฌุฏ)   โ
โ ุงูุชุงุฑูุฎ             โ
โโโโโโโโโโโโโโโโโโโโโโโ
```

**ุงูู Badges:**
- ุงูููุน: "ุตูุฑุฉ" ุฃู "ููุฏูู"
- ุงูุฑุจุท: "ุนูููุฉ" ุฃู "ูุฑุญูุฉ"

---

## ๐ง ุงูุชูุงุตูู ุงูุชูููุฉ

### ุชุณููุฉ ุงููููุงุช

```typescript
const fileName = `${farm_id}/${Date.now()}_${randomString}.${extension}`;
```

**ูุซุงู:**
```
a910bce1-166b-4deb-aab4-26c5fe485e6d/1738587234567_abc123.jpg
```

**ุงูููุงุฆุฏ:**
- ุชูุธูู ุงููููุงุช ุญุณุจ ุงููุฒุฑุนุฉ
- ุฃุณูุงุก ูุฑูุฏุฉ (timestamp + random)
- ุณูููุฉ ุงูุชุชุจุน ูุงูุญุฐู

### ุฑูุน ูุชุนุฏุฏ

ุนูุฏ ุฑูุน ุนุฏุฉ ุตูุฑ:
```typescript
for (let i = 0; i < selectedFiles.length; i++) {
  // ุฑูุน ุฅูู Storage
  const uploadData = await supabase.storage.upload(...);

  // ุญูุธ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
  await supabase.insert(...);

  // ุชุญุฏูุซ ุดุฑูุท ุงูุชูุฏู
  setUploadProgress((i + 1) / total * 100);
}
```

### ุญุฐู ูุงูู

```typescript
// 1. ุญุฐู ูู Storage
await supabase.storage.remove([filePath]);

// 2. ุญุฐู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
await supabase.delete().eq('id', id);
```

---

## ๐ฑ ุฏุนู ุงูุฌูุงู

### ุงุฎุชูุงุฑ ุงููููุงุช ุนูู ุงูุฌูุงู

**ุงููุงููุฑุง ูุงููุนุฑุถ:**
```html
<input type="file" accept="image/*" capture="environment" />
```

ุงูุฌูุงู ุณูุนุฑุถ ุฎูุงุฑุงุช:
- ุงูุชูุงุท ุตูุฑุฉ (ุงููุงููุฑุง)
- ุงุฎุชูุงุฑ ูู ุงููุนุฑุถ

**ุงูููุฏูู:**
```html
<input type="file" accept="video/*" />
```

### ูุนุงููุฉ ุนูู ุงูุฌูุงู

- ุงูุตูุฑ: ุดุจูุฉ responsive (1 ุนููุฏ ุนูู ุงูุฌูุงู)
- ุงูููุฏูููุงุช: ูุดุบู HTML5 ุงูุฃุตูู
- ุฃุฒุฑุงุฑ ูุจูุฑุฉ ูุณููุฉ ุงูููุณ

---

## ๐งช ููููุฉ ุงูุงุฎุชุจุงุฑ

### 1๏ธโฃ ุชุณุฌูู ุงูุฏุฎูู ูุฃุฏูู

```
ุงูุฑุงุจุท: /admin
ุงูุจุฑูุฏ: admin@dev.com
ูููุฉ ุงููุฑูุฑ: Admin@123
```

### 2๏ธโฃ ุงูุงูุชูุงู ููุชูุซูู ุงูุฒุฑุงุนู

1. ุงุฐูุจ ุฅูู: **ููุญุฉ ุงูุชุญูู** โ **ูุฒุฑุนุชู**
2. ุงุฎุชุฑ ุงููุณุงุฑ: **ุงููุณุงุฑ ุงูุฒุฑุงุนู**
3. ุงุฎุชุฑ ูุฒุฑุนุฉ
4. ุงูุชุญ ุชุจููุจ: **ุงูุชูุซูู ุงูุฒุฑุงุนู**

### 3๏ธโฃ ุฑูุน ุตูุฑ

1. ุงุถุบุท "ุฑูุน ููู"
2. ุงุฎุชุฑ "ุตูุฑุฉ"
3. ุงุถุบุท ุนูู ููุทูุฉ ุงูุฑูุน
4. ุงุฎุชุฑ **ุนุฏุฉ ุตูุฑ** (Ctrl/Cmd + Click)
5. ุดุงูุฏ ุงููุนุงููุฉ
6. ุงุฎุชุฑ ุงูุนูููุฉ ููุฑุจุท
7. ุงุถุบุท "ุฑูุน"
8. โ ุดุงูุฏ ุดุฑูุท ุงูุชูุฏู
9. โ ุณุชุธูุฑ ุฑุณุงูุฉ ูุฌุงุญ

### 4๏ธโฃ ุฑูุน ููุฏูู

1. ุงุถุบุท "ุฑูุน ููู"
2. ุงุฎุชุฑ "ููุฏูู"
3. ุงุฎุชุฑ ููุฏูู (ุญุฏ ุฃูุตู 50MB)
4. ุดุงูุฏ ูุนุงููุฉ ุงูููุฏูู
5. ุงุฎุชุฑ ุงููุฑุญูุฉ ููุฑุจุท
6. ุงุถุบุท "ุฑูุน"
7. โ ุณูุชู ุฑูุนู ุจูุฌุงุญ

### 5๏ธโฃ ุนุฑุถ ูุญุฐู

- ุงูุตูุฑ ุชูุนุฑุถ ูุจุงุดุฑุฉ ูู ุงูุจุทุงูุงุช
- ุงูููุฏูููุงุช ุจูุง ูุดุบู ูุฏูุฌ
- ุงุถุบุท ุฒุฑ ุงูุญุฐู ุงูุฃุญูุฑ
- โ ุณูุชู ุงูุญุฐู ูู Storage ูุงูู DB

### 6๏ธโฃ ุงุฎุชุจุงุฑ ุนูู ุงูุฌูุงู

1. ุงูุชุญ ุงููููุน ุนูู ุงูุฌูุงู
2. ุณุฌู ุฏุฎูู ูุฃุฏูู
3. ุฌุฑุจ ุฑูุน ุตูุฑุฉ ูู ุงููุงููุฑุง
4. ุฌุฑุจ ุฑูุน ููุฏูู ูู ุงููุนุฑุถ
5. โ ูู ุดูุก ูุฌุจ ุฃู ูุนูู ุจุณูุงุณุฉ

---

## โ๏ธ ุงูุชูููู

### ุญุฌู ุงูููู ุงูุฃูุตู

ูุชุบููุฑ ุญุฏ ุงูู 50MBุ ุนุฏู ูู ุงูู migration:

```sql
INSERT INTO storage.buckets (
  ...
  file_size_limit = 104857600  -- 100MB ุจุฏูุงู ูู 50MB
)
```

### ุฃููุงุน ุงููููุงุช ุงููุฏุนููุฉ

ูุฅุถุงูุฉ ุฃููุงุน ุฌุฏูุฏุฉ:

```sql
allowed_mime_types = ARRAY[
  ...
  'image/gif',      -- ุฅุถุงูุฉ GIF
  'video/mpeg'      -- ุฅุถุงูุฉ MPEG
]
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: "ุญุฌู ุงูููุฏูู ูุฌุจ ุฃู ูููู ุฃูู ูู 50 ููุฌุงุจุงูุช"

**ุงูุญู:**
- ุชุฃูุฏ ูู ุฃู ุงูููุฏูู ุฃุตุบุฑ ูู 50MB
- ุฃู ูู ุจุฑูุน ุญุฏ ุงูุญุฌู ูู ุงูู bucket

### ุงููุดููุฉ: "ุญุฏุซ ุฎุทุฃ ุฃุซูุงุก ุฑูุน ุงููููุงุช"

**ุงูุฃุณุจุงุจ ุงููุญุชููุฉ:**
1. ุนุฏู ุชุณุฌูู ุงูุฏุฎูู ูุฃุฏูู
2. ูุดููุฉ ูู ุงูุงุชุตุงู
3. ููุน ููู ุบูุฑ ูุฏุนูู

**ุงูุญู:**
- ุชุญูู ูู Console ูู ุงููุชุตูุญ
- ุชุฃูุฏ ูู ุชุณุฌูู ุงูุฏุฎูู
- ุชุฃูุฏ ูู ููุน ุงูููู

### ุงููุดููุฉ: ุงูุตูุฑุฉ ูุง ุชุธูุฑ ุจุนุฏ ุงูุฑูุน

**ุงูุญู:**
- ุชุญุฏูุซ ุงูุตูุญุฉ (F5)
- ุชุญูู ูู ุฃู ุงูู bucket ุนุงู (public: true)
- ุชุญูู ูู ุณูุงุณุงุช RLS

---

## ๐ ุงูุฅุญุตุงุฆูุงุช

### ูุจู ุงูุชุญุฏูุซ
- ุฑูุน ุนุจุฑ ุฑูุงุจุท ุฎุงุฑุฌูุฉ ููุท
- ูุง ูุนุงููุฉ
- ุนุฑุถ ุฑุงุจุท ููุท

### ุจุนุฏ ุงูุชุญุฏูุซ
- โ ุฑูุน ูุจุงุดุฑ ูู ุงูุฌูุงุฒ
- โ ูุนุงููุฉ ูุจู ุงูุฑูุน
- โ ุนุฑุถ ุงูุตูุฑ ูุงูููุฏูููุงุช
- โ ุดุฑูุท ุชูุฏู
- โ ุฏุนู ูุชุนุฏุฏ ุงูุตูุฑ
- โ ุญุฐู ูุงูู

---

## ๐ ุงูุฃูุงู

### ุญูุงูุฉ ุงูุฑูุน
- โ ููุฃุฏูู ุงููุตุงุฏููู ููุท
- โ ุงูุชุญูู ูู ููุน ุงูููู
- โ ุญุฏ ุฃูุตู ูุญุฌู ุงูููู
- โ ุชุณููุฉ ุขููุฉ ูููููุงุช

### ุญูุงูุฉ ุงูุญุฐู
- โ ููุฃุฏูู ุงููุตุงุฏููู ููุท
- โ ุฑุณุงูุฉ ุชุฃููุฏ ูุจู ุงูุญุฐู
- โ ุญุฐู ูู Storage ูุงูู DB

### ุงูุนุฑุถ ุงูุนุงู
- โ ุงูู bucket ุนุงู ููุนุฑุถ ููุท
- โ ูุง ูููู ุงูุชุนุฏูู ุฃู ุงูุญุฐู ููุฒูุงุฑ

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุชู ุชุญููู "ุงูุชูุซูู ุงูุฒุฑุงุนู" ูู ูุธุงู ุฑูุงุจุท ุฎุงุฑุฌูุฉ ุฅูู **ูุธุงู ุฑูุน ูููุงุช ุงุญุชุฑุงูู** ูุน:

1. โ ุฑูุน ูุจุงุดุฑ ูู ุงูุฌูุงุฒ (ุฌูุงู/ููุจููุชุฑ)
2. โ ูุนุงููุฉ ูุจู ุงูุฑูุน
3. โ ุดุฑูุท ุชูุฏู ุจุตุฑู
4. โ ุนุฑุถ ุงูุตูุฑ ูุงูููุฏูููุงุช ูุจุงุดุฑุฉ
5. โ ุญุฐู ุขูู ูู Storage ูุงูู DB
6. โ ุฏุนู ูุงูู ููุฌูุงู
7. โ ุฃูุงู ูุญูู ุนุจุฑ RLS
8. โ ูุงุฌูุฉ ูุณุชุฎุฏู ุฌูููุฉ ูุณููุฉ

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู!** ๐

---

**ุชุงุฑูุฎ ุงูุชุญุฏูุซ:** 2026-02-04
**ุนุฏุฏ ุงููููุงุช ุงููุนุฏูุฉ:** 2 ูููุงุช
**Migrations:** 1 migration
**ุงูุญุงูุฉ:** โ ููุชูู ููุฎุชุจุฑ
