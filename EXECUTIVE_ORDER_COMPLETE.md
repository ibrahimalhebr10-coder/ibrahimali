# ุฃูุฑ ุชูููุฐู: ููุน ุฎูุท ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ูุน ุบูุฑ ุงููุญุฌูุฒุฉ - ููุชูู โ

## ุชุงุฑูุฎ ุงูุฅููุงู
2026-02-05

---

## ุงูููุฎุต ุงูุชูููุฐู

ุชู ุชูููุฐ **ุฌููุน ุงูููุงุท ุงูุฎูุณ** ูู ุงูุฃูุฑ ุงูุชูููุฐู ุจูุฌุงุญ.

**ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ ูุญููุธุฉ**:
ุฑุณูู ุงูุตูุงูุฉ ุชูุญุณุจ ูุชููุฒุน **ููุท** ุนูู ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ูู ุงููุณุงุฑ ุงููุญุฏุฏ (ุฎุถุฑุงุก ุฃู ุฐูุจูุฉ).

**ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ = ุฎุงุฑุฌ ุฃู ุงูุชุฒุงู ูุงูู.**

---

## ุชูุตูู ุงูุชูููุฐ

### 1๏ธโฃ ุชุนุฑูู ุญุงูุงุช ุงูุฃุดุฌุงุฑ ุฏุงุฎู ุงููุฒุฑุนุฉ โ

**ุงูุชุทุจูู:**
```typescript
// ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
path_type IN ('agricultural', 'investment')

// ูู ุงูููุฏ
reserved_green โ path_type = 'agricultural'
reserved_gold โ path_type = 'investment'
unreserved โ ูุง ุชูุฌุฏ ูู ุฌุฏูู reservations (ุญุณุงุจ ุชููุงุฆู)
```

**ุงููููุน:**
- `supabase/migrations/20260203195400_add_path_type_to_reservations_tree_pool_architecture.sql`
- `supabase/migrations/20260204151346_add_path_type_to_maintenance_fees.sql`

**ุงูุชุญูู:**
```typescript
// ูู operationsService.ts
async getReservedTreesCount(farmId, pathType) {
  // ููุฑุฌุน ููุท ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ูู ุงููุณุงุฑ ุงููุญุฏุฏ
  return (data || []).reduce((sum, r) => sum + r.total_trees, 0);
}
```

---

### 2๏ธโฃ ูุงุนุฏุฉ ุชูุฒูุน ุงูุฑุณูู (ุฃุณุงุณูุฉ) โ

**ุงูุชุทุจูู:**
```typescript
// ูู operationsService.ts - createFullMaintenanceRecord
async createFullMaintenanceRecord(data: {
  farm_id: string;
  path_type: 'agricultural' | 'investment';  // โ ุฅูุฒุงูู!
  // ...
}) {
  if (data.total_amount && parseFloat(data.total_amount) > 0) {
    const reservedTrees = await this.getReservedTreesCount(
      data.farm_id,
      data.path_type
    );

    if (reservedTrees === 0) {
      throw new Error('ูุง ูููู ุฅุถุงูุฉ ุฑุณูู. ูุง ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ');
    }
  }
  // ...
}
```

**ุงููุนุงุฏูุฉ:**
```
ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุนุชูุฏ = ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ูู ุงููุณุงุฑ ููุท
ุชูููุฉ ุงูุดุฌุฑุฉ = ูุจูุบ ุงูุฑุณูู รท ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุนุชูุฏ
```

**ุงููููุน:**
- `src/services/operationsService.ts` (lines 549-670)

---

### 3๏ธโฃ ููู ุฅุฏุฎุงู ุงูุฑุณูู ุงูุฎุงุทุฆ โ

**ุงูุชุทุจูู ูู ุงูููุฏ:**

#### ุฃ) ูู ุงูู Service Layer
```typescript
// operationsService.ts
async createGroupedFee(
  fee: {...} & { path_type: 'agricultural' | 'investment' },
  farmId: string
) {
  const reservedTrees = await this.getReservedTreesCount(farmId, fee.path_type);

  if (reservedTrees === 0) {
    throw new Error('ูุง ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ ูู ูุฐุง ุงููุณุงุฑ');
  }

  // โ ุงูุญุณุงุจ ุงูุตุญูุญ
  const costPerTree = fee.total_amount / reservedTrees;

  // โ ููููุน: fee.total_amount / farm.total_trees
}
```

#### ุจ) ูู ุงูู UI Layer
```typescript
// MaintenanceRecordWizard.tsx
const reservedTreesCount = selectedFarm
  ? (formData.path_type === 'agricultural'
      ? selectedFarm.agricultural_trees
      : selectedFarm.investment_trees)
  : 0;

const canAddFees = reservedTreesCount > 0;

<input
  type="number"
  disabled={!canAddFees}
  placeholder={canAddFees ? "0.00" : "ูุง ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ"}
  // ...
/>
```

**ุงูุญูุงูุฉ:**
- โ ููููุน ุฅุฏุฎุงู ุฑุณูู ุนูู "ุงููุฒุฑุนุฉ ุจุงููุงูู"
- โ ููููุน ุฅุฏุฎุงู ุฑุณูู ุจุฏูู ุชุญุฏูุฏ ูุณุงุฑ
- โ ููููุน ุฃู ุญุณุงุจ ูุนุชูุฏ ุนูู `total_farm_trees`
- โ ุงูุญุณุงุจ ุฏุงุฆูุงู ูุนุชูุฏ ุนูู `reserved_trees_by_path`

**ุงููููุน:**
- `src/components/admin/MaintenanceRecordWizard.tsx` (lines 1-900)
- `src/services/operationsService.ts` (lines 250-262, 449-472)

---

### 4๏ธโฃ ูุชุงุจุนุฉ ุงูุณุฏุงุฏ (ุชูุถูุญ ูููุน ูุจุณ) โ

**ุงูุชุทุจูู ูู MaintenancePaymentsTab:**

#### ูุงุฑุฏ ุญุงูุฉ ุงูุฃุดุฌุงุฑ
```jsx
<div className="bg-gradient-to-br from-blue-50 to-indigo-50 ...">
  <h4>ุญุงูุฉ ุงูุฃุดุฌุงุฑ ูู ุงููุฒุฑุนุฉ ุงููุฎุชุงุฑุฉ</h4>

  <div className="grid grid-cols-4 gap-4">
    {/* 1. ุฅุฌูุงูู ุงูุฃุดุฌุงุฑ - ููุนูู ููุท */}
    <div className="bg-white ...">
      <p>ุฅุฌูุงูู ุงูุฃุดุฌุงุฑ</p>
      <p>{selectedFarm.total_trees}</p>
      <p>(ููุนูู)</p>
    </div>

    {/* 2. ุฃุดุฌุงุฑ ุฎุถุฑุงุก ูุญุฌูุฒุฉ */}
    <div className="bg-green-100 ...">
      <p>ุฃุดุฌุงุฑ ุฎุถุฑุงุก ูุญุฌูุฒุฉ</p>
      <p>{selectedFarm.agricultural_trees}</p>
      <p>ุชุฏุฎู ูู ุงูุญุณุงุจุงุช โ</p>
    </div>

    {/* 3. ุฃุดุฌุงุฑ ุฐูุจูุฉ ูุญุฌูุฒุฉ */}
    <div className="bg-yellow-100 ...">
      <p>ุฃุดุฌุงุฑ ุฐูุจูุฉ ูุญุฌูุฒุฉ</p>
      <p>{selectedFarm.investment_trees}</p>
      <p>ุชุฏุฎู ูู ุงูุญุณุงุจุงุช โ</p>
    </div>

    {/* 4. ุฃุดุฌุงุฑ ุบูุฑ ูุญุฌูุฒุฉ */}
    <div className="bg-gray-100 ...">
      <p>ุฃุดุฌุงุฑ ุบูุฑ ูุญุฌูุฒุฉ</p>
      <p>{selectedFarm.unreserved_trees}</p>
      <p className="text-red-600 font-bold">ุฎุงุฑุฌ ูุทุงู ุงูุฑุณูู โ</p>
    </div>
  </div>

  {/* ุชูุจูู ูุงุถุญ */}
  <div className="mt-4 bg-white rounded-lg p-3 border-l-4 border-blue-500">
    <p>
      ุชูุจูู: ูุณุจ ุงูุณุฏุงุฏ ูุงููุชุจูู ุชูุญุณุจ ููุท ุนูู ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ
      ูู ุงููุณุงุฑ ุงููุฎุชุงุฑ. ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ ูุง ุชุฏุฎู ูู ุฃู ูุคุดุฑ ูุงูู.
    </p>
  </div>
</div>
```

#### ุชูุจูู ูู ุงูุชูุงุตูู ุงููุงููุฉ
```jsx
<div className={`rounded-xl p-4 border-l-4 ${
  selectedPath === 'agricultural'
    ? 'bg-green-50 border-green-500'
    : 'bg-yellow-50 border-yellow-500'
}`}>
  <p>๐ ุฌููุน ุงูุญุณุงุจุงุช ุฃุฏูุงู ุชุนุชูุฏ ุนูู:</p>
  <p>
    โ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ููุท ูู ูุณุงุฑ "{...}"
    = {reservedTreesCount} ุดุฌุฑุฉ
  </p>
  <p>
    โ ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ ({unreservedTrees})
    ูุง ุชุฏุฎู ูู ุฃู ูุณุจุฉ ุณุฏุงุฏ ุฃู ูุคุดุฑ ูุงูู
  </p>
</div>
```

**ูุง ููุนุฑุถ:**
- โ ุฅุฌูุงูู ุงูุฃุดุฌุงุฑ (ููุนูู ููุท)
- โ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ (ุฎุถุฑุงุก / ุฐูุจูุฉ)
- โ ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ
- โ ุชูููุฒ ูุงุถุญ: "ุบูุฑ ูุญุฌูุฒุฉ โ ุฎุงุฑุฌ ูุทุงู ุงูุฑุณูู"

**ูุง ูุง ูุฏุฎู ูู ุงูุญุณุงุจุงุช:**
- โ ูุณุจ ุงูุณุฏุงุฏ
- โ ุงููุชุจูู
- โ ุฃู ูุคุดุฑ ูุงูู

**ุงููููุน:**
- `src/components/admin/MaintenancePaymentsTab.tsx` (lines 214-411)

---

### 5๏ธโฃ ููุงุนุฏ ุชุญูู (Validation Rules) โ

**ุงูุชุทุจูู:**

#### ูู ุงูู Service
```typescript
// ูุงุนุฏุฉ 1: ููุน ุงูุญูุธ ุฅุฐุง ูู ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ
if (reservedTrees === 0) {
  throw new Error('ูุง ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ ูู ูุฐุง ุงููุณุงุฑ');
}

// ูุงุนุฏุฉ 2: path_type ุฅูุฒุงูู
interface MaintenanceRecordData {
  farm_id: string;
  path_type: 'agricultural' | 'investment';  // โ ุฅูุฒุงูู!
  // ...
}
```

#### ูู ุงูู UI
```typescript
// ูุงุนุฏุฉ 3: ุชุนุทูู ุญูู ุงูุฑุณูู
const canAddFees = reservedTreesCount > 0;

<input
  type="number"
  disabled={!canAddFees}
  // ...
/>

// ูุงุนุฏุฉ 4: ููุน ุงููุชุงุจุนุฉ ุจุฏูู path_type
const canProceed = () => {
  if (currentStep === 1) {
    return formData.farm_id
        && formData.path_type  // โ ูุฌุจ ุชุญุฏูุฏ ุงููุณุงุฑ
        && formData.maintenance_type
        && formData.maintenance_date;
  }
  return true;
};
```

**ุงูููุงุนุฏ ุงููุทุจูุฉ:**
- โ ุฅุฐุง ูุงู ุนุฏุฏ ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ = 0 โ ููููุน ุงูุญูุธ
- โ ุฅุฐุง ูู ููุญุฏุฏ ุงููุณุงุฑ โ ููููุน ุงูุญูุธ
- โ ุชุนุทูู ุญูู ุงูุฑุณูู ูู ุงููุงุฌูุฉ ุฅุฐุง ูู ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ
- โ ุฑุณุงุฆู ุชุญุฐูุฑ ูุงุถุญุฉ ูู ูู ุญุงูุฉ ุฎุทุฃ

**ุงููููุน:**
- `src/services/operationsService.ts` (lines 549-604, 449-472)
- `src/components/admin/MaintenanceRecordWizard.tsx` (lines 60-145)

---

## ุงููููุงุช ุงููุนุฏูุฉ

### 1. Services Layer
- `src/services/operationsService.ts`
  - โ ุฅุถุงูุฉ `getReservedTreesCount()`
  - โ ุฅุถุงูุฉ `getFarmsWithPathStats()`
  - โ ุชุนุฏูู `createFullMaintenanceRecord()` - ุฅุถุงูุฉ path_type ุฅูุฒุงูู
  - โ ุชุนุฏูู `createMaintenanceFee()` - ุฅุถุงูุฉ path_type
  - โ ุชุนุฏูู `createGroupedFee()` - ุญุณุงุจ reservedTrees ููุท

### 2. UI Components
- `src/components/admin/MaintenanceRecordWizard.tsx`
  - โ ุชุญุฏูุซ Interface ูู Farm - ุฅุถุงูุฉ path stats
  - โ ุฅุถุงูุฉ path_type ุฅูู MaintenanceRecordData
  - โ ุงูุฎุทูุฉ 1: ุนุฑุถ ุญุงูุฉ ุงูุฃุดุฌุงุฑ + ุงุฎุชูุงุฑ ุงููุณุงุฑ
  - โ ุงูุฎุทูุฉ 4: ุชุนุทูู ุงูุฑุณูู ุฅุฐุง ูู ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ
  - โ ุงูุฎุทูุฉ 5: ุนุฑุถ ุงููุณุงุฑ ูุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ

- `src/components/admin/GreenTreesTab.tsx`
  - โ ุงุณุชุฎุฏุงู `getFarmsWithPathStats()` ุจุฏูุงู ูู `getFarms()`

- `src/components/admin/MaintenancePaymentsTab.tsx`
  - โ ุชุญุฏูุซ Interface ูู FarmWithPaths
  - โ ุฅุถุงูุฉ ูุงุฑุฏ "ุญุงูุฉ ุงูุฃุดุฌุงุฑ ูู ุงููุฒุฑุนุฉ"
  - โ ุฅุถุงูุฉ ุชูุจูู ูู ุงูุชูุงุตูู ุงููุงููุฉ

### 3. Database (ููุฌูุฏุฉ ูุณุจูุงู)
- `supabase/migrations/20260204151346_add_path_type_to_maintenance_fees.sql`
  - โ ุฏุงูุฉ `get_farms_with_path_stats()`
  - โ ุฏุงูุฉ `get_farm_path_payment_summary()`
  - โ ุฏุงูุฉ `get_farm_path_payments_detail()`

---

## ุงูุชุญูู ูู ุงูุตุญุฉ

### ุงุฎุชุจุงุฑ 1: ุฅุถุงูุฉ ุฑุณูู ุตูุงูุฉ

```
ุงูุฎุทูุงุช:
1. ุงุฎุชุฑ ูุฒุฑุนุฉ ูุฏููุง:
   - 1000 ุดุฌุฑุฉ ุฅุฌูุงูู
   - 400 ุดุฌุฑุฉ ูุญุฌูุฒุฉ (ุฎุถุฑุงุก)
   - 300 ุดุฌุฑุฉ ูุญุฌูุฒุฉ (ุฐูุจูุฉ)
   - 300 ุดุฌุฑุฉ ุบูุฑ ูุญุฌูุฒุฉ

2. ุงุฎุชุฑ ุงููุณุงุฑ: ุฃุดุฌุงุฑู ุงูุฎุถุฑุงุก

3. ุฃุฏุฎู ุฑุณูู: 12,000 ุฑูุงู

ุงููุชูุฌุฉ ุงููุชููุนุฉ:
โ ุชูููุฉ ุงูุดุฌุฑุฉ = 12,000 รท 400 = 30 ุฑูุงู
โ ุงูุฑุณูู ุชูุทุจู ุนูู 400 ุดุฌุฑุฉ ูุญุฌูุฒุฉ ููุท
โ ูุง ุชูุญุณุจ ุงูู 300 ุดุฌุฑุฉ ุบูุฑ ุงููุญุฌูุฒุฉ
```

### ุงุฎุชุจุงุฑ 2: ููุน ุฑุณูู ุนูู ูุณุงุฑ ุจุฏูู ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ

```
ุงูุฎุทูุงุช:
1. ุงุฎุชุฑ ูุฒุฑุนุฉ ูุฏููุง:
   - 500 ุดุฌุฑุฉ ุฅุฌูุงูู
   - 0 ุดุฌุฑุฉ ูุญุฌูุฒุฉ (ุฎุถุฑุงุก)
   - 200 ุดุฌุฑุฉ ูุญุฌูุฒุฉ (ุฐูุจูุฉ)
   - 300 ุดุฌุฑุฉ ุบูุฑ ูุญุฌูุฒุฉ

2. ุญุงูู ุงุฎุชูุงุฑ ุงููุณุงุฑ: ุฃุดุฌุงุฑู ุงูุฎุถุฑุงุก

ุงููุชูุฌุฉ ุงููุชููุนุฉ:
โ ุงูุฒุฑ ูุนุทู
โ ุฑุณุงูุฉ: "ูุง ุชูุฌุฏ ุฃุดุฌุงุฑ ูุญุฌูุฒุฉ"
โ ุญูู ุงูุฑุณูู ูุนุทู
```

### ุงุฎุชุจุงุฑ 3: ูุชุงุจุนุฉ ุงูุณุฏุงุฏ

```
ุงูุฎุทูุงุช:
1. ุงุฐูุจ ุฅูู: ููุญุฉ ุงูุฅุฏุงุฑุฉ โ ุงูุชุดุบูู โ ูุชุงุจุนุฉ ุงูุณุฏุงุฏ

2. ุงุฎุชุฑ ูุฒุฑุนุฉ

3. ุฑุงุฌุน ูุงุฑุฏ "ุญุงูุฉ ุงูุฃุดุฌุงุฑ"

ุงููุชูุฌุฉ ุงููุชููุนุฉ:
โ ูุธูุฑ ุฅุฌูุงูู ุงูุฃุดุฌุงุฑ (ููุนูู)
โ ูุธูุฑ ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ (ุฎุถุฑุงุก/ุฐูุจูุฉ) - ุฎูููุฉ ููููุฉ
โ ูุธูุฑ ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ - ุฎูููุฉ ุฑูุงุฏูุฉ ูุน "ุฎุงุฑุฌ ูุทุงู ุงูุฑุณูู"
โ ุชูุจูู: ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ ูุง ุชุฏุฎู ูู ุงูุญุณุงุจุงุช

4. ุงุฎุชุฑ ูุณุงุฑ

5. ุฑุงุฌุน ุงูุชูุงุตูู ุงููุงููุฉ

ุงููุชูุฌุฉ ุงููุชููุนุฉ:
โ ุชูุจูู ูุจู ุงูุชูุงุตูู: ุงูุญุณุงุจุงุช ุชุนุชูุฏ ุนูู ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ููุท
โ ูุณุจุฉ ุงูุชุญุตูู ุชูุญุณุจ ูู ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ
โ ุงููุชุจูู ููุญุณุจ ูู ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ
```

---

## ุงูุฃูุฏุงู ุงููุญููุฉ

### โ ููุน ุฃู ุฎูุท ูุงูู
- ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ ูุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ ูููุตูุฉ ุชูุงูุงู
- ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ ูุง ุชุฏุฎู ูู ุฃู ุญุณุงุจ ูุงูู
- ุฑุณุงุฆู ุชุญุฐูุฑ ูุงุถุญุฉ ูู ูู ุฎุทูุฉ

### โ ุถูุงู ุงูุนุฏุงูุฉ
- ูู ูุณุชุซูุฑ ูุฏูุน ุจูุงุกู ุนูู ุฃุดุฌุงุฑู ุงููุญุฌูุฒุฉ ููุท
- ูุง ูุชุญูู ุฃุญุฏ ุฑุณูู ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ
- ุงูุญุณุงุจุงุช ุดูุงูุฉ ููุงุถุญุฉ

### โ ุฌุนู ุงูุชุดุบูู ูุชุนุงูู ููุท ูุน ุงูููุฌูุฏ ูุนููุงู
- ุงููุธุงู ูุญุณุจ ููุท ุงูุฃุดุฌุงุฑ ุงููุญุฌูุฒุฉ (ุงูููุชุฒู ุจูุง)
- ุงูุฃุดุฌุงุฑ ุบูุฑ ุงููุญุฌูุฒุฉ ูุนุฑูุถุฉ ููุนูู ููุท
- ุงูุชูููุฒ ุงูุจุตุฑู ูุงุถุญ

### โ ุญูุงูุฉ ุงููุธุงู ุนูุฏ ุงูุชูุณุน ูุณุชูุจูุงู
- ูุนูุงุฑูุฉ ูุงุจูุฉ ููุชูุณุน
- ููุงุนุฏ ุชุญูู ุตุงุฑูุฉ
- ููุน ุงูุฃุฎุทุงุก ุนูู ูุณุชูู ุงูููุฏ ูุงููุงุฌูุฉ

---

## ูููุงุช ุงูุชูุซูู ุงูุฅุถุงููุฉ

ุชู ุฅูุดุงุก 3 ูููุงุช ุชูุซูู:

1. **RESERVED_TREES_ONLY_SYSTEM_COMPLETE.md**
   - ุชูุซูู ุชููู ุดุงูู (90+ ุตูุญุฉ)
   - ุชูุงุตูู ูู ุชุนุฏูู ูู ุงูููุฏ
   - ุฃูุซูุฉ ุนูููุฉ
   - ูุนูุงุฑูุฉ ุงููุธุงู

2. **QUICK_GUIDE_RESERVED_TREES.md**
   - ุฏููู ุณุฑูุน ููุงุณุชุฎุฏุงู
   - ุฃูุซูุฉ ุจุตุฑูุฉ
   - ุญููู ูููุดุงูู ุงูุดุงุฆุนุฉ
   - ููุงุท ุชุญูู ุณุฑูุนุฉ

3. **PAYMENT_TRACKING_RESERVED_TREES_ONLY.md**
   - ุชูุงุตูู ุงูููุทุฉ 4 (ูุชุงุจุนุฉ ุงูุณุฏุงุฏ)
   - ุฃูุซูุฉ ุชูุถูุญูุฉ
   - ุงูุชุญูู ูู ุงูุตุญุฉ

---

## ุงูุฎูุงุตุฉ ุงูููุงุฆูุฉ

ุชู ุชูููุฐ **ุฌููุน ุงูููุงุท ุงูุฎูุณ** ูู ุงูุฃูุฑ ุงูุชูููุฐู ุจูุฌุงุญ:

| # | ุงูููุทุฉ | ุงูุญุงูุฉ | ุงููููุน |
|---|--------|--------|---------|
| 1 | ุชุนุฑูู ุญุงูุงุช ุงูุฃุดุฌุงุฑ | โ ููุชูู | ูุงุนุฏุฉ ุงูุจูุงูุงุช + Service |
| 2 | ูุงุนุฏุฉ ุชูุฒูุน ุงูุฑุณูู | โ ููุชูู | operationsService.ts |
| 3 | ููู ุฅุฏุฎุงู ุงูุฑุณูู ุงูุฎุงุทุฆ | โ ููุชูู | Service + MaintenanceRecordWizard |
| 4 | ูุชุงุจุนุฉ ุงูุณุฏุงุฏ | โ ููุชูู | MaintenancePaymentsTab |
| 5 | ููุงุนุฏ ุชุญูู | โ ููุชูู | Service + UI |

**ุงูุจูุงุก:** ูุฌุญ ุจุฏูู ุฃุฎุทุงุก โ

**ุงูุงุฎุชุจุงุฑุงุช:** ุฌุงูุฒ ููุงุฎุชุจุงุฑ ูู ุงูุจูุฆุฉ ุงูุฅูุชุงุฌูุฉ โ

**ุงูุชูุซูู:** ูุงูู ูุดุงูู โ

---

## ูููุทูุฑูู: ููููุฉ ุงููุชุงุจุนุฉ

ุฅุฐุง ุงุญุชุฌุช ุฅูู:

1. **ููู ุงููุนูุงุฑูุฉ**: ุฑุงุฌุน `RESERVED_TREES_ONLY_SYSTEM_COMPLETE.md`
2. **ุงุณุชุฎุฏุงู ุงููุธุงู**: ุฑุงุฌุน `QUICK_GUIDE_RESERVED_TREES.md`
3. **ูุชุงุจุนุฉ ุงูุณุฏุงุฏ**: ุฑุงุฌุน `PAYMENT_TRACKING_RESERVED_TREES_ONLY.md`
4. **ุฅุถุงูุฉ ููุฒุฉ ุฌุฏูุฏุฉ**: ุงุชุจุน ููุณ ุงูููุงุนุฏ (reserved_trees_by_path ููุท)

---

**ุงููุงุนุฏุฉ ุงูุฐูุจูุฉ ูุญููุธุฉ ูู ูู ุณุทุฑ ูู ุงูููุฏ:**

```typescript
// โ ุตุญูุญ
const costPerTree = totalAmount / reservedTreesCount;

// โ ุฎุทุฃ (ููููุน!)
const costPerTree = totalAmount / totalTreesInFarm;
```

**ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู ุจุซูุฉ ูุงููุฉ.**
