# ุงููุฑู ุจูู ActivationScreen ู PaymentPage

**ุฏููู ุงูููุงุฑูุฉ ุงูุณุฑูุน** ๐

---

## ๐ ุงูููุงุฑูุฉ ุงูุณุฑูุนุฉ

| ุงูููุฒุฉ | ActivationScreen | PaymentPage |
|--------|-----------------|-------------|
| **ุงูุบุฑุถ** | ุชูุนูู ุญู ุงูุชูุงุน ุฒุฑุงุนู | ุฏูุน ูุจุงุดุฑ |
| **ุงูุฎูุงุฑุงุช** | 3 ุฎูุงุฑุงุช (ููุฑูุ ูุฏููุ Apple Pay) | ุฎูุงุฑ ูุงุญุฏ (ุงูุจุทุงูุฉ + Apple Pay) |
| **ุงูุชุญููู ุงูุจููู** | โ ูุฏุนูู | โ ุบูุฑ ูุฏุนูู |
| **ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ** | ุงุฎุชูุงุฑ ุทุฑููุฉ ุงูุชูุนูู | ูุจุงุดุฑุฉ ููุจุทุงูุฉ |
| **ุงููุตุทูุญุงุช** | "ุชูุนูู" | "ุฏูุน" |
| **ุงูุฌุฏูู** | `activation_transactions` | `payments` |
| **ุงูุงุณุชุฎุฏุงู** | ููุญุฌูุฒุงุช ุงูุฒุฑุงุนูุฉ | ูููุฏููุนุงุช ุงูุนุงูุฉ |

---

## ๐ฏ ูุชู ุชุณุชุฎุฏู ูู ูุงุญุฏุ

### ุงุณุชุฎุฏู ActivationScreen ุนูุฏูุง:

```typescript
// 1. ุชูุนูู ุญุฌุฒ ุฒุฑุงุนู
<ActivationScreen
  reservationId={reservation.id}
  amount={5000}
  onSuccess={onSuccess}
  onBack={onBack}
/>

// ุงูููุฒุงุช:
// - 3 ุฎูุงุฑุงุช (ููุฑูุ ูุฏููุ Apple Pay)
// - ูุตุทูุญ "ุชูุนูู"
// - ุชุญููู ุจููู ูุชุงุญ
// - ุชุฌุฑุจุฉ ุฒุฑุงุนูุฉ
```

### ุงุณุชุฎุฏู PaymentPage ุนูุฏูุง:

```typescript
// 1. ุฏูุน ูุจุงุดุฑ ูุจุณูุท
<PaymentPage
  amount={3000}
  onSuccess={onSuccess}
/>

// ุงูููุฒุงุช:
// - ุฏูุน ูุจุงุดุฑ
// - ูุตุทูุญ "ุฏูุน"
// - ุจุทุงูุฉ + Apple Pay ููุท
// - ุฃุจุณุท
```

---

## ๐จ ุงููุฑููุงุช ูู ุงูุชุตููู

### ActivationScreen

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         โจ ุชูุนูู ุญู ุงูุงูุชูุงุน        โ
โ                                     โ
โ  โโโโโโโโโโโโโ  โโโโโโโโโโโโโ      โ
โ  โ โก ููุฑู   โ  โ ๐ฆ ูุฏูู  โ      โ
โ  โโโโโโโโโโโโโ  โโโโโโโโโโโโโ      โ
โ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
โ  โ  Apple Pay (iPhone)       โ     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโ     โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### PaymentPage

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         ๐ณ ุฅุชูุงู ุงูุฏูุน              โ
โ                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ  โ   ุญููู ุงูุจุทุงูุฉ ุงููุจุงุดุฑุฉ    โ   โ
โ  โ   - ุฑูู ุงูุจุทุงูุฉ             โ   โ
โ  โ   - ุชุงุฑูุฎ ุงูุงูุชูุงุก          โ   โ
โ  โ   - ุฑูุฒ ุงูุฃูุงู              โ   โ
โ  โ   [ุชูููุฐ ุงูุฏูุน]            โ   โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ   โ
โ                                     โ
โ   [ Apple Pay ] (iPhone)           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐ก ุฃูุซูุฉ ุนูููุฉ

### ูุซุงู 1: ุญุฌุฒ ูุฒุฑุนุฉ (ุงุณุชุฎุฏู ActivationScreen)

```typescript
// ูู ุตูุญุฉ ุงูุญุฌุฒ ุงูุฒุฑุงุนู
function FarmBooking() {
  const [step, setStep] = useState('details');

  if (step === 'activation') {
    return (
      <ActivationScreen
        reservationId={reservationId}
        amount={totalAmount}
        onSuccess={() => setStep('success')}
        onBack={() => setStep('review')}
      />
    );
  }
}

// ููุงุฐุง ActivationScreenุ
// - ุณูุงู ุฒุฑุงุนู
// - ูุญุชุงุฌ "ุชูุนูู" ูููุณ "ุฏูุน"
// - ุงูุชุญููู ุงูุจููู ูุชุงุญ
```

### ูุซุงู 2: ุดุฑุงุก ููุชุฌ (ุงุณุชุฎุฏู PaymentPage)

```typescript
// ูู ุตูุญุฉ ุดุฑุงุก ููุชุฌ
function BuyProduct() {
  return (
    <PaymentPage
      amount={product.price}
      onSuccess={() => {
        alert('ุชู ุงูุดุฑุงุก!');
      }}
    />
  );
}

// ููุงุฐุง PaymentPageุ
// - ุฏูุน ูุจุงุดุฑ
// - ูุง ุญุงุฌุฉ ููุชุญููู ุงูุจููู
// - ุฃุจุณุท ูุฃุณุฑุน
```

### ูุซุงู 3: ุชุฌุฏูุฏ ุงุดุชุฑุงู (ุงุณุชุฎุฏู PaymentPage)

```typescript
// ุชุฌุฏูุฏ ุงุดุชุฑุงู
function RenewSubscription() {
  return (
    <PaymentPage
      amount={subscription.renewal_price}
      onSuccess={() => renewSubscription()}
    />
  );
}

// ููุงุฐุง PaymentPageุ
// - ุฏูุน ุณุฑูุน
// - ูุง ุฎูุงุฑุงุช ุฅุถุงููุฉ ูุทููุจุฉ
```

---

## ๐ ุงูุชุญููู ุจููููุง

### ูู ActivationScreen ุฅูู PaymentPage

ุฅุฐุง ููุช ุชุณุชุฎุฏู ActivationScreen ูููู:
- ูุง ุชุญุชุงุฌ ุงูุชุญููู ุงูุจููู
- ุชุฑูุฏ ูุงุฌูุฉ ุฃุจุณุท
- ุงูุณูุงู ููุณ "ุชูุนูู"

**ุบููุฑ ุฅูู PaymentPage:**

```typescript
// ูุจู
<ActivationScreen
  reservationId={id}
  amount={amount}
  onSuccess={onSuccess}
  onBack={onBack}
/>

// ุจุนุฏ
<PaymentPage
  reservationId={id}
  amount={amount}
  onSuccess={onSuccess}
  onBack={onBack}
/>
```

### ูู PaymentPage ุฅูู ActivationScreen

ุฅุฐุง ููุช ุชุณุชุฎุฏู PaymentPage ูููู:
- ุชุญุชุงุฌ ุงูุชุญููู ุงูุจููู
- ุงูุณูุงู "ุชูุนูู" ูููุณ "ุฏูุน"
- ุชุฑูุฏ ุฎูุงุฑุงุช ุฃูุซุฑ

**ุบููุฑ ุฅูู ActivationScreen:**

```typescript
// ูุจู
<PaymentPage
  amount={amount}
  onSuccess={onSuccess}
/>

// ุจุนุฏ
<ActivationScreen
  reservationId={id} // ุฃุถู reservationId
  amount={amount}
  onSuccess={onSuccess}
  onBack={onBack}
/>
```

---

## ๐ ุงูุจูุงูุงุช

### ActivationScreen

```typescript
// ูุญูุธ ูู:
activation_transactions
  - id
  - reservation_id
  - activation_method: 'card' | 'apple_pay' | 'bank_transfer'
  - ...
```

### PaymentPage

```typescript
// ูุญูุธ ูู:
payments
  - id
  - reservation_id (ุงุฎุชูุงุฑู)
  - payment_method: 'card' | 'apple_pay'
  - ...
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

### ุงุณุชุฎุฏู ActivationScreen ู:
```
โ ุชูุนูู ุญุฌูุฒุงุช ุฒุฑุงุนูุฉ
โ ุนูุฏูุง ุชุญุชุงุฌ ุชุญููู ุจููู
โ ุณูุงู "ุชูุนูู"
โ ุฎูุงุฑุงุช ูุชุนุฏุฏุฉ
```

### ุงุณุชุฎุฏู PaymentPage ู:
```
โ ุฏูุน ูุจุงุดุฑ ูุจุณูุท
โ ุดุฑุงุก ููุชุฌุงุช
โ ุชุฌุฏูุฏ ุงุดุชุฑุงูุงุช
โ ุณูุงู "ุฏูุน"
```

---

## ๐ก ูุตูุญุฉ

**ุงุฎุชุฑ ุจูุงุกู ุนูู ุงูุณูุงู:**

- **ุฒุฑุงุนู + ุชุญููู ุจููู** โ `ActivationScreen`
- **ุจุณูุท + ูุจุงุดุฑ** โ `PaymentPage`

**ููุงููุง:**
- โ ุขูู
- โ RLS ูุงูู
- โ Apple Pay ุชููุงุฆู
- โ ุจุฏูู redirect
- โ ุฌุงูุฒ ููุฅูุชุงุฌ

---

**ุงูุฎูุงุตุฉ:** ููุงููุง ููุชุงุฒ - ุงุฎุชุฑ ุญุณุจ ุงูุญุงุฌุฉ! ๐
