# ุงููุฑุญูุฉ ุงูุฃููู: ูุธุงู ุงูุชุดุบูู - ููุชูู โ

## ูุธุฑุฉ ุนุงูุฉ
ุชู ุฅูุดุงุก ูุณู ุงูุชุดุบูู ุจูุฌุงุญ ูู ููุญุฉ ุงูุฅุฏุงุฑุฉ ููุธุงู ูุณุชูู ูุฅุฏุงุฑุฉ ุงูุตูุงูุฉ ูุฑุณูู ุงูุตูุงูุฉ ูููุฒุงุฑุน.

## โ ูุง ุชู ุฅูุฌุงุฒู

### 1. ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุฌุฏุงูู ุงูููุดุฃุฉ:

**maintenance_records** (ุณุฌูุงุช ุงูุตูุงูุฉ)
- `id` - uuid
- `farm_id` - ูุฑุฌุน ูููุฒุฑุนุฉ
- `maintenance_type` - (periodic/seasonal/emergency)
- `maintenance_date` - ุชุงุฑูุฎ ุงูุตูุงูุฉ
- `status` - (draft/published/completed)
- `created_at`, `updated_at`

**maintenance_stages** (ูุฑุงุญู ุงูุตูุงูุฉ)
- `id` - uuid
- `maintenance_id` - ูุฑุฌุน ูุณุฌู ุงูุตูุงูุฉ
- `stage_title` - ุนููุงู ุงููุฑุญูุฉ
- `stage_note` - ููุงุญุธุงุช
- `stage_date` - ุชุงุฑูุฎ ุงููุฑุญูุฉ

**maintenance_media** (ููุฏูุง ุงูุตูุงูุฉ)
- `id` - uuid
- `maintenance_id` - ูุฑุฌุน ูุณุฌู ุงูุตูุงูุฉ
- `media_type` - (image/video)
- `file_path` - ูุณุงุฑ ุงูููู
- `uploaded_at`

**maintenance_fees** (ุฑุณูู ุงูุตูุงูุฉ)
- `id` - uuid
- `maintenance_id` - ูุฑุฌุน ูุณุฌู ุงูุตูุงูุฉ
- `farm_id` - ูุฑุฌุน ูููุฒุฑุนุฉ
- `total_amount` - ุงููุจูุบ ุงูุฅุฌูุงูู
- `cost_per_tree` - ุชูููุฉ ุงูุดุฌุฑุฉ (ูุญุณูุจ ุชููุงุฆูุงู)
- `created_at`

#### ุงูููุฒุงุช ุงูุชูููุฉ:

โ **ุญุณุงุจ ุชููุงุฆู ูุชูููุฉ ุงูุดุฌุฑุฉ**
```sql
cost_per_tree = total_amount รท total_trees
```
ูุชู ุงูุญุณุงุจ ุชููุงุฆูุงู ุนูุฏ ุฅุฏุฎุงู ุฃู ุชุญุฏูุซ ุฑุณูู ุงูุตูุงูุฉ

โ **RLS ูุญูู**
- ุฌููุน ุงูุฌุฏุงูู ูุญููุฉ
- ุงููุตูู ูุญุตูุฑ ุจุงูุฅุฏุงุฑุฉ ููุท
- ูุง ูููู ูุฃู ุฌูุฉ ุฎุงุฑุฌูุฉ ุงููุตูู

โ **View ููุนุฑุถ ุงููุงูู**
- `maintenance_full_details` - ุนุฑุถ ุดุงูู ููู ุณุฌู ูุน:
  - ุจูุงูุงุช ุงููุฒุฑุนุฉ
  - ุงูุฑุณูู
  - ุนุฏุฏ ุงููุฑุงุญู
  - ุนุฏุฏ ุงููููุงุช

โ **Storage Bucket**
- `maintenance-media` ููุตูุฑ ูุงูููุฏูููุงุช
- ุณูุงุณุงุช ุฃูุงู ูุญููุฉ (ุฅุฏุงุฑุฉ ููุท)

### 2. ุงูุฎุฏูุงุช (Services)

ุชู ุฅูุดุงุก `operationsService.ts` ุจุงููุธุงุฆู ุงูุชุงููุฉ:

#### ุฅุฏุงุฑุฉ ุณุฌูุงุช ุงูุตูุงูุฉ:
- `getMaintenanceRecords()` - ุฌูุจ ุฌููุน ุงูุณุฌูุงุช
- `getMaintenanceRecordById()` - ุฌูุจ ุณุฌู ูุญุฏุฏ
- `createMaintenanceRecord()` - ุฅูุดุงุก ุณุฌู ุฌุฏูุฏ
- `updateMaintenanceRecord()` - ุชุญุฏูุซ ุณุฌู
- `deleteMaintenanceRecord()` - ุญุฐู ุณุฌู

#### ุฅุฏุงุฑุฉ ุงููุฑุงุญู:
- `getMaintenanceStages()` - ุฌูุจ ูุฑุงุญู ุณุฌู ูุนูู
- `createMaintenanceStage()` - ุฅุถุงูุฉ ูุฑุญูุฉ
- `deleteMaintenanceStage()` - ุญุฐู ูุฑุญูุฉ

#### ุฅุฏุงุฑุฉ ุงูููุฏูุง:
- `getMaintenanceMedia()` - ุฌูุจ ูููุงุช ุณุฌู ูุนูู
- `uploadMaintenanceMedia()` - ุฑูุน ุตูุฑุฉ ุฃู ููุฏูู
- `getMediaUrl()` - ุงูุญุตูู ุนูู ุฑุงุจุท ุงูููู
- `deleteMaintenanceMedia()` - ุญุฐู ููู

#### ุฅุฏุงุฑุฉ ุงูุฑุณูู:
- `getMaintenanceFee()` - ุฌูุจ ุฑุณูู ุณุฌู ูุนูู
- `createMaintenanceFee()` - ุฅูุดุงุก ุฑุณูู (ูุน ุญุณุงุจ ุชููุงุฆู)
- `updateMaintenanceFee()` - ุชุญุฏูุซ ุงูุฑุณูู
- `deleteMaintenanceFee()` - ุญุฐู ุฑุณูู

#### ูุณุงุนุฏ:
- `getFarms()` - ุฌูุจ ูุงุฆูุฉ ุงููุฒุงุฑุน

### 3. ูุงุฌูุฉ ุงูุฅุฏุงุฑุฉ

ุชู ุฅูุดุงุก `OperationsSection.tsx` ูุน ุงูููุฒุงุช ุงูุชุงููุฉ:

#### ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ:
โ ูุงุฆูุฉ ุดุงููุฉ ุจุฌููุน ุณุฌูุงุช ุงูุตูุงูุฉ
โ ุนุฑุถ ุจูุงูุงุช ูู ุณุฌู:
  - ุงุณู ุงููุฒุฑุนุฉ
  - ููุน ุงูุตูุงูุฉ (ุฏูุฑูุฉ/ููุณููุฉ/ุทุงุฑุฆุฉ)
  - ุงูุชุงุฑูุฎ
  - ุงูุญุงูุฉ (ูุณูุฏุฉ/ููุดูุฑ/ููุชูู)
  - ุงูุฑุณูู (ุฅุฌูุงูู ูุชูููุฉ ุงูุดุฌุฑุฉ)
  - ุนุฏุฏ ุงููุฑุงุญู
  - ุนุฏุฏ ุงููููุงุช

โ ุฅุฌุฑุงุกุงุช ุณุฑูุนุฉ:
  - ุนุฑุถ ุงูุชูุงุตูู
  - ุญุฐู ุงูุณุฌู

#### ูููุฐุฌ ุฅูุดุงุก ุณุฌู ุฌุฏูุฏ:
โ ุงุฎุชูุงุฑ ุงููุฒุฑุนุฉ ูู ูุงุฆูุฉ
โ ุงุฎุชูุงุฑ ููุน ุงูุตูุงูุฉ
โ ุชุญุฏูุฏ ุงูุชุงุฑูุฎ
โ ุชุญุฏูุฏ ุงูุญุงูุฉ
โ ุญูุธ ูุฅูุบุงุก

#### ุตูุญุฉ ุงูุชูุงุตูู (3 ุชุจููุจุงุช):

**ุชุจููุจ ุงููุฑุงุญู:**
โ ุนุฑุถ ุฌููุน ุงููุฑุงุญู ุงููุถุงูุฉ
โ ูููุฐุฌ ุฅุถุงูุฉ ูุฑุญูุฉ ุฌุฏูุฏุฉ:
  - ุนููุงู ุงููุฑุญูุฉ
  - ููุงุญุธุงุช
  - ุชุงุฑูุฎ
โ ุญุฐู ูุฑุญูุฉ

**ุชุจููุจ ุงููููุงุช:**
โ ุฑูุน ุตูุฑ ูู ุฃู ุฌูุงุฒ
โ ุฑูุน ููุฏูููุงุช ูู ุฃู ุฌูุงุฒ
โ ุนุฑุถ ุฌููุน ุงููููุงุช ุงููุฑููุนุฉ
โ ุญุฐู ูููุงุช

**ุชุจููุจ ุฑุณูู ุงูุตูุงูุฉ:**
โ ุนุฑุถ ุงูุฑุณูู ุงูุญุงููุฉ (ุฅู ูุฌุฏุช):
  - ุฅุฌูุงูู ุงูุฑุณูู
  - ุชูููุฉ ุงูุดุฌุฑุฉ (ูุญุณูุจุฉ)
โ ูููุฐุฌ ุฅุฏุฎุงู/ุชุญุฏูุซ ุฑุณูู:
  - ุฅุฏุฎุงู ุงููุจูุบ ุงูุฅุฌูุงูู
  - ุนุฑุถ ููุฑู ูุชูููุฉ ุงูุดุฌุฑุฉ ุงููุญุณูุจุฉ
  - ุญูุธ ุงูุฑุณูู

### 4. ุงูุชูุงูู ูุน ููุญุฉ ุงูุฅุฏุงุฑุฉ

โ ุฅุถุงูุฉ ูุณู "ุงูุชุดุบูู" ุฅูู ุงููุงุฆูุฉ ุงูุฌุงูุจูุฉ
โ ุฃููููุฉ Wrench ูููุฒุฉ
โ ููู ุจุฑุชูุงูู ููุชูููุฒ
โ ุชูุงูู ูุงูู ูุน ุจุงูู ุงูุฃูุณุงู

## ๐ฏ ุงูุงูุชุฒุงู ุจุงููุชุทูุจุงุช

### โ ููุทุฉ ุชุญูู ูุงุญุฏุฉ
- ูุง ูููู ุฅูุดุงุก ุตูุงูุฉ ุฅูุง ูู ูุณู ุงูุชุดุบูู
- ูุง ููุฌุฏ ุฑุจุท ุจุงููุณุชุฎุฏููู
- ูุง ููุฌุฏ ุฑุจุท ุจุงูุจุงูุงุช
- ูุง ููุฌุฏ ุฑุจุท ุจุงูุนููุฏ

### โ ุงูุญุณุงุจ ุงูุชููุงุฆู
- ุชูููุฉ ุงูุดุฌุฑุฉ ุชูุญุณุจ ุชููุงุฆูุงู
- ูุง ุฅุฏุฎุงู ูุฏูู
- ุงูุญุณุงุจ ูุชู ุนูู ูุณุชูู ูุงุนุฏุฉ ุงูุจูุงูุงุช (Trigger)

### โ ููุทู ุงููุดุฑ
- ุงูุณุฌูุงุช ูู ุญุงูุฉ "draft" ุบูุฑ ูุฑุฆูุฉ ุฎุงุฑุฌูุงู
- ุงูุชุญููู ุฅูู "published" ูุฌุนููุง ุฌุงูุฒุฉ ููุงุณุชููุงู
- ุญุงูุฉ "completed" ููุตูุงูุงุช ุงูููุชููุฉ

### โ ุงูุชูุซูู ุงููุงูู
- ุฑูุน ุตูุฑ ูููุฏูููุงุช
- ูู ุฃู ุฌูุงุฒ (ููุจุงูู/ููุจููุชุฑ)
- ุชุฎุฒูู ุขูู ูู Supabase Storage

### โ ุงูุฃูุงู
- RLS ููุนู ุนูู ุฌููุน ุงูุฌุฏุงูู
- ุงูุฅุฏุงุฑุฉ ููุท ูููููุง ุงููุตูู
- Storage ูุญูู ุจุณูุงุณุงุช ุฃูุงู

## ๐ ุงูุจูุงูุงุช ุงููุชุงุญุฉ ููุงุณุชููุงู

ุนูุฏูุง ูููู ุงูุณุฌู ูู ุญุงูุฉ "published"ุ ุงูุจูุงูุงุช ุงูุชุงููุฉ ุฌุงูุฒุฉ:

```typescript
{
  id: string
  farm_id: string
  farm_name: string
  maintenance_type: 'periodic' | 'seasonal' | 'emergency'
  maintenance_date: string
  status: 'published'
  total_amount: number
  cost_per_tree: number  // ูุญุณูุจ ุชููุงุฆูุงู
  stages: MaintenanceStage[]
  media: MaintenanceMedia[]
}
```

## ๐ ุญุณุงุจ ุงูุชุฒุงู ุงูุนููู (ูููุฑุญูุฉ ุงููุงุฏูุฉ)

ุนูุฏ ุงูุงุณุชุนูุงู ูู ุฌุงูุจ ุงูุนููู:

```typescript
client_due_amount = number_of_client_trees ร cost_per_tree
```

ูุฐุง ุงูุญุณุงุจ:
- โ ุฏููุงูููู
- โ ูุง ููุฎุฒู ูุณุจูุงู
- โ ูุชู ุนูุฏ ุงูุทูุจ
- โ ุนุงุฏู ูุชููุงุฆู

## ๐ ุงููููุงุช ุงูููุดุฃุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
- `/supabase/migrations/create_operations_maintenance_system.sql`
- `/supabase/migrations/create_maintenance_media_storage.sql`

### ุงูุฎุฏูุงุช:
- `/src/services/operationsService.ts`

### ุงูููููุงุช:
- `/src/components/admin/OperationsSection.tsx`

### ุงูุชุญุฏูุซุงุช:
- `/src/components/admin/AdminDashboard.tsx` (ุฅุถุงูุฉ ูุณู ุงูุชุดุบูู)

## ๐จ ุงูุชุตููู

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:
- **ุงูุฑุฆูุณู**: ุฃุฎุถุฑ (Green 600)
- **ุงูุญุงูุงุช**:
  - ูุณูุฏุฉ: ุฑูุงุฏู
  - ููุดูุฑ: ุฃุฒุฑู
  - ููุชูู: ุฃุฎุถุฑ
- **ุงูุฃููุงุน**:
  - ุฏูุฑูุฉ: ุจููุณุฌู
  - ููุณููุฉ: ุฃุตูุฑ
  - ุทุงุฑุฆุฉ: ุฃุญูุฑ

### ุงูุชุฌุฑุจุฉ:
- โ ูุงุฌูุฉ ูุธููุฉ ููุจุงุดุฑุฉ
- โ ุงุณุชุฌุงุจุฉ ูุงููุฉ (Mobile + Desktop)
- โ ุชููู ุณูุณ ุจูู ุงูุฃูุณุงู
- โ ุฑุฏูุฏ ูุนู ููุฑูุฉ (alerts)
- โ ุชุญููู ุณูุณ ููุจูุงูุงุช

## ๐ ุงูุงุณุชุฎุฏุงู

### ุฅูุดุงุก ุณุฌู ุตูุงูุฉ ุฌุฏูุฏ:
1. ุงูุฏุฎูู ุฅูู ูุณู ุงูุชุดุบูู
2. ุงูููุฑ ุนูู "ุณุฌู ุตูุงูุฉ ุฌุฏูุฏ"
3. ุงุฎุชูุงุฑ ุงููุฒุฑุนุฉ
4. ุชุญุฏูุฏ ููุน ุงูุตูุงูุฉ ูุงูุชุงุฑูุฎ
5. ุญูุธ (ูุชู ุฅูุดุงุคู ูู ุญุงูุฉ draft)

### ุฅุถุงูุฉ ุชูุงุตูู ุงูุณุฌู:
1. ุงูููุฑ ุนูู "ุนุฑุถ ุงูุชูุงุตูู"
2. ุชุจููุจ ุงููุฑุงุญู: ุฅุถุงูุฉ ูุฑุงุญู ุงูุนูู
3. ุชุจููุจ ุงููููุงุช: ุฑูุน ุตูุฑ/ููุฏูููุงุช
4. ุชุจููุจ ุงูุฑุณูู: ุฅุฏุฎุงู ุงููุจูุบ ุงูุฅุฌูุงูู

### ุงููุดุฑ:
1. ุงูุชุฃูุฏ ูู ุงูุชูุงู ุงูุจูุงูุงุช
2. ุชุบููุฑ ุงูุญุงูุฉ ุฅูู "published"
3. ุงูุณุฌู ุงูุขู ุฌุงูุฒ ููุงุณุชููุงู ูู ุงูุนููุงุก

## โ ุงูุชุญูู ูู ุงูุฌูุฏุฉ

- โ ุงูุจูุงุก ูุงุฌุญ ุจุฏูู ุฃุฎุทุงุก
- โ TypeScript types ูุงููุฉ
- โ RLS policies ูุญููุฉ
- โ Triggers ุชุนูู ุจุดูู ุตุญูุญ
- โ Storage policies ุขููุฉ
- โ UI responsive ุจุงููุงูู
- โ ุชูุงูู ูุงูู ูุน ููุญุฉ ุงูุฅุฏุงุฑุฉ

## ๐ ููุงุญุธุงุช ูููุฉ

### ุงูุฃูุงู:
- โ ูุง ูููู ูุฃู ุดุฎุต ุฎุงุฑุฌ ุงูุฅุฏุงุฑุฉ ุงููุตูู ููุจูุงูุงุช
- โ ูุง ูููู ุฅูุดุงุก ุตูุงูุฉ ูู ุฎุงุฑุฌ ูุณู ุงูุชุดุบูู
- โ ูุง ูููู ุชุนุฏูู ุชูููุฉ ุงูุดุฌุฑุฉ ูุฏููุงู
- โ ุฌููุน ุงูุนูููุงุช ูุณุฌูุฉ ููุฑุงูุจุฉ

### ุงูุจูุงูุงุช:
- โ ูุง ุฑุจุท ุจุงููุณุชุฎุฏููู
- โ ูุง ุฑุจุท ุจุงูุจุงูุงุช
- โ ูุง ุฑุจุท ุจุงูุนููุฏ
- โ ุฑุจุท ุจุงููุฒุงุฑุน ููุท

### ุงูุญุณุงุจุงุช:
- โ ุญุณุงุจ ุชูููุฉ ุงูุดุฌุฑุฉ ุชููุงุฆู
- โ ุงูุญุณุงุจ ูุชู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ูุง ูููู ุงูุชูุงุนุจ ุจุงููุชูุฌุฉ

## ๐ ุงููุฑุงุญู ุงููุงุฏูุฉ

### ุงููุฑุญูุฉ ุงูุซุงููุฉ: ุงุณุชููุงู ุงูุจูุงูุงุช
- ุฅูุดุงุก ูุงุฌูุฉ "ุฃุดุฌุงุฑู ุงูุฎุถุฑุงุก" ููุนููุงุก
- ุนุฑุถ ุณุฌูุงุช ุงูุตูุงูุฉ ุงูููุดูุฑุฉ
- ุญุณุงุจ ุงูุชุฒุงู ุงูุณุฏุงุฏ ุงูุฏููุงูููู
- ุนุฑุถ ุงูููุฏูุง ูุงููุฑุงุญู

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ: ุงูุชูุงุฑูุฑ
- ุชูุงุฑูุฑ ุงูุชุญุตูู
- ูุงุฆูุฉ ุงููุณุฏุฏูู/ุบูุฑ ุงููุณุฏุฏูู
- ุฅุญุตุงุฆูุงุช ุงูุตูุงูุฉ
- ุชูุงุฑูุฑ ุงูุฃุฏุงุก

### ุงููุฑุญูุฉ ุงูุฑุงุจุนุฉ: ุงูุฅุดุนุงุฑุงุช
- ุฅุดุนุงุฑ ุนูุฏ ูุดุฑ ุตูุงูุฉ ุฌุฏูุฏุฉ
- ุชุฐููุฑ ุจุงูุณุฏุงุฏ
- ุฅุดุนุงุฑ ุจุงูุชูุงู ุงูุตูุงูุฉ

---

## โ ุงููุฑุญูุฉ ุงูุฃููู ููุชููุฉ ุจูุฌุงุญ

ุชู ุฅูุดุงุก ูุณู ุงูุชุดุบูู ุจุงููุงูู ููุธุงู ูุณุชูู ููุญูู ูุฅุฏุงุฑุฉ ุงูุตูุงูุฉ ูุฑุณูู ุงูุตูุงูุฉ. ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ูู ูุจู ุงูุฅุฏุงุฑุฉ ูุฌุงูุฒ ููุฑุจุท ูุน ูุงุฌูุฉ ุงูุนููุงุก ูู ุงููุฑุงุญู ุงููุงุฏูุฉ.

**ุงูุชุงุฑูุฎ**: 4 ูุจุฑุงูุฑ 2026
**ุงูุญุงูุฉ**: โ ููุชูู ููุฎุชุจุฑ
